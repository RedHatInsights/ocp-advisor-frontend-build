{"version":3,"sources":["webpack:///./src/Messages.js","webpack:///./src/Components/ClusterHeader/ClusterHeader.js","webpack:///./src/Components/ClusterHeader/index.js","webpack:///./src/Components/MessageState/MessageState.js","webpack:///./src/AppConstants.js","webpack:///./src/Components/ReportDetails/ReportDetails.js","webpack:///./src/Components/ClusterRules/ClusterRules.js","webpack:///./src/Components/Breadcrumbs/Breadcrumbs.js","webpack:///./src/Components/Breadcrumbs/index.js","webpack:///./src/Components/Loading/Loading.js","webpack:///./src/Components/Cluster/Cluster.js","webpack:///./src/Components/Cluster/index.js"],"names":["defineMessages","documentTitle","id","defaultMessage","clusters","added","loading","lastSeen","actions","name","filterBy","totalRisk","recommendation","recommendations","insightsHeader","unknown","low","moderate","important","critical","veryLow","medium","high","availability","performance","stability","security","enabled","impact","impactLevel","impactDescription","category","likelihood","likelihoodLevel","likelihoodDescription","all","disabled","resetFilters","noMatchingRecommendations","noMatchingRecommendationsDesc","noRecommendations","noRecommendationsDesc","ClusterHeader","clusterId","displayName","intl","useIntl","isUninitialized","isLoading","isFetching","clusterName","data","Grid","md","hasGutter","GridItem","Skeleton","size","Title","headingLevel","Stack","StackItem","formatMessage","messages","propTypes","PropTypes","routerParams","match","params","useGetClusterDisplayNameByIdQuery","useLazyGetClusterByIdQuery","report","MessageState","className","children","icon","iconClass","iconStyle","text","title","variant","EmptyState","EmptyStateIcon","style","EmptyStateBody","marginBottom","defaultProps","CubesIcon","EmptyStateVariant","cache","createIntlCache","locale","navigator","language","slice","createIntl","onError","console","error","intlSettings","LIKELIHOOD_LABEL","intlHelper","IMPACT_LABEL","TOTAL_RISK_LABEL","RISK_OF_CHANGE_LABEL","FILTER_CATEGORIES","total_risk","type","urlParam","values","label","value","res_risk","rule_status","ReportDetails","AsyncComponent","appName","module","details","extra_data","resolution","ClusterRules","reports","useState","activeReports","setActiveReports","sortBy","setSortBy","filters","setFilters","searchValue","setSearchValue","isSelected","setIsSelected","rows","setRows","results","length","cols","transforms","sortable","cellWidth","handleOnCollapse","_e","rowId","isOpen","collapseRows","onKebabClick","action","allRows","map","row","key","Object","prototype","hasOwnProperty","call","onClick","buildRows","builtRows","flatMap","rule","entity","filter","rowVal","rowKey","rule_id","selected","reportRow","cells","description","DateFormat","date","created_at","tooltipProps","position","TooltipPosition","verticalAlign","Tooltip","content","InsightsLabel","parent","fullWidth","isValidSearchValue","toLowerCase","includes","isValidFilterValue","keys","filterValues","rowValue","tags","find","String","every","x","forEach","index","selectedItemsLength","getSelectedItems","onBulkSelect","bulkSelect","items","count","checked","onSelect","onFilterChange","param","newFilters","removeFilterParam","filterConfigItems","onChange","onInputChange","FC","activeFiltersConfig","deleteTitle","prunedFilters","entries","chips","item","capitalize","push","buildFilterChips","onDelete","itemsToRemove","isAll","useEffect","activeReportsData","PrimaryToolbar","actionsConfig","filterConfig","pagination","Table","onCollapse","canSelectAll","onSort","direction","sortedReports","sort","concat","firstItem","secondItem","sortedReportsDirectional","SortByDirection","reverse","TableVariant","isStickyHeader","TableHeader","TableBody","Card","CardBody","CheckIcon","Breadcrumbs","current","setItems","buildBreadcrumbs","useCallback","log","crumbs","splitUrl","url","split","navigate","Breadcrumb","ouiaId","oneLink","BreadcrumbItem","isActive","Cluster","cluster","isError","isSuccess","PageHeader","Main","SearchIcon","span","useGetClusterByIdQuery","refetch","subnav","document"],"mappings":"oNAGA,SAAeA,E,SAAAA,IAAe,CAC5BC,cAAe,CACbC,GAAI,gBAEJC,eAAgB,CAAF,6EAEhBC,SAAU,CACRF,GAAI,WAGJC,eAAgB,CAAF,4BAEhBE,MAAO,CACLH,GAAI,QAEJC,eAAgB,CAAF,yBAEhBG,QAAS,CACPJ,GAAI,UAEJC,eAAgB,CAAF,2BAEhBI,SAAU,CACRL,GAAI,WAGJC,eAAgB,CAAF,6BAEhBK,QAAS,CACPN,GAAI,UAEJC,eAAgB,CAAF,2BAEhBM,KAAM,CACJP,GAAI,OAGJC,eAAgB,CAAF,wBAEhBO,SAAU,CACRR,GAAI,WAEJC,eAAgB,CAAF,kCAEhBQ,UAAW,CACTT,GAAI,YAGJC,eAAgB,CAAF,8BAEhBS,eAAgB,CACdV,GAAI,iBAEJC,eAAgB,CAAF,kCAEhBU,gBAAiB,CACfX,GAAI,kBAEJC,eAAgB,CAAF,mCAEhBW,eAAgB,CACdZ,GAAI,iBAEJC,eAAgB,CAAF,2BAEhBY,QAAS,CACPb,GAAI,UAEJC,eAAgB,CAAF,2BAEhBa,IAAK,CACHd,GAAI,MAEJC,eAAgB,CAAF,uBAEhBc,SAAU,CACRf,GAAI,WAEJC,eAAgB,CAAF,4BAEhBe,UAAW,CACThB,GAAI,YAEJC,eAAgB,CAAF,6BAEhBgB,SAAU,CACRjB,GAAI,WAEJC,eAAgB,CAAF,4BAEhBiB,QAAS,CACPlB,GAAI,UAEJC,eAAgB,CAAF,4BAEhBkB,OAAQ,CACNnB,GAAI,SAEJC,eAAgB,CAAF,0BAEhBmB,KAAM,CACJpB,GAAI,OAEJC,eAAgB,CAAF,wBAEhBoB,aAAc,CACZrB,GAAI,eAEJC,eAAgB,CAAF,gCAEhBqB,YAAa,CACXtB,GAAI,cAEJC,eAAgB,CAAF,+BAEhBsB,UAAW,CACTvB,GAAI,YAEJC,eAAgB,CAAF,6BAEhBuB,SAAU,CACRxB,GAAI,WAEJC,eAAgB,CAAF,4BAEhBwB,QAAS,CACPzB,GAAI,UAEJC,eAAgB,CAAF,2BAEhByB,OAAQ,CACN1B,GAAI,SAEJC,eAAgB,CAAF,0BAEhB0B,YAAa,CACX3B,GAAI,cAEJC,eAAgB,CAAF,kDAEhB2B,kBAAmB,CACjB5B,GAAI,oBAGJC,eAAc,iHAGhB4B,SAAU,CACR7B,GAAI,WAEJC,eAAgB,CAAF,4BAEhB6B,WAAY,CACV9B,GAAI,aAEJC,eAAgB,CAAF,8BAEhB8B,gBAAiB,CACf/B,GAAI,kBAEJC,eAAgB,CAAF,sDAEhB+B,sBAAuB,CACrBhC,GAAI,wBAGJC,eAAgB,CAAF,4GAEhBgC,IAAK,CACHjC,GAAI,MAEJC,eAAgB,CAAF,uBAEhBiC,SAAU,CACRlC,GAAI,WAEJC,eAAgB,CAAF,4BAEhBkC,aAAc,CACZnC,GAAI,eAEJC,eAAgB,CAAF,iCAEhBmC,0BAA2B,CACzBpC,GAAI,4BACJC,eAAgB,CAAF,qDAEhBoC,8BAA+B,CAC7BrC,GAAI,gCACJC,eAAc,wGAGhBqC,kBAAmB,CACjBtC,GAAI,oBAGJC,eAAc,8FAGhBsC,sBAAuB,CACrBvC,GAAI,wBACJC,eAAgB,CAAF,mE,kGC7LLuC,EAAgB,SAAC,GAAyC,IAAvCC,EAAuC,EAAvCA,UAAWpC,EAA4B,EAA5BA,SAAUqC,EAAkB,EAAlBA,YAC7CC,GAAOC,SAEXC,EAIEH,EAJFG,gBACAC,EAGEJ,EAHFI,UACAC,EAEEL,EAFFK,WACMC,EACJN,EADFO,KAGF,OACE,kBAAC,aAAD,KACE,kBAAC,EAAAC,KAAD,CAAMC,GAAI,GAAIC,WAAS,GACrB,kBAAC,EAAAC,SAAD,KACGR,GAAmBC,GAAaC,EAC/B,kBAACO,EAAA,EAAD,CAAUC,KAAK,OAEf,kBAAC,EAAAC,MAAD,CAAOD,KAAK,MAAME,aAAa,MAC5BT,GAAeP,IAItB,kBAAC,EAAAY,SAAD,KACE,kBAAC,EAAAK,MAAD,KACE,kBAAC,EAAAC,UAAD,KACE,wCACA,8BAAOlB,GAAaE,EAAKiB,cAAcC,aAEzC,kBAAC,EAAAF,UAAD,KACE,8BAAOhB,EAAKiB,cAAcC,YAA1B,MACA,8BAAOxD,GAAYsC,EAAKiB,cAAcC,kBASpDrB,EAAcsB,UAAY,CACxBrB,UAAWsB,sBACXrB,YAAaqB,sBACb1D,SAAU0D,YCjDZ,SAAeC,SAAa,YAAe,MACnCvB,EADmC,EAAZwB,MACLC,OAAOzB,UACzBC,GAAcyB,OAAkC1B,GAC9CQ,GAASmB,QAA2B3B,GAApCQ,KAER,OACE,kBAACT,EAAD,CACEC,UAAWA,EACXC,YAAaA,EACbrC,SAAU4C,SAAF,UAAEA,EAAMoB,cAAR,aAAE,EAAchE,c,iJCJxBiE,EAAe,SAAC,GAAD,IACnBC,EADmB,EACnBA,UACAC,EAFmB,EAEnBA,SACAC,EAHmB,EAGnBA,KACAC,EAJmB,EAInBA,UACAC,EALmB,EAKnBA,UACAC,EANmB,EAMnBA,KACAC,EAPmB,EAOnBA,MACAC,EARmB,EAQnBA,QARmB,OAUnB,kBAACC,EAAA,GAAD,CAAYR,UAAWA,EAAWO,QAASA,GAC/B,SAATL,GACC,kBAACO,EAAA,EAAD,CAAgBT,UAAWG,EAAWO,MAAON,EAAWF,KAAMA,IAEhE,kBAACjB,QAAD,CAAOC,aAAa,KAAKF,KAAK,MAC3BsB,GAEH,kBAACK,EAAA,EAAD,CAAgBD,MAAO,CAAEE,aAAc,SAAWP,GACjDJ,IAILF,EAAaR,UAAY,CACvBU,SAAUT,QACVU,KAAMV,QACNW,UAAWX,QACXY,UAAWZ,QACXa,KAAMb,QACNc,MAAOd,WACPe,QAASf,QACTQ,UAAWR,YAGbO,EAAac,aAAe,CAC1BX,KAAMY,KACNR,MAAO,GACPC,QAASQ,WAGX,U,qCC9CMC,GAAQC,UACRC,EAASC,UAAUC,SAASC,MAAM,EAAG,GACrCjD,GAAOkD,OACX,CAEEC,QAASC,QAAQC,MACjBP,UAEFF,GAEIU,EAAe,CAAER,UAEVS,EAAmB,CAC9B,GAAGC,OAAWxD,EAAKiB,cAAcC,OAAeoC,GAChD,GAAGE,OAAWxD,EAAKiB,cAAcC,UAAkBoC,GACnD,GAAGE,OAAWxD,EAAKiB,cAAcC,QAAgBoC,GACjD,GAAGE,OAAWxD,EAAKiB,cAAcC,YAAoBoC,IAE1CG,EAAe,CAC1B,GAAGD,OAAWxD,EAAKiB,cAAcC,OAAeoC,GAChD,GAAGE,OAAWxD,EAAKiB,cAAcC,UAAkBoC,GACnD,GAAGE,OAAWxD,EAAKiB,cAAcC,QAAgBoC,GACjD,GAAGE,OAAWxD,EAAKiB,cAAcC,YAAoBoC,IAE1CI,EAAmB,CAC9B,GAAGF,OAAWxD,EAAKiB,cAAcC,OAAeoC,GAChD,GAAGE,OAAWxD,EAAKiB,cAAcC,YAAoBoC,GACrD,GAAGE,OAAWxD,EAAKiB,cAAcC,aAAqBoC,GACtD,GAAGE,OAAWxD,EAAKiB,cAAcC,YAAoBoC,IAE1CK,EAAuB,CAClC,GAAGH,OAAWxD,EAAKiB,cAAcC,WAAmBoC,GACpD,GAAGE,OAAWxD,EAAKiB,cAAcC,OAAeoC,GAChD,GAAGE,OAAWxD,EAAKiB,cAAcC,YAAoBoC,GACrD,GAAGE,OAAWxD,EAAKiB,cAAcC,QAAgBoC,IAEtCM,EAAoB,CAC/BC,WAAY,CACVC,KAAM,WACN5B,MAAO,aACP6B,SAAU,aACVC,OAAQ,CACN,CAAEC,MAAOP,EAAiB,GAAIQ,MAAO,KACrC,CAAED,MAAOP,EAAiB,GAAIQ,MAAO,KACrC,CAAED,MAAOP,EAAiB,GAAIQ,MAAO,KACrC,CAAED,MAAOP,EAAiB,GAAIQ,MAAO,OAGzCC,SAAU,CACRL,KAAM,WACN5B,MAAO,iBACP6B,SAAU,WACVC,OAAQ,CACN,CAAEC,MAAON,EAAqB,GAAIO,MAAO,KACzC,CAAED,MAAON,EAAqB,GAAIO,MAAO,KACzC,CAAED,MAAON,EAAqB,GAAIO,MAAO,KACzC,CAAED,MAAON,EAAqB,GAAIO,MAAO,OAG7CnF,OAAQ,CACN+E,KAAM,WACN5B,MAAO,SACP6B,SAAU,SACVC,OAAQ,CACN,CAAEC,MAAOR,EAAa,GAAIS,MAAO,KACjC,CAAED,MAAOR,EAAa,GAAIS,MAAO,KACjC,CAAED,MAAOR,EAAa,GAAIS,MAAO,KACjC,CAAED,MAAOR,EAAa,GAAIS,MAAO,OAGrC/E,WAAY,CACV2E,KAAM,WACN5B,MAAO,aACP6B,SAAU,aACVC,OAAQ,CACN,CAAEC,MAAOV,EAAiB,GAAIW,MAAO,KACrC,CAAED,MAAOV,EAAiB,GAAIW,MAAO,KACrC,CAAED,MAAOV,EAAiB,GAAIW,MAAO,KACrC,CAAED,MAAOV,EAAiB,GAAIW,MAAO,OAGzCE,YAAa,CACXN,KAAM,QACN5B,MAAO,SACP6B,SAAU,cACVC,OAAQ,CACN,CACEC,OAAOT,OAAWxD,EAAKiB,cAAcC,OAAeoC,GACpDY,MAAO,OAET,CACED,OAAOT,OAAWxD,EAAKiB,cAAcC,WAAmBoC,GACxDY,MAAO,WAET,CACED,OAAOT,OAAWxD,EAAKiB,cAAcC,YAAoBoC,GACzDY,MAAO,e,glBC9Ff,IAAMG,EAAgB,SAAC,GAAe,IAAb3C,EAAa,EAAbA,OACvB,OACE,yBAAKE,UAAU,WACb,kBAAC0C,EAAA,EAAD,CACEC,QAAQ,UACRC,OAAO,yBAEP9C,OAAM,OACDA,GADC,IAEJ+C,QAAS/C,EAAOgD,WAChBC,WAAY,CACVA,WAAYjD,EAAOiD,kBAQ/BN,EAAclD,UAAY,CACxBO,OAAQN,uBAGV,U,qkBCKA,IAAMwD,GAAe,SAAC,GAAgB,IAAdC,EAAc,EAAdA,QAChB7E,GAAOC,SACb,GAA0C6E,cAAS,IAAnD,eAAOC,EAAP,KAAsBC,EAAtB,KACA,GAA4BF,cAAS,IAArC,eAAOG,EAAP,KAAeC,EAAf,KACA,GAA8BJ,cAAS,IAAvC,eAAOK,EAAP,KAAgBC,EAAhB,KACA,GAAsCN,cAAS,IAA/C,eAAOO,EAAP,KAAoBC,EAApB,KACA,GAAoCR,eAAS,GAA7C,eAAOS,EAAP,KAAmBC,EAAnB,KACA,GAAwBV,cAAS,IAAjC,eAAOW,EAAP,KAAaC,EAAb,KACMC,EAAUF,EAAOA,EAAKG,OAAS,EAAI,EAEnCC,EAAO,CACX,CACE3D,MAAOlC,EAAKiB,cAAcC,QAC1B4E,WAAY,CAACC,aAEf,CACE7D,MAAOlC,EAAKiB,cAAcC,SAC1B4E,WAAY,CAACC,YAAUC,eAAU,MAEnC,CACE9D,MAAOlC,EAAKiB,cAAcC,aAC1B4E,WAAY,CAACC,YAAUC,eAAU,OAI/BC,EAAmB,SAACC,EAAIC,EAAOC,GACnC,IAAMC,GAAe,OAAIZ,GACzBY,EAAaF,GAAb,OAA2BE,EAAaF,IAAxC,IAAgDC,WAChDV,EAAQW,IAGJC,EAAe,SAACC,GACpB,IAAMH,EAAoB,wBAAXG,EACTC,GAAU,OAAIf,GAEpBe,EAAQC,KAAI,SAACC,EAAKC,GACZC,OAAOC,UAAUC,eAAeC,KAAKL,EAAK,YAC5CA,EAAIN,OAASA,EACbA,GAAUH,EAAiB,EAAMU,EAAKP,OAI1CV,EAAQc,IAGJ7I,EAAU,CACd,CACEsG,MAAO,eACP+C,QAAS,kBAAMV,EAAa,2BAE9B,CACErC,MAAO,aACP+C,QAAS,kBAAMV,EAAa,0BAI1BW,EAAY,SAAClC,EAAeI,EAASM,GAA2B,IAArBJ,EAAqB,uDAAP,GACvD6B,EAAYnC,EAAcoC,SAAQ,SAACjD,EAAOyC,GAC9C,IAAMS,EAAOlD,EACPS,EAAaT,EAAMS,WACnB0C,EAAS5B,EAAK6B,QAClB,SAACC,EAAQC,GAAT,OACEA,EAAS,GAAM,GAAKD,EAAOH,KAAKK,UAAYL,EAAKK,SAAWF,KAE1DG,IAAWL,EAAOzB,QAASyB,EAAO,GAAGK,SACrCtB,EAASX,EAAKG,SAChByB,EAAOzB,QACLyB,EAAO,GAAGjB,OAEJ,IAARO,EAIEgB,EAAY,CAChB,CACEP,OACAzC,aACAyB,SACAsB,WACAE,MAAO,CACL,CAAE1F,MAAO,iCAAOkF,EAAKS,cACrB,CACE3F,MACE,yBAAKyE,IAAKA,GACR,kBAACmB,EAAA,EAAD,CACEC,KAAMX,EAAKY,WACXlE,KAAK,WACLmE,aAAc,CAAEC,SAAUC,8BAKlC,CACEjG,MACE,yBAAKyE,IAAKA,EAAKrE,MAAO,CAAE8F,cAAe,QACrC,kBAAC,EAAAC,QAAD,CACE1B,IAAKA,EACLuB,SAAUC,yBACVG,QAEE,qCACM,8CADN,kCAEa,IACVlB,WAAMjI,WACHoE,EAAiB6D,aAAD,EAACA,EAAMjI,YACvB,UALN,SAMQ,0CANR,2BAMwD,IACrDiI,WAAMrI,OAAS0E,EAAa2D,aAAD,EAACA,EAAMrI,QAAU,UAAW,IAP1D,oBAYF,kBAACwJ,EAAA,EAAD,CAAerE,MAAOkD,EAAKvD,kBAOvC,CACE2E,OAAQ7B,EACR8B,WAAW,EACXb,MAAO,CACL,CACE1F,MAAO,kBAAC,EAAD,CAAeyE,IAAG,gBAAWA,GAAOjF,OAAQwC,QAKrDwE,EACmB,IAAvBrD,EAAYO,QACZwB,EAAKS,YAAYc,cAAcC,SAASvD,EAAYsD,eAChDE,EAC4B,IAAhCjC,OAAOkC,KAAK3D,GAASS,QACrBgB,OAAOkC,KAAK3D,GACTsB,KAAI,SAACE,GACJ,IAAMoC,EAAe5D,EAAQwB,GACvBqC,EAAW,CACfhB,WAAYZ,EAAKY,WACjBnE,WAAYuD,EAAKvD,WACjBoF,KAAM7B,EAAK6B,MAEb,OAAOF,EAAaG,MAClB,SAAChF,GAAD,OAAWiF,OAAOjF,KAAWiF,OAAOH,EAASrC,UAGhDyC,OAAM,SAACC,GAAD,OAAOA,KAElB,OAAOX,GAAsBG,EAAqBlB,EAAY,MAOhE,OAJAT,EAAUoC,SAAQ,SAAC5C,EAAK6C,GAAN,OAChB7C,EAAI8B,OAAU9B,EAAI8B,OAASe,EAAQ,EAAK,QAGnCrC,GA2CHsC,EADmB,SAAC/D,GAAD,OAAUA,EAAK6B,QAAO,SAACD,GAAD,OAAYA,EAAOK,YACtC+B,CAAiBhE,GAAMG,OAE7C8D,EAAe,SAACnE,GACpBC,EAAcD,GACdG,EACEuB,EACElC,EACAI,EACAM,EAAKgB,KAAI,SAACC,EAAK6C,GAAN,OACPA,EAAQ,GAAM,EAAd,OAAuB7C,GAAvB,IAA4BgB,SAAUnC,IAAemB,KAEvDrB,KAKAsE,GAAa,CACjBC,MAAO,CACL,CACE1H,MAAO,cACP8E,QAAS,kBAAM0C,GAAa,KAE9B,CACExH,MAAO,aACP8E,QAAS,kBAAM0C,GAAa,MAGhCG,MAAOL,EACPM,QAASvE,EACTwE,SAAU,kBAAML,GAAcnE,KAS1ByE,GAAiB,SAACC,EAAOjG,GAC7B,IAMMkG,EACJlG,EAAO4B,OAAS,EAAhB,OACST,IADT,UACwB8E,EAAQjG,IARR,SAACiG,GACzB,IAAM3C,EAAS,KAAKnC,GAEpB,cADOmC,EAAO2C,GACP3C,EAMH6C,CAAkBF,GACxBvE,EAAQuB,EAAUlC,EAAemF,EAAYzE,EAAMJ,IACnDD,EAAW8E,IAGPE,GAAoB,CACxB,CACEnG,MAAO,cACP8E,aAAc,CACZpC,IAAK,cACL0D,SAAU,SAACnE,EAAIhC,GAAL,OA1BM,SAACA,GACrB,IAAMgD,EAAYD,EAAUlC,EAAeI,EAASM,EAAMvB,GAC1DoB,EAAepB,GACfwB,EAAQwB,GAuBqBoD,CAAcpG,IACvCA,MAAOmB,IAGX,CACEpB,MAAOsG,mBACPzG,KAAMyG,kBACNlN,GAAIkN,sBACJrG,MAAO,YAAF,OAAcqG,uBACnBxB,aAAc,CACZpC,IAAK,GAAF,OAAK4D,sBAAL,WACHF,SAAU,SAACnE,EAAIlC,GAAL,OACRgG,GAAeO,sBAAwBvG,IACzCE,MAAOiB,EAAQtB,WACf+F,MAAOW,uBAsDPC,GAAsB,CAC1BC,YAAazK,EAAKiB,cAAcC,gBAChCiE,QAnDuB,SAACA,GACxB,IAAMuF,EAAgB9D,OAAO+D,QAAQxF,GACjCyF,EACFzF,GAAWuF,EAAc9E,OAAS,EAC9B8E,EAAcjE,KAAI,SAACoE,GACjB,IAAM3L,EAAWqL,EAAGM,EAAK,IACnBD,EAAQC,EAAK,GAAGpE,KAAI,SAACvC,GAAD,MAAY,CACpCtG,KAAMsB,EAAS8E,OAAOkF,MACpB,SAAClF,GAAD,OAAYA,EAAOE,QAAUiF,OAAOjF,MACpCD,MACFC,YAEF,MAAO,CACLhF,UAAU4L,gBAAW5L,EAASgD,OAC9B0I,QACA7G,SAAU7E,EAAS6E,aAGvB,GAMN,OALAsB,EAAYO,OAAS,GACnBgF,EAAMG,KAAK,CACT7L,SAAU,OACV0L,MAAO,CAAC,CAAEhN,KAAMyH,EAAanB,MAAOmB,MAEjCuF,EA2BEI,CAAiB7F,GAC1B8F,SAzBmB,SAAC/E,EAAIgF,EAAeC,GACnCA,GACFzF,EAAQuB,EAAUlC,EAAe,GAAIU,EAAM,KAC3CL,EAAW,IACXE,EAAe,KAEf4F,EAAczE,KAAI,SAACoE,GACK,SAAlBA,EAAK3L,UACPwG,EAAQuB,EAAUlC,EAAeI,EAASM,EAAM,KAChDH,EAAe,KAEf0E,GACEa,EAAK9G,SACLoB,EAAQ0F,EAAK9G,UAAUuD,QACrB,SAACpD,GAAD,OAAWiF,OAAOjF,KAAWiF,OAAO0B,EAAKD,MAAM,GAAG1G,gBAoB9D,OANAkH,gBAAU,WACR,IAAMC,EAAoBxG,EAC1BG,EAAiBqG,GACjB3F,EAAQuB,EAAUoE,EAAmBlG,EAASM,EAAMJ,MACnD,IAGD,6BACE,kBAACiG,EAAA,EAAD,CACEC,cAAe,CAAE5N,WACjBgM,WAAYA,GACZ6B,aAAc,CAAE5B,MAAOQ,IACvBqB,WACE,kBAAC,aAAD,KACe,IAAZ9F,EAAA,UACMA,EADN,YACiB3F,EAAKiB,cAAcC,mBADpC,UAEMyE,EAFN,YAEiB3F,EAAKiB,cAAcC,qBAGzCsJ,oBAAqBA,KAEtBzF,EAAca,OAAS,EACtB,kBAAC,aAAD,KACE,kBAAC,EAAA8F,MAAD,CACE,aAAY,gCACZ3B,SA1KU,SAAC7D,EAAIX,EAAYY,GAAjB,OAClBT,EACEuB,EACElC,EACAI,EACAM,EAAKgB,KAAI,SAACC,EAAK6C,GAAN,OACPA,IAAUpD,EAAV,OAAuBO,GAAvB,IAA4BgB,SAAUnC,IAAemB,KAEvDrB,KAmKIsG,WAAY1F,EACZR,KAAMA,EACNmC,MAAO/B,EACPZ,OAAQA,EACR2G,cAAc,EACdC,OA3MK,SAAC3F,EAAIqD,EAAOuC,GACzB,IAAMC,EAAgB,CACpB,EAAG,cACH,EAAG,aACH,EAAG,cAECC,EAAO,kBACXjH,EACGkH,SACAD,MAAK,SAACE,EAAWC,GAAZ,OACJD,EAAUH,EAAcxC,IAAU4C,EAAWJ,EAAcxC,IACvD,EACA4C,EAAWJ,EAAcxC,IAAU2C,EAAUH,EAAcxC,KAC1D,EACD,MAEJ6C,EACJN,IAAcO,sBAAsBL,IAASA,IAAOM,UAEtDtH,EAAiBoH,GACjBlH,EAAU,CACRqE,QACAuC,cAEFpG,EAAQuB,EAAUmF,EAA0BjH,EAASM,EAAMJ,KAoLnDlD,QAASoK,uBACTC,gBAAc,GAEd,kBAAC,EAAAC,YAAD,MACA,kBAAC,EAAAC,UAAD,OAEW,IAAZ/G,GACC,kBAAC,EAAAgH,KAAD,KACE,kBAAC,EAAAC,SAAD,KACE,kBAAC,EAAD,CACE1K,MAAOlC,EAAKiB,cAAcC,6BAC1Be,KAAMjC,EAAKiB,cACTC,sCASZ,kBAAC,EAAAyL,KAAD,KACE,kBAAC,EAAAC,SAAD,KACE,kBAAC,EAAD,CACE9K,KAAM+K,KACN9K,UAAU,wBACVG,MAAOlC,EAAKiB,cAAcC,qBAC1Be,KAAMjC,EAAKiB,cAAcC,+BASvC0D,GAAazD,UAAY,CACvB0D,QAASzD,sBAGXwD,GAAanC,aAAe,CAC1BoC,QAAS,IAGX,Y,4BChbaiI,GAAc,SAAC,GAAuB,IAArBC,EAAqB,EAArBA,QAASzL,EAAY,EAAZA,MAC/BtB,GAAOC,SACb,GAA0B6E,cAAS,IAAnC,eAAO8E,EAAP,KAAcoD,EAAd,KACMC,GAAmBC,kBAAY,WACnC9J,QAAQ+J,IAAI,QACZ,IAAMC,EAAS,GACTC,EAAW/L,EAAMgM,IAAIC,MAAM,KAGjCH,EAAOrC,KAAK,CACV7I,MAAO,GAAF,OAAKlC,EAAKiB,cAAcC,kBAAxB,YAAoDmM,EAAS,IAClEG,SAAU,IAAF,OAAMH,EAAS,MAGzBL,EAASI,KACR,CAACpN,EAAMsB,EAAMC,OAAOzB,UAAWwB,EAAMgM,MAMxC,OAJAlC,gBAAU,WACR6B,MACC,CAACA,EAAkB3L,EAAMC,OAAOzB,UAAWwB,EAAMgM,MAGlD,kBAAC,aAAD,KACG1D,EAAMhE,OAAS,GACd,kBAAC6H,GAAA,EAAD,CAAYC,OAAO,UAChB9D,EAAMnD,KAAI,SAACkH,EAAShH,GAAV,OACT,kBAACiH,GAAA,EAAD,CAAgBjH,IAAKA,GAEnB,8BAAOgH,EAAQzL,WAGnB,kBAAC0L,GAAA,EAAD,CAAgBC,UAAQ,GAAEd,MAOpCD,GAAY3L,UAAY,CACtB4L,QAAS3L,WACTE,MAAOF,YC3CT,UAAeC,QAAa,gBAAGC,EAAH,EAAGA,MAAOyL,EAAV,EAAUA,QAAV,OAC1B,kBAACD,GAAD,CAAaC,QAASA,EAASzL,MAAOA,O,uCCKxC,SARgB,kBACd,kBAACqL,GAAA,GAAD,KACE,kBAACC,GAAA,EAAD,KACE,kBAAC,MAAD,SCSC,IAAMkB,GAAU,SAAC,GAAuB,MAArBC,EAAqB,EAArBA,QAASzM,EAAY,EAAZA,MAE/B0M,EAMED,EANFC,QACA9N,EAKE6N,EALF7N,gBACAC,EAIE4N,EAJF5N,UACAC,EAGE2N,EAHF3N,WACA6N,EAEEF,EAFFE,UACA3N,EACEyN,EADFzN,KAGF,OACE,kBAAC,aAAD,KACE,kBAAC4N,EAAA,EAAD,CAAYtM,UAAU,mCACpB,kBAAC,GAAD,CAAamL,QAASzL,EAAMC,OAAOzB,UAAWwB,MAAOA,IACrD,kBAAC,EAAD,OAEF,kBAAC6M,EAAA,EAAD,KACE,kBAAC,aAAD,KACGH,GACC,kBAAC,EAAD,CACE9L,MAAM,+BACND,KAAK,gGACLH,KAAMsM,QAGRlO,GAAmBC,GAAaC,IAAe,kBAAC,GAAD,MAChD6N,GACC,kBAAC,EAAA1N,KAAD,CAAME,WAAS,GACb,kBAAC,EAAAC,SAAD,CAAU2N,KAAM,IACd,kBAAC,GAAD,CAAcxJ,SAASvE,SAAA,UAAAA,EAAMoB,cAAN,eAAcpB,OAAQ,WAU7DwN,GAAQ3M,UAAY,CAClB4M,QAAS3M,sBACTE,MAAOF,uBCjDT,UAAeC,QAAa,YAAe,IAAZC,EAAY,EAAZA,MACvBtB,GAAOC,SACP8N,GAAUO,QAAuBhN,EAAMC,OAAOzB,WAepD,OAbAsL,gBAAU,WACR2C,EAAQQ,YACP,CAACjN,EAAMC,OAAOzB,aAEjBsL,gBAAU,WACR,GAAI9J,EAAMC,OAAOzB,UAAW,CAC1B,IAAM0O,EAAS,GAAH,OAAMlN,EAAMC,OAAOzB,UAAnB,cAAkCE,EAAKiB,cACjDC,aAEFuN,SAASvM,MAAQlC,EAAKiB,cAAcC,gBAAwB,CAAEsN,cAE/D,CAAClN,EAAMC,OAAOzB,YAEV,kBAACgO,GAAD,CAASC,QAASA,EAASzM,MAAOA","file":"js/ClusterDetails.7037f7ddaa4bdbaebe81.js","sourcesContent":["/* eslint-disable max-len */\nimport { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  documentTitle: {\n    id: 'documentTitle',\n    description: 'The title of the page as it appears in the browser tab',\n    defaultMessage: '{subnav} - OCP Advisor | Red Hat Insights',\n  },\n  clusters: {\n    id: 'clusters',\n    description:\n      'Clusters title used in recommendation table column and clusters tab header',\n    defaultMessage: 'Clusters',\n  },\n  added: {\n    id: 'added',\n    description: 'Recommendation table column title',\n    defaultMessage: 'Added',\n  },\n  loading: {\n    id: 'loading',\n    description: 'Loading text',\n    defaultMessage: 'Loading',\n  },\n  lastSeen: {\n    id: 'lastSeen',\n    description:\n      'Used in the cluster table title column, the last time a cluster has checked in',\n    defaultMessage: 'Last seen',\n  },\n  actions: {\n    id: 'actions',\n    description: 'actions',\n    defaultMessage: 'Actions',\n  },\n  name: {\n    id: 'name',\n    description:\n      'Used in the cluster table title column, identifying display name of a cluster',\n    defaultMessage: 'Name',\n  },\n  filterBy: {\n    id: 'filterBy',\n    description: 'Filter by name',\n    defaultMessage: 'Filter by name',\n  },\n  totalRisk: {\n    id: 'totalRisk',\n    description:\n      'Recommendation table column title, recommendationdetails label',\n    defaultMessage: 'Total risk',\n  },\n  recommendation: {\n    id: 'recommendation',\n    description: 'Recommendation',\n    defaultMessage: 'Recommendation',\n  },\n  recommendations: {\n    id: 'recommendations',\n    description: 'Used as a title',\n    defaultMessage: 'Recommendations',\n  },\n  insightsHeader: {\n    id: 'insightsHeader',\n    description: 'Header for the application title',\n    defaultMessage: 'Advisor',\n  },\n  unknown: {\n    id: 'unknown',\n    description: 'Unknown',\n    defaultMessage: 'Unknown',\n  },\n  low: {\n    id: 'low',\n    description: 'Filter value',\n    defaultMessage: 'Low',\n  },\n  moderate: {\n    id: 'moderate',\n    description: 'Filter value',\n    defaultMessage: 'Moderate',\n  },\n  important: {\n    id: 'important',\n    description: 'Filter value',\n    defaultMessage: 'Important',\n  },\n  critical: {\n    id: 'critical',\n    description: 'Filter value',\n    defaultMessage: 'Critical',\n  },\n  veryLow: {\n    id: 'veryLow',\n    description: 'Filter value',\n    defaultMessage: 'Very Low',\n  },\n  medium: {\n    id: 'medium',\n    description: 'Filter value',\n    defaultMessage: 'Medium',\n  },\n  high: {\n    id: 'high',\n    description: 'Filter value',\n    defaultMessage: 'High',\n  },\n  availability: {\n    id: 'availability',\n    description: 'Filter value',\n    defaultMessage: 'Availability',\n  },\n  performance: {\n    id: 'performance',\n    description: 'Filter value',\n    defaultMessage: 'Performance',\n  },\n  stability: {\n    id: 'stability',\n    description: 'Filter value',\n    defaultMessage: 'Stability',\n  },\n  security: {\n    id: 'security',\n    description: 'Filter value',\n    defaultMessage: 'Security',\n  },\n  enabled: {\n    id: 'enabled',\n    description: 'Filter value',\n    defaultMessage: 'Enabled',\n  },\n  impact: {\n    id: 'impact',\n    description: 'Filter title',\n    defaultMessage: 'Impact',\n  },\n  impactLevel: {\n    id: 'impactLevel',\n    description: 'Describes the impact level of a rule',\n    defaultMessage: '{level} impact',\n  },\n  impactDescription: {\n    id: 'impactDescription',\n    description:\n      'Used in the SeverityLine tooltip to describe the impact of a rule',\n    defaultMessage:\n      'The impact of the problem would be {level} if it occurred.',\n  },\n  category: {\n    id: 'category',\n    description: 'Filter title',\n    defaultMessage: 'Category',\n  },\n  likelihood: {\n    id: 'likelihood',\n    description: 'Filter title',\n    defaultMessage: 'Likelihood',\n  },\n  likelihoodLevel: {\n    id: 'likelihoodLevel',\n    description: 'Describes the likelihood of a rule',\n    defaultMessage: '{level} likelihood',\n  },\n  likelihoodDescription: {\n    id: 'likelihoodDescription',\n    description:\n      'Used in the SeverityLine tooltip to describe the likelihood of a rule',\n    defaultMessage: 'The likelihood that this will be a problem is {level}.',\n  },\n  all: {\n    id: 'all',\n    description: 'All',\n    defaultMessage: 'All',\n  },\n  disabled: {\n    id: 'disabled',\n    description: 'Disabled',\n    defaultMessage: 'Disabled',\n  },\n  resetFilters: {\n    id: 'resetFilters',\n    description: 'Filter action, reset all filter chips',\n    defaultMessage: 'Reset filters',\n  },\n  noMatchingRecommendations: {\n    id: 'noMatchingRecommendations',\n    defaultMessage: 'No matching recommendations found',\n  },\n  noMatchingRecommendationsDesc: {\n    id: 'noMatchingRecommendationsDesc',\n    defaultMessage:\n      'This filter criteria matches no recommendations. Try changing your filter settings.',\n  },\n  noRecommendations: {\n    id: 'noRecommendations',\n    description:\n      'Recommendation table, no recommendations message for any known rules, body',\n    defaultMessage:\n      'None of your connected systems are affected by any known recommendations.',\n  },\n  noRecommendationsDesc: {\n    id: 'noRecommendationsDesc',\n    defaultMessage: 'No known recommendations affect this cluster.',\n  },\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n  Grid,\n  GridItem,\n  Stack,\n  StackItem,\n  Title,\n} from '@patternfly/react-core';\nimport { useIntl } from 'react-intl';\nimport Skeleton from '@redhat-cloud-services/frontend-components/Skeleton';\n\nimport messages from '../../Messages';\n\nexport const ClusterHeader = ({ clusterId, lastSeen, displayName }) => {\n  const intl = useIntl();\n  const {\n    isUninitialized,\n    isLoading,\n    isFetching,\n    data: clusterName,\n  } = displayName;\n\n  return (\n    <React.Fragment>\n      <Grid md={12} hasGutter>\n        <GridItem>\n          {isUninitialized || isLoading || isFetching ? (\n            <Skeleton size=\"sm\" />\n          ) : (\n            <Title size=\"2xl\" headingLevel=\"h1\">\n              {clusterName || clusterId}\n            </Title>\n          )}\n        </GridItem>\n        <GridItem>\n          <Stack>\n            <StackItem>\n              <span>UUID: </span>\n              <span>{clusterId || intl.formatMessage(messages.unknown)}</span>\n            </StackItem>\n            <StackItem>\n              <span>{intl.formatMessage(messages.lastSeen)}: </span>\n              <span>{lastSeen || intl.formatMessage(messages.unknown)}</span>\n            </StackItem>\n          </Stack>\n        </GridItem>\n      </Grid>\n    </React.Fragment>\n  );\n};\n\nClusterHeader.propTypes = {\n  clusterId: PropTypes.string.isRequired,\n  displayName: PropTypes.object.isRequired,\n  lastSeen: PropTypes.string,\n};\n","import React from 'react';\nimport { routerParams } from '@redhat-cloud-services/frontend-components-utilities/RouterParams/RouterParams';\n\nimport { useGetClusterDisplayNameByIdQuery } from '../../Services/AccountManagementService';\nimport { useLazyGetClusterByIdQuery } from '../../Services/SmartProxy';\nimport { ClusterHeader } from './ClusterHeader';\n\nexport default routerParams(({ match }) => {\n  const clusterId = match.params.clusterId;\n  const displayName = useGetClusterDisplayNameByIdQuery(clusterId);\n  const { data } = useLazyGetClusterByIdQuery(clusterId);\n\n  return (\n    <ClusterHeader\n      clusterId={clusterId}\n      displayName={displayName}\n      lastSeen={data?.report?.lastSeen}\n    />\n  );\n});\n","import {\n  EmptyState,\n  EmptyStateVariant,\n} from '@patternfly/react-core/dist/js/components/EmptyState/EmptyState';\n\nimport CubesIcon from '@patternfly/react-icons/dist/js/icons/cubes-icon';\nimport { EmptyStateBody } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateBody';\nimport { EmptyStateIcon } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateIcon';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Title } from '@patternfly/react-core/dist/js/components/Title/Title';\n\nconst MessageState = ({\n  className,\n  children,\n  icon,\n  iconClass,\n  iconStyle,\n  text,\n  title,\n  variant,\n}) => (\n  <EmptyState className={className} variant={variant}>\n    {icon !== 'none' && (\n      <EmptyStateIcon className={iconClass} style={iconStyle} icon={icon} />\n    )}\n    <Title headingLevel=\"h5\" size=\"lg\">\n      {title}\n    </Title>\n    <EmptyStateBody style={{ marginBottom: '16px' }}>{text}</EmptyStateBody>\n    {children}\n  </EmptyState>\n);\n\nMessageState.propTypes = {\n  children: PropTypes.any,\n  icon: PropTypes.any,\n  iconClass: PropTypes.any,\n  iconStyle: PropTypes.any,\n  text: PropTypes.any,\n  title: PropTypes.string,\n  variant: PropTypes.any,\n  className: PropTypes.string,\n};\n\nMessageState.defaultProps = {\n  icon: CubesIcon,\n  title: '',\n  variant: EmptyStateVariant.full,\n};\n\nexport default MessageState;\n","import { createIntl, createIntlCache } from 'react-intl';\nimport intlHelper from '@redhat-cloud-services/frontend-components-translations/intlHelper';\n\nimport messages from './Messages';\n\nconst cache = createIntlCache();\nconst locale = navigator.language.slice(0, 2);\nconst intl = createIntl(\n  {\n    // eslint-disable-next-line no-console\n    onError: console.error,\n    locale,\n  },\n  cache\n);\nconst intlSettings = { locale };\n\nexport const LIKELIHOOD_LABEL = {\n  1: intlHelper(intl.formatMessage(messages.low), intlSettings),\n  2: intlHelper(intl.formatMessage(messages.medium), intlSettings),\n  3: intlHelper(intl.formatMessage(messages.high), intlSettings),\n  4: intlHelper(intl.formatMessage(messages.critical), intlSettings),\n};\nexport const IMPACT_LABEL = {\n  1: intlHelper(intl.formatMessage(messages.low), intlSettings),\n  2: intlHelper(intl.formatMessage(messages.medium), intlSettings),\n  3: intlHelper(intl.formatMessage(messages.high), intlSettings),\n  4: intlHelper(intl.formatMessage(messages.critical), intlSettings),\n};\nexport const TOTAL_RISK_LABEL = {\n  1: intlHelper(intl.formatMessage(messages.low), intlSettings),\n  2: intlHelper(intl.formatMessage(messages.moderate), intlSettings),\n  3: intlHelper(intl.formatMessage(messages.important), intlSettings),\n  4: intlHelper(intl.formatMessage(messages.critical), intlSettings),\n};\nexport const RISK_OF_CHANGE_LABEL = {\n  1: intlHelper(intl.formatMessage(messages.veryLow), intlSettings),\n  2: intlHelper(intl.formatMessage(messages.low), intlSettings),\n  3: intlHelper(intl.formatMessage(messages.moderate), intlSettings),\n  4: intlHelper(intl.formatMessage(messages.high), intlSettings),\n};\nexport const FILTER_CATEGORIES = {\n  total_risk: {\n    type: 'checkbox',\n    title: 'total risk',\n    urlParam: 'total_risk',\n    values: [\n      { label: TOTAL_RISK_LABEL[4], value: '4' },\n      { label: TOTAL_RISK_LABEL[3], value: '3' },\n      { label: TOTAL_RISK_LABEL[2], value: '2' },\n      { label: TOTAL_RISK_LABEL[1], value: '1' },\n    ],\n  },\n  res_risk: {\n    type: 'checkbox',\n    title: 'risk of change',\n    urlParam: 'res_risk',\n    values: [\n      { label: RISK_OF_CHANGE_LABEL[4], value: '4' },\n      { label: RISK_OF_CHANGE_LABEL[3], value: '3' },\n      { label: RISK_OF_CHANGE_LABEL[2], value: '2' },\n      { label: RISK_OF_CHANGE_LABEL[1], value: '1' },\n    ],\n  },\n  impact: {\n    type: 'checkbox',\n    title: 'impact',\n    urlParam: 'impact',\n    values: [\n      { label: IMPACT_LABEL[4], value: '4' },\n      { label: IMPACT_LABEL[3], value: '3' },\n      { label: IMPACT_LABEL[2], value: '2' },\n      { label: IMPACT_LABEL[1], value: '1' },\n    ],\n  },\n  likelihood: {\n    type: 'checkbox',\n    title: 'likelihood',\n    urlParam: 'likelihood',\n    values: [\n      { label: LIKELIHOOD_LABEL[4], value: '4' },\n      { label: LIKELIHOOD_LABEL[3], value: '3' },\n      { label: LIKELIHOOD_LABEL[2], value: '2' },\n      { label: LIKELIHOOD_LABEL[1], value: '1' },\n    ],\n  },\n  rule_status: {\n    type: 'radio',\n    title: 'status',\n    urlParam: 'rule_status',\n    values: [\n      {\n        label: intlHelper(intl.formatMessage(messages.all), intlSettings),\n        value: 'all',\n      },\n      {\n        label: intlHelper(intl.formatMessage(messages.enabled), intlSettings),\n        value: 'enabled',\n      },\n      {\n        label: intlHelper(intl.formatMessage(messages.disabled), intlSettings),\n        value: 'disabled',\n      },\n    ],\n  },\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport AsyncComponent from '@redhat-cloud-services/frontend-components/AsyncComponent';\n\n// Rule fields processing: https://docs.google.com/document/d/1D0ZLD6-2DZqBX1cUHJY2vL2QAD0dIAzY3O3xFNlEsVg/edit?usp=sharing\n\nconst ReportDetails = ({ report }) => {\n  return (\n    <div className=\"advisor\">\n      <AsyncComponent\n        appName=\"advisor\"\n        module=\"./AdvisorReportDetails\"\n        // TODO: make API rename `extra_data` to `details` or modify AdvisorReportDetails property\n        report={{\n          ...report,\n          details: report.extra_data,\n          resolution: {\n            resolution: report.resolution,\n          },\n        }}\n      />\n    </div>\n  );\n};\n\nReportDetails.propTypes = {\n  report: PropTypes.object.isRequired,\n};\n\nexport default ReportDetails;\n","import './_ClusterRules.scss';\n\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { CheckIcon } from '@patternfly/react-icons';\nimport DateFormat from '@redhat-cloud-services/frontend-components/DateFormat/DateFormat';\nimport InsightsLabel from '@redhat-cloud-services/frontend-components/InsightsLabel';\nimport {\n  SortByDirection,\n  Table,\n  TableBody,\n  TableHeader,\n  TableVariant,\n  cellWidth,\n  sortable,\n} from '@patternfly/react-table';\nimport {\n  capitalize,\n  Card,\n  CardBody,\n  Tooltip,\n  TooltipPosition,\n} from '@patternfly/react-core';\nimport PrimaryToolbar from '@redhat-cloud-services/frontend-components/PrimaryToolbar';\n\nimport messages from '../../Messages';\nimport MessageState from '../MessageState/MessageState';\nimport {\n  IMPACT_LABEL,\n  LIKELIHOOD_LABEL,\n  FILTER_CATEGORIES as FC,\n} from '../../AppConstants';\nimport ReportDetails from '../ReportDetails/ReportDetails';\n\nconst ClusterRules = ({ reports }) => {\n  const intl = useIntl();\n  const [activeReports, setActiveReports] = useState([]);\n  const [sortBy, setSortBy] = useState({});\n  const [filters, setFilters] = useState({});\n  const [searchValue, setSearchValue] = useState('');\n  const [isSelected, setIsSelected] = useState(false);\n  const [rows, setRows] = useState([]);\n  const results = rows ? rows.length / 2 : 0;\n\n  const cols = [\n    {\n      title: intl.formatMessage(messages.name),\n      transforms: [sortable],\n    },\n    {\n      title: intl.formatMessage(messages.added),\n      transforms: [sortable, cellWidth(15)],\n    },\n    {\n      title: intl.formatMessage(messages.totalRisk),\n      transforms: [sortable, cellWidth(15)],\n    },\n  ];\n\n  const handleOnCollapse = (_e, rowId, isOpen) => {\n    const collapseRows = [...rows];\n    collapseRows[rowId] = { ...collapseRows[rowId], isOpen };\n    setRows(collapseRows);\n  };\n\n  const onKebabClick = (action) => {\n    const isOpen = action === 'insights-expand-all';\n    const allRows = [...rows];\n\n    allRows.map((row, key) => {\n      if (Object.prototype.hasOwnProperty.call(row, 'isOpen')) {\n        row.isOpen = isOpen;\n        isOpen && handleOnCollapse(null, key, isOpen);\n      }\n    });\n\n    setRows(allRows);\n  };\n\n  const actions = [\n    {\n      label: 'Collapse all',\n      onClick: () => onKebabClick('insights-collapse-all'),\n    },\n    {\n      label: 'Expand all',\n      onClick: () => onKebabClick('insights-expand-all'),\n    },\n  ];\n\n  const buildRows = (activeReports, filters, rows, searchValue = '') => {\n    const builtRows = activeReports.flatMap((value, key) => {\n      const rule = value;\n      const resolution = value.resolution;\n      const entity = rows.filter(\n        (rowVal, rowKey) =>\n          rowKey % 2 === 0 && rowVal.rule.rule_id === rule.rule_id && rowVal\n      );\n      const selected = entity.length ? entity[0].selected : false;\n      const isOpen = rows.length\n        ? entity.length\n          ? entity[0].isOpen\n          : false\n        : key === 0\n        ? true\n        : false;\n\n      const reportRow = [\n        {\n          rule,\n          resolution,\n          isOpen,\n          selected,\n          cells: [\n            { title: <div> {rule.description}</div> },\n            {\n              title: (\n                <div key={key}>\n                  <DateFormat\n                    date={rule.created_at}\n                    type=\"relative\"\n                    tooltipProps={{ position: TooltipPosition.bottom }}\n                  />\n                </div>\n              ),\n            },\n            {\n              title: (\n                <div key={key} style={{ verticalAlign: 'top' }}>\n                  <Tooltip\n                    key={key}\n                    position={TooltipPosition.bottom}\n                    content={\n                      // TODO: refine fields lookup\n                      <span>\n                        The <strong>likelihood</strong> that this will be a\n                        problem is{' '}\n                        {rule?.likelihood\n                          ? LIKELIHOOD_LABEL[rule?.likelihood]\n                          : 'unknown'}\n                        . The <strong>impact</strong> of the problem would be{' '}\n                        {rule?.impact ? IMPACT_LABEL[rule?.impact] : 'unknown'}{' '}\n                        if it occurred.\n                      </span>\n                    }\n                  >\n                    <InsightsLabel value={rule.total_risk} />\n                  </Tooltip>\n                </div>\n              ),\n            },\n          ],\n        },\n        {\n          parent: key,\n          fullWidth: true,\n          cells: [\n            {\n              title: <ReportDetails key={`child-${key}`} report={value} />,\n            },\n          ],\n        },\n      ];\n      const isValidSearchValue =\n        searchValue.length === 0 ||\n        rule.description.toLowerCase().includes(searchValue.toLowerCase());\n      const isValidFilterValue =\n        Object.keys(filters).length === 0 ||\n        Object.keys(filters)\n          .map((key) => {\n            const filterValues = filters[key];\n            const rowValue = {\n              created_at: rule.created_at,\n              total_risk: rule.total_risk,\n              tags: rule.tags,\n            };\n            return filterValues.find(\n              (value) => String(value) === String(rowValue[key])\n            );\n          })\n          .every((x) => x);\n\n      return isValidSearchValue && isValidFilterValue ? reportRow : [];\n    });\n    // must recalculate parent for expandable table content whenever the array size changes\n    builtRows.forEach((row, index) =>\n      row.parent ? (row.parent = index - 1) : null\n    );\n\n    return builtRows;\n  };\n\n  const onSort = (_e, index, direction) => {\n    const sortedReports = {\n      2: 'description',\n      3: 'created_at',\n      4: 'total_risk',\n    };\n    const sort = () =>\n      activeReports\n        .concat()\n        .sort((firstItem, secondItem) =>\n          firstItem[sortedReports[index]] > secondItem[sortedReports[index]]\n            ? 1\n            : secondItem[sortedReports[index]] > firstItem[sortedReports[index]]\n            ? -1\n            : 0\n        );\n    const sortedReportsDirectional =\n      direction === SortByDirection.asc ? sort() : sort().reverse();\n\n    setActiveReports(sortedReportsDirectional);\n    setSortBy({\n      index,\n      direction,\n    });\n    setRows(buildRows(sortedReportsDirectional, filters, rows, searchValue));\n  };\n\n  const onRowSelect = (_e, isSelected, rowId) =>\n    setRows(\n      buildRows(\n        activeReports,\n        filters,\n        rows.map((row, index) =>\n          index === rowId ? { ...row, selected: isSelected } : row\n        ),\n        searchValue\n      )\n    );\n\n  const getSelectedItems = (rows) => rows.filter((entity) => entity.selected);\n  const selectedItemsLength = getSelectedItems(rows).length;\n\n  const onBulkSelect = (isSelected) => {\n    setIsSelected(isSelected);\n    setRows(\n      buildRows(\n        activeReports,\n        filters,\n        rows.map((row, index) =>\n          index % 2 === 0 ? { ...row, selected: isSelected } : row\n        ),\n        searchValue\n      )\n    );\n  };\n\n  const bulkSelect = {\n    items: [\n      {\n        title: 'Select none',\n        onClick: () => onBulkSelect(false),\n      },\n      {\n        title: 'Select all',\n        onClick: () => onBulkSelect(true),\n      },\n    ],\n    count: selectedItemsLength,\n    checked: isSelected,\n    onSelect: () => onBulkSelect(!isSelected),\n  };\n\n  const onInputChange = (value) => {\n    const builtRows = buildRows(activeReports, filters, rows, value);\n    setSearchValue(value);\n    setRows(builtRows);\n  };\n\n  const onFilterChange = (param, values) => {\n    const removeFilterParam = (param) => {\n      const filter = { ...filters };\n      delete filter[param];\n      return filter;\n    };\n\n    const newFilters =\n      values.length > 0\n        ? { ...filters, ...{ [param]: values } }\n        : removeFilterParam(param);\n    setRows(buildRows(activeReports, newFilters, rows, searchValue));\n    setFilters(newFilters);\n  };\n\n  const filterConfigItems = [\n    {\n      label: 'description',\n      filterValues: {\n        key: 'text-filter',\n        onChange: (_e, value) => onInputChange(value),\n        value: searchValue,\n      },\n    },\n    {\n      label: FC.total_risk.title,\n      type: FC.total_risk.type,\n      id: FC.total_risk.urlParam,\n      value: `checkbox-${FC.total_risk.urlParam}`,\n      filterValues: {\n        key: `${FC.total_risk.urlParam}-filter`,\n        onChange: (_e, values) =>\n          onFilterChange(FC.total_risk.urlParam, values),\n        value: filters.total_risk,\n        items: FC.total_risk.values,\n      },\n    },\n  ];\n\n  const buildFilterChips = (filters) => {\n    const prunedFilters = Object.entries(filters);\n    let chips =\n      filters && prunedFilters.length > 0\n        ? prunedFilters.map((item) => {\n            const category = FC[item[0]];\n            const chips = item[1].map((value) => ({\n              name: category.values.find(\n                (values) => values.value === String(value)\n              ).label,\n              value,\n            }));\n            return {\n              category: capitalize(category.title),\n              chips,\n              urlParam: category.urlParam,\n            };\n          })\n        : [];\n    searchValue.length > 0 &&\n      chips.push({\n        category: 'Name',\n        chips: [{ name: searchValue, value: searchValue }],\n      });\n    return chips;\n  };\n\n  const onChipDelete = (_e, itemsToRemove, isAll) => {\n    if (isAll) {\n      setRows(buildRows(activeReports, {}, rows, ''));\n      setFilters({});\n      setSearchValue('');\n    } else {\n      itemsToRemove.map((item) => {\n        if (item.category === 'Name') {\n          setRows(buildRows(activeReports, filters, rows, ''));\n          setSearchValue('');\n        } else {\n          onFilterChange(\n            item.urlParam,\n            filters[item.urlParam].filter(\n              (value) => String(value) !== String(item.chips[0].value)\n            )\n          );\n        }\n      });\n    }\n  };\n\n  const activeFiltersConfig = {\n    deleteTitle: intl.formatMessage(messages.resetFilters),\n    filters: buildFilterChips(filters),\n    onDelete: onChipDelete,\n  };\n\n  useEffect(() => {\n    const activeReportsData = reports;\n    setActiveReports(activeReportsData);\n    setRows(buildRows(activeReportsData, filters, rows, searchValue));\n  }, []);\n\n  return (\n    <div>\n      <PrimaryToolbar\n        actionsConfig={{ actions }}\n        bulkSelect={bulkSelect}\n        filterConfig={{ items: filterConfigItems }}\n        pagination={\n          <React.Fragment>\n            {results === 1\n              ? `${results} ${intl.formatMessage(messages.recommendation)}`\n              : `${results} ${intl.formatMessage(messages.recommendations)}`}\n          </React.Fragment>\n        }\n        activeFiltersConfig={activeFiltersConfig}\n      />\n      {activeReports.length > 0 ? (\n        <React.Fragment>\n          <Table\n            aria-label={'Cluster recommendations table'}\n            onSelect={onRowSelect}\n            onCollapse={handleOnCollapse}\n            rows={rows}\n            cells={cols}\n            sortBy={sortBy}\n            canSelectAll={false}\n            onSort={onSort}\n            variant={TableVariant.compact}\n            isStickyHeader\n          >\n            <TableHeader />\n            <TableBody />\n          </Table>\n          {results === 0 && (\n            <Card>\n              <CardBody>\n                <MessageState\n                  title={intl.formatMessage(messages.noMatchingRecommendations)}\n                  text={intl.formatMessage(\n                    messages.noMatchingRecommendationsDesc\n                  )}\n                />\n              </CardBody>\n            </Card>\n          )}\n        </React.Fragment>\n      ) : (\n        // ? Welcome to Insights feature for novice clusters with disabled Insights?\n        <Card>\n          <CardBody>\n            <MessageState\n              icon={CheckIcon}\n              iconClass=\"ins-c-insights__check\"\n              title={intl.formatMessage(messages.noRecommendations)}\n              text={intl.formatMessage(messages.noRecommendationsDesc)}\n            />\n          </CardBody>\n        </Card>\n      )}\n    </div>\n  );\n};\n\nClusterRules.propTypes = {\n  reports: PropTypes.array.isRequired,\n};\n\nClusterRules.defaultProps = {\n  reports: [],\n};\n\nexport default ClusterRules;\n","import React, { useCallback, useEffect, useState } from 'react';\n\nimport { Breadcrumb } from '@patternfly/react-core/dist/js/components/Breadcrumb/Breadcrumb';\nimport { BreadcrumbItem } from '@patternfly/react-core/dist/js/components/Breadcrumb/BreadcrumbItem';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport messages from '../../Messages';\n\nexport const Breadcrumbs = ({ current, match }) => {\n  const intl = useIntl();\n  const [items, setItems] = useState([]);\n  const buildBreadcrumbs = useCallback(() => {\n    console.log('meow');\n    const crumbs = [];\n    const splitUrl = match.url.split('/');\n\n    // add base\n    crumbs.push({\n      title: `${intl.formatMessage(messages.insightsHeader)} ${splitUrl[1]}`,\n      navigate: `/${splitUrl[1]}`,\n    });\n\n    setItems(crumbs);\n  }, [intl, match.params.clusterId, match.url]);\n\n  useEffect(() => {\n    buildBreadcrumbs();\n  }, [buildBreadcrumbs, match.params.clusterId, match.url]);\n\n  return (\n    <React.Fragment>\n      {items.length > 0 && (\n        <Breadcrumb ouiaId=\"detail\">\n          {items.map((oneLink, key) => (\n            <BreadcrumbItem key={key}>\n              {/*<Link to={oneLink.navigate}>{oneLink.title}</Link>*/}\n              <span>{oneLink.title}</span>\n            </BreadcrumbItem>\n          ))}\n          <BreadcrumbItem isActive>{current}</BreadcrumbItem>\n        </Breadcrumb>\n      )}\n    </React.Fragment>\n  );\n};\n\nBreadcrumbs.propTypes = {\n  current: PropTypes.string,\n  match: PropTypes.object,\n};\n","import React from 'react';\n\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/RouterParams';\n\nimport { Breadcrumbs } from './Breadcrumbs';\n\nexport default routerParams(({ match, current }) => (\n  <Breadcrumbs current={current} match={match} />\n));\n","import { Card } from '@patternfly/react-core/dist/js/components/Card/Card';\nimport { CardBody } from '@patternfly/react-core/dist/js/components/Card/CardBody';\nimport { List } from 'react-content-loader';\nimport React from 'react';\nconst Loading = () => (\n  <Card>\n    <CardBody>\n      <List />\n    </CardBody>\n  </Card>\n);\n\nexport default Loading;\n","import './_Cluster.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Grid, GridItem } from '@patternfly/react-core';\n\nimport { SearchIcon } from '@patternfly/react-icons';\nimport PageHeader from '@redhat-cloud-services/frontend-components/PageHeader';\nimport Main from '@redhat-cloud-services/frontend-components/Main';\n\nimport ClusterHeader from '../ClusterHeader';\nimport ClusterRules from '../ClusterRules/ClusterRules';\nimport Breadcrumbs from '../Breadcrumbs';\nimport MessageState from '../MessageState/MessageState';\nimport Loading from '../Loading/Loading';\n\nexport const Cluster = ({ cluster, match }) => {\n  const {\n    isError,\n    isUninitialized,\n    isLoading,\n    isFetching,\n    isSuccess,\n    data,\n  } = cluster;\n\n  return (\n    <React.Fragment>\n      <PageHeader className=\"pf-m-light ins-inventory-detail\">\n        <Breadcrumbs current={match.params.clusterId} match={match} />\n        <ClusterHeader />\n      </PageHeader>\n      <Main>\n        <React.Fragment>\n          {isError && (\n            <MessageState\n              title=\"No recommendations available\"\n              text=\"There was an error fetching recommendations for this cluster. Refresh your page to try again.\"\n              icon={SearchIcon}\n            />\n          )}\n          {(isUninitialized || isLoading || isFetching) && <Loading />}\n          {isSuccess && (\n            <Grid hasGutter>\n              <GridItem span={12}>\n                <ClusterRules reports={data?.report?.data || []} />\n              </GridItem>\n            </Grid>\n          )}\n        </React.Fragment>\n      </Main>\n    </React.Fragment>\n  );\n};\n\nCluster.propTypes = {\n  cluster: PropTypes.object.isRequired,\n  match: PropTypes.object.isRequired,\n};\n","import React, { useEffect } from 'react';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/RouterParams';\nimport { useIntl } from 'react-intl';\n\nimport { useGetClusterByIdQuery } from '../../Services/SmartProxy';\nimport messages from '../../Messages';\nimport { Cluster } from './Cluster';\n\nexport default routerParams(({ match }) => {\n  const intl = useIntl();\n  const cluster = useGetClusterByIdQuery(match.params.clusterId);\n\n  useEffect(() => {\n    cluster.refetch();\n  }, [match.params.clusterId]);\n\n  useEffect(() => {\n    if (match.params.clusterId) {\n      const subnav = `${match.params.clusterId} - ${intl.formatMessage(\n        messages.clusters\n      )}`;\n      document.title = intl.formatMessage(messages.documentTitle, { subnav });\n    }\n  }, [match.params.clusterId]);\n\n  return <Cluster cluster={cluster} match={match} />;\n});\n"],"sourceRoot":""}