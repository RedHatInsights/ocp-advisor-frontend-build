{"version":3,"file":"js/ClusterDetails.dff966302e2f87ac266b.js","mappings":"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","sources":["webpack:///./src/Components/ClusterHeader/ClusterHeader.js","webpack:///./src/Components/ClusterHeader/index.js","webpack:///./src/Components/ReportDetails/ReportDetails.js","webpack:///./src/Components/ClusterRules/ClusterRules.js","webpack:///./src/Components/Cluster/Cluster.js","webpack:///./src/Components/Cluster/index.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport { Grid, GridItem } from '@patternfly/react-core/dist/js/layouts/Grid';\nimport { Stack, StackItem } from '@patternfly/react-core/dist/js/layouts/Stack';\nimport { Title } from '@patternfly/react-core/dist/js/components/Title';\nimport Skeleton from '@redhat-cloud-services/frontend-components/Skeleton';\nimport DateFormat from '@redhat-cloud-services/frontend-components/DateFormat/DateFormat';\n\nimport messages from '../../Messages';\nimport { OneLineLoader } from '../../Utilities/Loaders';\n\nexport const ClusterHeader = ({ clusterId, clusterData, displayName }) => {\n  const intl = useIntl();\n  const {\n    isUninitialized: isUninitializedDisplayName,\n    isFetching: isFetchingDisplayName,\n    data: clusterName,\n  } = displayName;\n\n  // subscribe to the cluster data query\n  const {\n    isUninitialized: isUninitializedCluster,\n    isFetching: isFetchingCluster,\n    data: cluster,\n  } = clusterData;\n\n  return (\n    <Grid id=\"cluster-header\" md={12} hasGutter>\n      <GridItem>\n        {isUninitializedDisplayName || isFetchingDisplayName ? (\n          <Skeleton size=\"sm\" />\n        ) : (\n          <Title\n            size=\"2xl\"\n            headingLevel=\"h1\"\n            id=\"cluster-header-title\"\n            ouiaId=\"cluster-name\"\n          >\n            {clusterName || clusterId}\n          </Title>\n        )}\n      </GridItem>\n      <GridItem>\n        <Stack>\n          <StackItem id=\"cluster-header-uuid\">\n            <span>UUID: </span>\n            <span>{clusterId || intl.formatMessage(messages.unknown)}</span>\n          </StackItem>\n          <StackItem id=\"cluster-header-last-seen\">\n            <span>{intl.formatMessage(messages.lastSeen)}: </span>\n            <span>\n              {isUninitializedCluster || isFetchingCluster ? (\n                <OneLineLoader />\n              ) : cluster?.report?.meta?.last_checked_at ? (\n                <DateFormat\n                  date={cluster?.report?.meta?.last_checked_at}\n                  type=\"exact\"\n                />\n              ) : (\n                intl.formatMessage(messages.unknown)\n              )}\n            </span>\n          </StackItem>\n        </Stack>\n      </GridItem>\n    </Grid>\n  );\n};\n\nClusterHeader.propTypes = {\n  clusterId: PropTypes.string.isRequired,\n  displayName: PropTypes.object.isRequired,\n  clusterData: PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport { routerParams } from '@redhat-cloud-services/frontend-components-utilities/RouterParams/RouterParams';\n\nimport { useGetClusterDisplayNameByIdQuery } from '../../Services/AccountManagementService';\nimport { useGetClusterByIdQuery } from '../../Services/SmartProxy';\nimport { ClusterHeader } from './ClusterHeader';\n\nexport default routerParams(({ match }) => {\n  const clusterId = match.params.clusterId;\n  const displayName = useGetClusterDisplayNameByIdQuery(clusterId);\n  const clusterData = useGetClusterByIdQuery({\n    id: clusterId,\n    includeDisabled: false,\n  });\n\n  return (\n    <ClusterHeader\n      clusterId={clusterId}\n      displayName={displayName}\n      clusterData={clusterData}\n    />\n  );\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport AsyncComponent from '@redhat-cloud-services/frontend-components/AsyncComponent';\n\nimport Loading from '../Loading/Loading';\n\n// Rule fields processing: https://docs.google.com/document/d/1D0ZLD6-2DZqBX1cUHJY2vL2QAD0dIAzY3O3xFNlEsVg/edit?usp=sharing\n\nconst ReportDetails = ({ report }) => {\n  return (\n    <div className=\"advisor\">\n      <AsyncComponent\n        appName=\"advisor\"\n        module=\"./AdvisorReportDetails\"\n        fallback={<Loading />}\n        // TODO: make API rename `extra_data` to `details` or modify AdvisorReportDetails property\n        report={{\n          ...report,\n          details: report.extra_data,\n          resolution: {\n            resolution: report.resolution,\n          },\n        }}\n      />\n    </div>\n  );\n};\n\nReportDetails.propTypes = {\n  report: PropTypes.object.isRequired,\n};\n\nexport default ReportDetails;\n","import './_ClusterRules.scss';\n\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { useLocation } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport capitalize from 'lodash/capitalize';\n\nimport CheckIcon from '@patternfly/react-icons/dist/js/icons/check-icon';\nimport DateFormat from '@redhat-cloud-services/frontend-components/DateFormat/DateFormat';\nimport InsightsLabel from '@redhat-cloud-services/frontend-components/InsightsLabel';\nimport {\n  SortByDirection,\n  Table,\n  TableBody,\n  TableHeader,\n  TableVariant,\n} from '@patternfly/react-table';\nimport { Card, CardBody } from '@patternfly/react-core/dist/js/components/Card';\nimport {\n  Tooltip,\n  TooltipPosition,\n} from '@patternfly/react-core/dist/js/components/Tooltip';\nimport PrimaryToolbar from '@redhat-cloud-services/frontend-components/PrimaryToolbar';\n\nimport messages from '../../Messages';\nimport MessageState from '../MessageState/MessageState';\nimport {\n  IMPACT_LABEL,\n  LIKELIHOOD_LABEL,\n  FILTER_CATEGORIES as FC,\n  CLUSTER_RULES_COLUMNS_KEYS,\n  FILTER_CATEGORIES,\n  CLUSTER_RULES_COLUMNS,\n} from '../../AppConstants';\nimport ReportDetails from '../ReportDetails/ReportDetails';\nimport RuleLabels from '../Labels/RuleLabels';\nimport { NoMatchingRecs } from '../MessageState/EmptyStates';\nimport {\n  paramParser,\n  passFilters,\n  translateSortParams,\n} from '../Common/Tables';\nimport {\n  CLUSTER_RULES_INITIAL_STATE,\n  updateClusterRulesFilters,\n} from '../../Services/Filters';\n\nconst ClusterRules = ({ reports }) => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const updateFilters = (filters) =>\n    dispatch(updateClusterRulesFilters(filters));\n  const filters = useSelector(({ filters }) => filters.clusterRulesState);\n\n  const [filteredRows, setFilteredRows] = useState([]);\n  const [displayedRows, setDisplayedRows] = useState([]);\n  const [isAllExpanded, setIsAllExpanded] = useState(false);\n  const results = filteredRows.length;\n  const { search } = useLocation();\n\n  useEffect(() => {\n    setDisplayedRows(\n      buildDisplayedRows(filteredRows, filters.sortIndex, filters.sortDirection)\n    );\n  }, [\n    filteredRows,\n    filters.limit,\n    filters.offset,\n    filters.sortIndex,\n    filters.sortDirection,\n  ]);\n\n  useEffect(() => {\n    setFilteredRows(buildFilteredRows(reports, filters));\n  }, [reports, filters]);\n\n  useEffect(() => {\n    if (search) {\n      const paramsObject = paramParser(search);\n      if (paramsObject.sort) {\n        const sortObj = translateSortParams(paramsObject.sort[0]);\n        paramsObject.sortIndex = CLUSTER_RULES_COLUMNS_KEYS.indexOf(\n          sortObj.name\n        );\n        paramsObject.sortDirection = sortObj.direction;\n      }\n      updateFilters({ ...filters, ...paramsObject });\n    }\n  }, []);\n\n  const handleOnCollapse = (_e, rowId, isOpen) => {\n    const collapseRows = [...displayedRows];\n    collapseRows[rowId] = { ...collapseRows[rowId], isOpen };\n    setDisplayedRows(collapseRows);\n  };\n\n  const buildFilteredRows = (allRows, filters) =>\n    allRows\n      .filter((rule) => passFilters(rule, filters))\n      .map((value, key) => [\n        {\n          rule: value,\n          isOpen: isAllExpanded,\n          cells: [\n            {\n              title: (\n                <div>\n                  {value?.description || value?.rule_id}{' '}\n                  <RuleLabels rule={value} />\n                </div>\n              ),\n            },\n            {\n              title: (\n                <div key={key}>\n                  <DateFormat\n                    date={value.created_at}\n                    type=\"relative\"\n                    tooltipProps={{ position: TooltipPosition.bottom }}\n                  />\n                </div>\n              ),\n            },\n            {\n              title: (\n                <div key={key} style={{ verticalAlign: 'top' }}>\n                  {value?.likelihood && value?.impact ? (\n                    <Tooltip\n                      key={key}\n                      position={TooltipPosition.bottom}\n                      content={\n                        // TODO: refine fields lookup\n                        <span>\n                          The <strong>likelihood</strong> that this will be a\n                          problem is{' '}\n                          {value.likelihood\n                            ? LIKELIHOOD_LABEL[value.likelihood]\n                            : 'unknown'}\n                          .The <strong>impact</strong> of the problem would be{' '}\n                          {value.impact\n                            ? IMPACT_LABEL[value.impact]\n                            : 'unknown'}{' '}\n                          if it occurred.\n                        </span>\n                      }\n                    >\n                      <InsightsLabel value={value.total_risk} />\n                    </Tooltip>\n                  ) : (\n                    <InsightsLabel value={value.total_risk} />\n                  )}\n                </div>\n              ),\n            },\n          ],\n        },\n        {\n          fullWidth: true,\n          cells: [\n            {\n              title: <ReportDetails key={`child-${key}`} report={value} />,\n            },\n          ],\n        },\n      ]);\n\n  const buildDisplayedRows = (rows, index, direction) => {\n    const sortingRows = [...rows].sort((firstItem, secondItem) => {\n      const fst = firstItem[0].rule[CLUSTER_RULES_COLUMNS_KEYS[index - 1]];\n      const snd = secondItem[0].rule[CLUSTER_RULES_COLUMNS_KEYS[index - 1]];\n      return fst > snd ? 1 : snd > fst ? -1 : 0;\n    });\n    if (direction === SortByDirection.desc) {\n      sortingRows.reverse();\n    }\n    return sortingRows.flatMap((row, index) => {\n      const updatedRow = [...row];\n      row[1].parent = index * 2;\n      return updatedRow;\n    });\n  };\n\n  const onSort = (_e, index, direction) =>\n    updateFilters({ ...filters, sortIndex: index, sortDirection: direction });\n\n  const removeFilterParam = (param) => {\n    const filter = { ...filters, offset: 0 };\n    delete filter[param];\n    updateFilters({ ...filter, ...(param === 'text' ? { text: '' } : {}) });\n  };\n\n  // TODO: update URL when filters changed\n  const addFilterParam = (param, values) =>\n    values.length > 0\n      ? updateFilters({ ...filters, offset: 0, ...{ [param]: values } })\n      : removeFilterParam(param);\n\n  const filterConfigItems = [\n    {\n      label: 'description',\n      filterValues: {\n        key: 'text-filter',\n        onChange: (_e, value) => addFilterParam('text', value),\n        value: filters.text,\n      },\n    },\n    {\n      label: FC.total_risk.title,\n      type: FC.total_risk.type,\n      id: FC.total_risk.urlParam,\n      value: `checkbox-${FC.total_risk.urlParam}`,\n      filterValues: {\n        key: `${FC.total_risk.urlParam}-filter`,\n        onChange: (_e, values) =>\n          addFilterParam(FILTER_CATEGORIES.total_risk.urlParam, values),\n        value: filters.total_risk,\n        items: FC.total_risk.values,\n      },\n    },\n    {\n      label: FC.category.title,\n      type: FC.category.type,\n      id: FC.category.urlParam,\n      value: `checkbox-${FC.category.urlParam}`,\n      filterValues: {\n        key: `${FC.category.urlParam}-filter`,\n        onChange: (_e, values) =>\n          addFilterParam(FILTER_CATEGORIES.category.urlParam, values),\n        value: filters.category,\n        items: FC.category.values,\n      },\n    },\n  ];\n\n  const pruneFilters = (localFilters, filterCategories) => {\n    const prunedFilters = Object.entries(localFilters);\n    return prunedFilters.length > 0\n      ? prunedFilters.reduce((arr, item) => {\n          if (filterCategories[item[0]]) {\n            const category = filterCategories[item[0]];\n            const chips = Array.isArray(item[1])\n              ? item[1].map((value) => {\n                  const selectedCategoryValue = category.values.find(\n                    (values) => values.value === String(value)\n                  );\n                  return selectedCategoryValue\n                    ? {\n                        name:\n                          selectedCategoryValue.text ||\n                          selectedCategoryValue.label,\n                        value,\n                      }\n                    : { name: value, value };\n                })\n              : [\n                  {\n                    name: category.values.find(\n                      (values) => values.value === String(item[1])\n                    ).label,\n                    value: item[1],\n                  },\n                ];\n            return [\n              ...arr,\n              {\n                category: capitalize(category.title),\n                chips,\n                urlParam: category.urlParam,\n              },\n            ];\n          } else if (item[0] === 'text') {\n            return [\n              ...arr,\n              ...(item[1].length > 0\n                ? [\n                    {\n                      category: 'Name',\n                      chips: [{ name: item[1], value: item[1] }],\n                      urlParam: item[0],\n                    },\n                  ]\n                : []),\n            ];\n          } else {\n            return arr;\n          }\n        }, [])\n      : [];\n  };\n\n  const buildFilterChips = () => {\n    const localFilters = { ...filters };\n    delete localFilters.sortIndex;\n    delete localFilters.sortDirection;\n    delete localFilters.offset;\n    delete localFilters.limit;\n    return pruneFilters(localFilters, FILTER_CATEGORIES);\n  };\n\n  const activeFiltersConfig = {\n    deleteTitle: intl.formatMessage(messages.resetFilters),\n    filters: buildFilterChips(),\n    onDelete: (_event, itemsToRemove, isAll) => {\n      if (isAll) {\n        updateFilters(CLUSTER_RULES_INITIAL_STATE);\n      } else {\n        itemsToRemove.map((item) => {\n          const newFilter = {\n            [item.urlParam]: Array.isArray(filters[item.urlParam])\n              ? filters[item.urlParam].filter(\n                  (value) => String(value) !== String(item.chips[0].value)\n                )\n              : '',\n          };\n          newFilter[item.urlParam].length > 0\n            ? updateFilters({ ...filters, ...newFilter })\n            : removeFilterParam(item.urlParam);\n        });\n      }\n    },\n  };\n\n  //Responsible for the handling collapse for all the recommendations\n  //Used in the PrimaryToolbar\n  const collapseAll = (_e, isOpen) => {\n    setIsAllExpanded(isOpen);\n    setDisplayedRows(\n      displayedRows.map((row) => {\n        return {\n          ...row,\n          isOpen: isOpen,\n        };\n      })\n    );\n  };\n\n  return (\n    <div id=\"cluster-recs-list-table\">\n      <PrimaryToolbar\n        expandAll={{ isAllExpanded, onClick: collapseAll }}\n        filterConfig={{\n          items: filterConfigItems,\n          isDisabled: filteredRows.length === 0,\n        }}\n        pagination={\n          <React.Fragment>\n            {results === 1\n              ? `${results} ${intl.formatMessage(messages.recommendation)}`\n              : `${results} ${intl.formatMessage(messages.recommendations)}`}\n          </React.Fragment>\n        }\n        activeFiltersConfig={\n          filteredRows.length === 0 ? undefined : activeFiltersConfig\n        }\n      />\n      {filteredRows.length > 0 ? (\n        <React.Fragment>\n          <Table\n            aria-label={'Cluster recommendations table'}\n            ouiaId=\"recommendations\"\n            onCollapse={handleOnCollapse}\n            rows={displayedRows}\n            cells={CLUSTER_RULES_COLUMNS}\n            sortBy={{\n              index: filters.sortIndex,\n              direction: filters.sortDirection,\n            }}\n            onSort={onSort}\n            variant={TableVariant.compact}\n            isStickyHeader\n          >\n            <TableHeader />\n            <TableBody />\n          </Table>\n          {results === 0 && (\n            <Card ouiaId=\"empty-state\">\n              <CardBody>\n                <NoMatchingRecs />\n              </CardBody>\n            </Card>\n          )}\n        </React.Fragment>\n      ) : (\n        // ? Welcome to Insights feature for novice clusters with disabled Insights?\n        <Card ouiaId=\"no-recommendations\">\n          <CardBody>\n            <MessageState\n              icon={CheckIcon}\n              iconClass=\"ins-c-insights__check\"\n              title={intl.formatMessage(messages.noRecommendations)}\n              text={intl.formatMessage(messages.noRecommendationsDesc)}\n            />\n          </CardBody>\n        </Card>\n      )}\n    </div>\n  );\n};\n\nClusterRules.propTypes = {\n  reports: PropTypes.array.isRequired,\n};\n\nClusterRules.defaultProps = {\n  reports: [],\n};\n\nexport default ClusterRules;\n","import './_Cluster.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport { Grid, GridItem } from '@patternfly/react-core/dist/js/layouts/Grid';\nimport ExclamationCircleIcon from '@patternfly/react-icons/dist/js/icons/exclamation-circle-icon';\nimport InfoCircleIcon from '@patternfly/react-icons/dist/js/icons/info-circle-icon';\nimport PageHeader from '@redhat-cloud-services/frontend-components/PageHeader';\nimport Main from '@redhat-cloud-services/frontend-components/Main';\nimport { global_danger_color_100 as globalDangerColor100 } from '@patternfly/react-tokens/dist/js/global_danger_color_100';\nimport { global_info_color_100 as globalInfoColor100 } from '@patternfly/react-tokens/dist/js/global_info_color_100.js';\n\nimport ClusterHeader from '../ClusterHeader';\nimport ClusterRules from '../ClusterRules/ClusterRules';\nimport Breadcrumbs from '../Breadcrumbs';\nimport MessageState from '../MessageState/MessageState';\nimport Loading from '../Loading/Loading';\nimport messages from '../../Messages';\n\nexport const Cluster = ({ cluster, displayName, match }) => {\n  const intl = useIntl();\n  const {\n    isError,\n    isUninitialized,\n    isLoading,\n    isFetching,\n    isSuccess,\n    data,\n    error,\n  } = cluster;\n  const { data: clusterDisplayName } = displayName;\n\n  return (\n    <React.Fragment>\n      <PageHeader className=\"pf-m-light ins-inventory-detail\">\n        <Breadcrumbs\n          current={clusterDisplayName || match.params.clusterId}\n          match={match}\n        />\n        <ClusterHeader />\n      </PageHeader>\n      {(isUninitialized || isLoading || isFetching) && (\n        <Main id=\"loading-skeleton\">\n          <Loading />\n        </Main>\n      )}\n      {isError &&\n        (error?.status === 404 ? (\n          <Main>\n            <MessageState\n              title={intl.formatMessage(messages.noRecsFoundError)}\n              text={\n                <React.Fragment>\n                  {intl.formatMessage(messages.noRecsFoundErrorDesc)}\n                  <a href=\"https://docs.openshift.com/container-platform/latest/support/getting-support.html\">\n                    {' '}\n                    OpenShift documentation.\n                  </a>\n                </React.Fragment>\n              }\n              icon={InfoCircleIcon}\n              iconStyle={{ color: globalInfoColor100.value }}\n              variant=\"large\"\n            />\n          </Main>\n        ) : (\n          <Main>\n            <MessageState\n              title={intl.formatMessage(messages.noRecsError)}\n              text={intl.formatMessage(messages.noRecsErrorDesc)}\n              icon={ExclamationCircleIcon}\n              iconStyle={{ color: globalDangerColor100.value }}\n            />\n          </Main>\n        ))}\n      {isSuccess && (\n        <React.Fragment>\n          <Main>\n            <React.Fragment>\n              <Grid hasGutter>\n                <GridItem span={12}>\n                  <ClusterRules reports={data?.report?.data || []} />\n                </GridItem>\n              </Grid>\n            </React.Fragment>\n          </Main>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n};\n\nCluster.propTypes = {\n  cluster: PropTypes.object.isRequired,\n  displayName: PropTypes.object.isRequired,\n  match: PropTypes.object.isRequired,\n};\n","import React, { useEffect } from 'react';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/RouterParams';\nimport { useIntl } from 'react-intl';\n\nimport { useGetClusterByIdQuery } from '../../Services/SmartProxy';\nimport messages from '../../Messages';\nimport { Cluster } from './Cluster';\nimport { useGetClusterDisplayNameByIdQuery } from '../../Services/AccountManagementService';\n\nexport default routerParams(({ match }) => {\n  const intl = useIntl();\n  const cluster = useGetClusterByIdQuery({\n    id: match.params.clusterId,\n    includeDisabled: false,\n  });\n  const displayName = useGetClusterDisplayNameByIdQuery(match.params.clusterId);\n\n  useEffect(() => {\n    cluster.refetch();\n  }, [match.params.clusterId]);\n\n  useEffect(() => {\n    if (match.params.clusterId) {\n      const subnav = `${match.params.clusterId} - ${intl.formatMessage(\n        messages.clusters\n      )}`;\n      document.title = intl.formatMessage(messages.documentTitle, { subnav });\n    }\n  }, [match.params.clusterId]);\n\n  return <Cluster cluster={cluster} displayName={displayName} match={match} />;\n});\n"],"names":["ClusterHeader","clusterId","clusterData","displayName","intl","useIntl","isUninitializedDisplayName","isUninitialized","isFetchingDisplayName","isFetching","clusterName","data","isUninitializedCluster","isFetchingCluster","cluster","Grid","id","md","hasGutter","GridItem","Skeleton","size","Title","headingLevel","ouiaId","Stack","StackItem","formatMessage","messages","report","meta","last_checked_at","DateFormat","date","type","propTypes","PropTypes","routerParams","match","params","useGetClusterDisplayNameByIdQuery","useGetClusterByIdQuery","includeDisabled","ReportDetails","className","AsyncComponent","appName","module","fallback","Loading","details","extra_data","resolution","ClusterRules","reports","dispatch","useDispatch","updateFilters","filters","updateClusterRulesFilters","useSelector","clusterRulesState","useState","filteredRows","setFilteredRows","displayedRows","setDisplayedRows","isAllExpanded","setIsAllExpanded","results","length","search","useLocation","useEffect","buildDisplayedRows","sortIndex","sortDirection","limit","offset","buildFilteredRows","paramsObject","paramParser","sort","sortObj","translateSortParams","CLUSTER_RULES_COLUMNS_KEYS","name","direction","localFilters","allRows","filter","rule","passFilters","map","value","key","isOpen","cells","title","description","rule_id","RuleLabels","created_at","tooltipProps","position","TooltipPosition","style","verticalAlign","likelihood","impact","Tooltip","content","LIKELIHOOD_LABEL","IMPACT_LABEL","InsightsLabel","total_risk","fullWidth","rows","index","sortingRows","firstItem","secondItem","fst","snd","SortByDirection","reverse","flatMap","row","updatedRow","parent","removeFilterParam","param","text","addFilterParam","values","filterConfigItems","label","filterValues","onChange","_e","FC","FILTER_CATEGORIES","items","category","activeFiltersConfig","deleteTitle","filterCategories","prunedFilters","Object","entries","reduce","arr","item","chips","Array","isArray","selectedCategoryValue","find","String","capitalize","urlParam","pruneFilters","onDelete","_event","itemsToRemove","isAll","CLUSTER_RULES_INITIAL_STATE","newFilter","PrimaryToolbar","expandAll","onClick","filterConfig","isDisabled","pagination","undefined","Table","onCollapse","rowId","collapseRows","CLUSTER_RULES_COLUMNS","sortBy","onSort","variant","TableVariant","isStickyHeader","TableHeader","TableBody","Card","CardBody","MessageState","icon","CheckIcon","iconClass","defaultProps","Cluster","isError","isLoading","isSuccess","error","clusterDisplayName","PageHeader","Breadcrumbs","current","Main","status","href","InfoCircleIcon","iconStyle","color","globalInfoColor100","ExclamationCircleIcon","globalDangerColor100","span","refetch","subnav","document"],"sourceRoot":""}