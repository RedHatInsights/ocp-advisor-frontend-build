{"version":3,"file":"js/WorkloadsList.10e35020b931095c7288.js","mappings":"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","sources":["webpack:///./src/Components/Loading/Loading.js","webpack:///./src/Components/WorkloadsListTable/WorkloadsListTable.js","webpack:///./src/Components/WorkloadsListTable/index.js","webpack:///./src/Components/WorkloadsList/index.js"],"sourcesContent":["import React from 'react';\nimport { Card, CardBody } from '@patternfly/react-core';\nimport { List } from 'react-content-loader';\n\nconst Loading = () => (\n  <Card ouiaId=\"loading-skeleton\">\n    <CardBody>\n      <List />\n    </CardBody>\n  </Card>\n);\n\nexport default Loading;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport PrimaryToolbar from '@redhat-cloud-services/frontend-components/PrimaryToolbar';\nimport { TableVariant } from '@patternfly/react-table';\nimport {\n  Table,\n  TableBody,\n  TableHeader,\n} from '@patternfly/react-table/deprecated';\nimport { PaginationVariant } from '@patternfly/react-core/dist/js/components/Pagination/Pagination';\nimport {\n  WORKLOADS_LIST_COLUMNS,\n  WORKLOADS_LIST_COLUMNS_KEYS,\n  WORKLOADS_TABLE_CELL_LAST_SEEN,\n  WORKLOADS_TABLE_CELL_NAME,\n  WORKLOADS_TABLE_CELL_OBJECTS,\n  WORKLOADS_TABLE_CELL_RECOMMENDATIONS,\n  WORKLOADS_TABLE_FILTER_CATEGORIES,\n  WORKLOADS_TABLE_SEVERITY,\n} from '../../AppConstants';\nimport DateFormat from '@redhat-cloud-services/frontend-components/DateFormat';\nimport { Link, useLocation } from 'react-router-dom';\nimport { BASE_PATH } from '../../Routes';\nimport { Pagination } from '@patternfly/react-core';\n/* import { conditionalFilterType } from '@redhat-cloud-services/frontend-components/ConditionalFilter/conditionalFilterConstants'; */\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  WORKLOADS_TABLE_INITIAL_STATE,\n  resetFilters,\n  updateWorkloadsListFilters,\n} from '../../Services/Filters';\nimport isEqual from 'lodash/isEqual';\nimport {\n  buildFilterChips,\n  passFilterWorkloads,\n  removeFilterParam as _removeFilterParam,\n  /* addFilterParam as _addFilterParam, */\n  translateSortParams,\n  paramParser,\n  updateSearchParams,\n} from '../Common/Tables';\nimport {\n  ErrorState,\n  NoMatchingWorkloads,\n  NoRecsForWorkloads,\n  NoWorkloadsAvailable,\n} from '../MessageState/EmptyStates';\nimport Loading from '../Loading/Loading';\n/* import ShieldSet from '../ShieldSet'; */\nimport { filtersAreApplied } from '../../Utilities/Workloads';\n\nconst WorkloadsListTable = ({\n  query: {\n    isError,\n    error,\n    isUninitialized,\n    isFetching,\n    isSuccess,\n    data,\n    refetch,\n  },\n}) => {\n  const dispatch = useDispatch();\n  const filters = useSelector(({ filters }) => filters.workloadsListState);\n  const workloads = data?.workloads || [];\n  const perPage = filters.limit;\n  const page = Math.floor(filters.offset / filters.limit) + 1;\n\n  const [rows, setRows] = useState([]);\n  const [filteredRows, setFilteredRows] = useState([]);\n  const [rowsFiltered, setRowsFiltered] = useState(false);\n  const [filtersApplied, setFiltersApplied] = useState(false);\n  const [filterBuilding, setFilterBuilding] = useState(true);\n  const updateFilters = (payload) =>\n    dispatch(updateWorkloadsListFilters(payload));\n  const removeFilterParam = (param) =>\n    _removeFilterParam(filters, updateFilters, param);\n\n  const loadingState = isUninitialized || isFetching || !rowsFiltered;\n  const errorState = isError;\n  const noMatch = filteredRows.length === 0;\n  const successState = isSuccess;\n  const { search } = useLocation();\n\n  /* const addFilterParam = (param, values) =>\n    _addFilterParam(filters, updateFilters, param, values); */\n\n  useEffect(() => {\n    setFilteredRows(buildFilteredRows(workloads));\n  }, [\n    data,\n    filters.namespace_name,\n    filters.cluster_name,\n    filters.severity,\n    filters.sortDirection,\n    filters.sortIndex,\n  ]);\n\n  useEffect(() => {\n    if (search && filterBuilding) {\n      const paramsObject = paramParser(search);\n\n      if (paramsObject.sort) {\n        const sortObj = translateSortParams(paramsObject.sort);\n        paramsObject.sortIndex = WORKLOADS_LIST_COLUMNS_KEYS.indexOf(\n          sortObj.name\n        );\n        paramsObject.sortDirection = sortObj.direction;\n      }\n      paramsObject.offset &&\n        (paramsObject.offset = Number(paramsObject.offset[0]));\n      paramsObject.limit &&\n        (paramsObject.limit = Number(paramsObject.limit[0]));\n      paramsObject.impacting &&\n        !Array.isArray(paramsObject.impacting) &&\n        (paramsObject.impacting = [`${paramsObject.impacting}`]);\n      updateFilters({ ...filters, ...paramsObject });\n    }\n    setFilterBuilding(false);\n  }, []);\n\n  useEffect(() => {\n    if (!filterBuilding) {\n      updateSearchParams(filters, WORKLOADS_LIST_COLUMNS_KEYS);\n    }\n  }, [filters, filterBuilding]);\n\n  useEffect(() => {\n    setRows(buildDisplayedRows(filteredRows));\n    setRowsFiltered(true);\n    setFiltersApplied(filtersAreApplied(filters));\n  }, [filteredRows, filters.limit, filters.offset]);\n\n  const buildFilteredRows = (items) => {\n    setRowsFiltered(false);\n    const filtered = items\n      .filter((workloadData) => {\n        return passFilterWorkloads(workloadData, filters);\n      })\n      .sort((a, b) => {\n        let fst, snd;\n        const d = filters.sortDirection === 'asc' ? 1 : -1;\n        switch (filters.sortIndex) {\n          case WORKLOADS_TABLE_CELL_NAME:\n            fst = a.cluster?.display_name || a.cluster.uuid;\n            snd = b.cluster?.display_name || b.cluster.uuid;\n            return d * fst.localeCompare(snd);\n          case WORKLOADS_TABLE_CELL_RECOMMENDATIONS:\n            fst = a.metadata.recommendations || 0;\n            snd = b.metadata.recommendations || 0;\n            return fst > snd ? d : snd > fst ? -d : 0;\n          case WORKLOADS_TABLE_SEVERITY:\n            fst = a.metadata.hits_by_severity || { 1: 0, 2: 0, 3: 0, 4: 0 };\n            snd = b.metadata.hits_by_severity || { 1: 0, 2: 0, 3: 0, 4: 0 };\n            for (let i = 4; i > 0; i--) {\n              if (fst[i] > snd[i]) return d;\n              if (fst[i] < snd[i]) return -d;\n            }\n            return 0;\n          case WORKLOADS_TABLE_CELL_OBJECTS:\n            fst = a.metadata.objects || 0;\n            snd = b.metadata.objects || 0;\n            return fst > snd ? d : snd > fst ? -d : 0;\n          case WORKLOADS_TABLE_CELL_LAST_SEEN:\n            fst = new Date(a.metadata.last_checked_at || 0);\n            snd = new Date(b.metadata.last_checked_at || 0);\n            return fst > snd ? d : snd > fst ? -d : 0;\n        }\n      });\n\n    return filtered;\n  };\n\n  const buildDisplayedRows = (rows) => {\n    return rows\n      .slice(perPage * (page - 1), perPage * (page - 1) + perPage)\n      .map((item, index) => ({\n        entity: item,\n        cells: [\n          <span key={index}>\n            <Link\n              to={`${BASE_PATH}/workloads/${item.cluster.uuid}/${item.namespace.uuid}`}\n            >\n              <p key={`${index}-cluster`}>\n                {item.cluster.display_name || item.cluster.uuid}\n              </p>\n              <p key={`${index}-namespace`}>\n                {item.namespace.name || item.namespace.uuid}\n              </p>\n            </Link>\n          </span>,\n          item.metadata.recommendations,\n          item.metadata.objects,\n          <span key={index}>\n            <DateFormat\n              extraTitle=\"Last seen: \"\n              date={item.metadata.last_checked_at}\n              variant=\"relative\"\n            />\n          </span>,\n        ],\n      }));\n  };\n\n  const filterConfigItems = [\n    {\n      label: 'Cluster name',\n      type: 'text',\n      filterValues: {\n        key: 'cluster_name',\n        onChange: (_event, value) =>\n          updateFilters({ ...filters, offset: 0, cluster_name: value }),\n        value: filters.cluster_name,\n        placeholder: 'Filter by cluster name',\n      },\n    },\n    {\n      label: 'Namespace name',\n      type: 'text',\n      filterValues: {\n        key: 'namespace_name',\n        onChange: (_event, value) =>\n          updateFilters({ ...filters, offset: 0, namespace_name: value }),\n        value: filters.namespace_name,\n        placeholder: 'Filter by namespace name',\n      },\n    },\n    /* {\n      label: 'Severity',\n      type: conditionalFilterType.checkbox,\n      id: WORKLOADS_TABLE_FILTER_CATEGORIES.severity.urlParam,\n      value: `checkbox-${WORKLOADS_TABLE_FILTER_CATEGORIES.severity.urlParam}`,\n      filterValues: {\n        key: `${WORKLOADS_TABLE_FILTER_CATEGORIES.severity.urlParam}-filter`,\n        onChange: (_event, value) => addFilterParam('severity', value),\n        value: filters.severity,\n        items: WORKLOADS_TABLE_FILTER_CATEGORIES.severity.values,\n        placeholder: 'Filter by severity',\n      },\n    }, */\n  ];\n\n  const activeFiltersConfig = {\n    showDeleteButton: filtersApplied,\n    deleteTitle: 'Reset filters',\n    filters: buildFilterChips(filters, WORKLOADS_TABLE_FILTER_CATEGORIES),\n    onDelete: (_event, itemsToRemove, isAll) => {\n      if (isAll) {\n        if (isEqual(filters, WORKLOADS_TABLE_INITIAL_STATE)) {\n          refetch();\n        } else {\n          resetFilters(filters, WORKLOADS_TABLE_INITIAL_STATE, updateFilters);\n        }\n      } else {\n        itemsToRemove.map((item) => {\n          const newFilter = {\n            [item.urlParam]: Array.isArray(filters[item.urlParam])\n              ? filters[item.urlParam].filter(\n                  (value) => String(value) !== String(item.chips[0].value)\n                )\n              : '',\n          };\n          newFilter[item.urlParam].length > 0\n            ? updateFilters({ ...filters, ...newFilter })\n            : removeFilterParam(item.urlParam);\n        });\n      }\n    },\n  };\n\n  const onSetPage = (_e, pageNumber) => {\n    setRowsFiltered(false);\n    const newOffset = pageNumber * filters.limit - filters.limit;\n    updateFilters({ ...filters, offset: newOffset });\n  };\n\n  const onSetPerPage = (_e, perPage) => {\n    if (perPage !== filters.limit) {\n      setRowsFiltered(false);\n      updateFilters({ ...filters, limit: perPage, offset: 0 });\n    }\n  };\n\n  const onSort = (_e, index, direction) => {\n    setRowsFiltered(false);\n    updateFilters({ ...filters, sortIndex: index, sortDirection: direction });\n  };\n\n  return isError && error.status === 404 ? (\n    <NoWorkloadsAvailable />\n  ) : isSuccess && workloads.length === 0 ? (\n    <NoRecsForWorkloads />\n  ) : (\n    <div id=\"workloads-list-table\">\n      <PrimaryToolbar\n        pagination={{\n          itemCount: filteredRows.length,\n          page,\n          perPage,\n          onSetPage,\n          onPerPageSelect: onSetPerPage,\n          isCompact: true,\n          ouiaId: 'pager',\n        }}\n        filterConfig={{ items: filterConfigItems }}\n        activeFiltersConfig={\n          isError ? { showDeleteButton: false } : activeFiltersConfig\n        }\n      />\n      <Table\n        aria-label=\"Table of workloads\"\n        ouiaId=\"workloads\"\n        variant={TableVariant.compact}\n        cells={WORKLOADS_LIST_COLUMNS}\n        rows={\n          errorState || loadingState || noMatch ? (\n            [\n              {\n                fullWidth: true,\n                cells: [\n                  {\n                    props: {\n                      colSpan: WORKLOADS_LIST_COLUMNS.length + 1,\n                    },\n                    title: errorState ? (\n                      <ErrorState />\n                    ) : loadingState ? (\n                      <Loading />\n                    ) : (\n                      <NoMatchingWorkloads />\n                    ),\n                  },\n                ],\n              },\n            ]\n          ) : successState ? (\n            rows\n          ) : (\n            <ErrorState />\n          )\n        }\n        isStickyHeader\n        sortBy={{\n          index: filters.sortIndex,\n          direction: filters.sortDirection,\n        }}\n        onSort={onSort}\n      >\n        <TableHeader />\n        <TableBody />\n      </Table>\n      <Pagination\n        ouiaId=\"pager\"\n        itemCount={filteredRows.length}\n        page={page}\n        perPage={perPage}\n        onSetPage={onSetPage}\n        onPerPageSelect={onSetPerPage}\n        onPageInput={onSetPage}\n        widgetId={`pagination-options-menu-bottom`}\n        variant={PaginationVariant.bottom}\n      />\n    </div>\n  );\n};\n\nWorkloadsListTable.propTypes = {\n  query: PropTypes.object.isRequired,\n};\n\nexport { WorkloadsListTable };\n","import React from 'react';\n// import { useGetWorkloadsQuery } from '../../Services/SmartProxy';\nimport { WorkloadsListTable } from './WorkloadsListTable';\nimport mockdata from '../../../cypress/fixtures/api/insights-results-aggregator/v2/workloads.json';\n\nconst WorkloadsListTableWrapper = () => {\n  // const query = useGetWorkloadsQuery();\n  // For more diverse use mockdata\n  // Comment out the query above\n  // Uncomment the query below\n  // Uncomment the mockdata import above\n  const query = {\n    isError: false,\n    isFetching: false,\n    isUninitialized: false,\n    isSuccess: true,\n    data: { workloads: mockdata },\n    refetch: () => null,\n  };\n\n  return <WorkloadsListTable query={query} />;\n};\n\nexport default WorkloadsListTableWrapper;\n","import React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport PageHeader from '@redhat-cloud-services/frontend-components/PageHeader';\n\nimport messages from '../../Messages';\nimport WorkloadsListTable from '../WorkloadsListTable';\nimport { Title } from '@patternfly/react-core';\nimport useChrome from '@redhat-cloud-services/frontend-components/useChrome';\n\nconst WorkloadsList = () => {\n  const intl = useIntl();\n  const chrome = useChrome();\n\n  chrome.updateDocumentTitle(\n    intl.formatMessage(messages.documentTitle, {\n      subnav: 'Workloads',\n    })\n  );\n\n  return (\n    <React.Fragment>\n      <PageHeader className=\"ins-c-clusters-header\">\n        <Title headingLevel=\"h1\" ouiaId=\"page-header\">\n          Workloads\n        </Title>\n      </PageHeader>\n      <section className=\"pf-l-page__main-section pf-c-page__main-section\">\n        <WorkloadsListTable />\n      </section>\n    </React.Fragment>\n  );\n};\n\nexport default WorkloadsList;\n"],"names":["React","Card","ouiaId","CardBody","List","WorkloadsListTable","_ref","_ref$query","query","isError","error","isUninitialized","isFetching","isSuccess","data","refetch","dispatch","useDispatch","filters","useSelector","_ref2","workloadsListState","workloads","perPage","limit","page","Math","floor","offset","_useState","useState","_useState2","_slicedToArray","rows","setRows","_useState3","_useState4","filteredRows","setFilteredRows","_useState5","_useState6","rowsFiltered","setRowsFiltered","_useState7","_useState8","filtersApplied","setFiltersApplied","_useState9","_useState10","filterBuilding","setFilterBuilding","updateFilters","payload","updateWorkloadsListFilters","loadingState","errorState","noMatch","length","successState","search","useLocation","useEffect","buildFilteredRows","namespace_name","cluster_name","severity","sortDirection","sortIndex","paramsObject","paramParser","sort","sortObj","translateSortParams","WORKLOADS_LIST_COLUMNS_KEYS","indexOf","name","direction","Number","impacting","Array","isArray","concat","_objectSpread","updateSearchParams","buildDisplayedRows","filtersAreApplied","items","filter","workloadData","passFilterWorkloads","a","b","_a$cluster","_b$cluster","fst","snd","d","WORKLOADS_TABLE_CELL_NAME","cluster","display_name","uuid","localeCompare","WORKLOADS_TABLE_CELL_RECOMMENDATIONS","metadata","recommendations","WORKLOADS_TABLE_SEVERITY","hits_by_severity","i","WORKLOADS_TABLE_CELL_OBJECTS","objects","WORKLOADS_TABLE_CELL_LAST_SEEN","Date","last_checked_at","slice","map","item","index","entity","cells","key","Link","to","BASE_PATH","namespace","DateFormat","extraTitle","date","variant","filterConfigItems","label","type","filterValues","onChange","_event","value","placeholder","activeFiltersConfig","showDeleteButton","deleteTitle","buildFilterChips","WORKLOADS_TABLE_FILTER_CATEGORIES","onDelete","itemsToRemove","isAll","isEqual","WORKLOADS_TABLE_INITIAL_STATE","resetFilters","param","newFilter","_defineProperty","urlParam","String","chips","_removeFilterParam","onSetPage","_e","pageNumber","newOffset","onSetPerPage","status","NoWorkloadsAvailable","NoRecsForWorkloads","id","PrimaryToolbar","pagination","itemCount","onPerPageSelect","isCompact","filterConfig","Table","TableVariant","compact","WORKLOADS_LIST_COLUMNS","fullWidth","props","colSpan","title","ErrorState","Loading","NoMatchingWorkloads","isStickyHeader","sortBy","onSort","TableHeader","TableBody","Pagination","onPageInput","widgetId","PaginationVariant","bottom","propTypes","PropTypes","isRequired","mockdata","intl","useIntl","useChrome","updateDocumentTitle","formatMessage","messages","documentTitle","subnav","PageHeader","className","Title","headingLevel"],"sourceRoot":""}