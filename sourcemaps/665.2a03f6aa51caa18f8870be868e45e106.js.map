{"version":3,"file":"js/665.1652095721019.37eb7d0e654f41696250.js","mappings":"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","sources":["webpack:///./src/Components/Labels/RuleLabels.js","webpack:///./src/Components/Modals/DisableRule.js"],"sourcesContent":["import {\n  Tooltip,\n  TooltipPosition,\n} from '@patternfly/react-core/dist/js/components/Tooltip/Tooltip';\n\nimport { Label } from '@patternfly/react-core/dist/js/components/Label/Label';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useIntl } from 'react-intl';\nimport messages from '../../Messages';\n\nconst RuleLabels = ({ rule }) => {\n  const intl = useIntl();\n  return (\n    <React.Fragment>\n      {rule.disabled && (\n        <Tooltip\n          content={intl.formatMessage(messages.ruleIsDisabledTooltip)}\n          position={TooltipPosition.right}\n        >\n          <Label color=\"gray\" isCompact>\n            {intl.formatMessage(messages.disabled)}\n          </Label>\n        </Tooltip>\n      )}\n    </React.Fragment>\n  );\n};\n\nRuleLabels.propTypes = {\n  rule: PropTypes.object,\n};\n\nexport default RuleLabels;\n","import React, { useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport PropTypes from 'prop-types';\nimport { useDispatch } from 'react-redux';\n\nimport { Button } from '@patternfly/react-core/dist/js/components/Button/Button';\nimport { Checkbox } from '@patternfly/react-core/dist/js/components/Checkbox/Checkbox';\nimport { Form } from '@patternfly/react-core/dist/js/components/Form/Form';\nimport { FormGroup } from '@patternfly/react-core/dist/js/components/Form/FormGroup';\nimport { Modal } from '@patternfly/react-core/dist/js/components/Modal/Modal';\nimport { TextInput } from '@patternfly/react-core/dist/js/components/TextInput/TextInput';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/';\n\nimport messages from '../../Messages';\nimport { disableRuleForCluster, useSetAckMutation } from '../../Services/Acks';\n\nconst DisableRule = ({\n  isModalOpen,\n  handleModalToggle,\n  rule,\n  afterFn,\n  host,\n  hosts,\n}) => {\n  const intl = useIntl();\n  const [justification, setJustificaton] = useState('');\n  const [singleHost, setSingleHost] = useState(!!host);\n  const [multipleHosts, setMultipleHosts] = useState(hosts.length > 0);\n  const [setAck] = useSetAckMutation();\n  const dispatch = useDispatch();\n  const notify = (data) => dispatch(addNotification(data));\n\n  const bulkHostActions = async () => {\n    // disable for a group of hosts (clusters)\n    try {\n      const requests = hosts.map((h) =>\n        disableRuleForCluster({\n          uuid: h.id,\n          recId: rule.rule_id,\n          justification,\n        })\n      );\n      await Promise.all(requests);\n      notify({\n        variant: 'success',\n        dismissable: true,\n        timeout: true,\n        title: intl.formatMessage(messages.recSuccessfullyDisabledForCluster),\n      });\n      afterFn && afterFn();\n    } catch (error) {\n      notify({\n        variant: 'danger',\n        dismissable: true,\n        title: intl.formatMessage(messages.error),\n        description: `${error}`,\n      });\n    }\n  };\n\n  const disableRule = async () => {\n    try {\n      if (singleHost) {\n        // disable the rec for this single cluster\n        await disableRuleForCluster({\n          uuid: host,\n          recId: rule.rule_id,\n          justification,\n        });\n        notify({\n          variant: 'success',\n          timeout: true,\n          dismissable: true,\n          title: intl.formatMessage(messages.recSuccessfullyDisabledForCluster),\n        });\n      } else if (multipleHosts) {\n        bulkHostActions();\n      } else {\n        // disable the whole rec\n        await setAck({\n          rule_id: rule.rule_id,\n          justification,\n        }).unwrap();\n        notify({\n          variant: 'success',\n          timeout: true,\n          dismissable: true,\n          title: intl.formatMessage(messages.recSuccessfullyDisabled),\n        });\n      }\n      setJustificaton('');\n      afterFn && afterFn();\n    } catch (error) {\n      notify({\n        variant: 'danger',\n        dismissable: true,\n        title: intl.formatMessage(messages.error),\n        description: `${error}`,\n      });\n    }\n\n    handleModalToggle(false);\n  };\n\n  return (\n    <Modal\n      variant=\"small\"\n      title={intl.formatMessage(messages.disableRule)}\n      isOpen={isModalOpen}\n      onClose={() => {\n        handleModalToggle();\n        setJustificaton('');\n      }}\n      actions={[\n        <Button\n          key=\"confirm\"\n          variant=\"primary\"\n          onClick={() => disableRule()}\n          ouiaId=\"confirm\"\n        >\n          {intl.formatMessage(messages.save)}\n        </Button>,\n        <Button\n          key=\"cancel\"\n          variant=\"link\"\n          onClick={() => {\n            handleModalToggle(false);\n            setJustificaton('');\n          }}\n          ouiaId=\"cancel\"\n        >\n          {intl.formatMessage(messages.cancel)}\n        </Button>,\n      ]}\n      ouiaId=\"recommendation-disable\"\n    >\n      {intl.formatMessage(messages.disableRuleBody)}\n      <Form>\n        <FormGroup fieldId=\"blank-form\" />\n        {(host || hosts.length > 0) && (\n          <FormGroup fieldId=\"disable-rule-one-system\">\n            <Checkbox\n              isChecked={singleHost || multipleHosts}\n              onChange={() => {\n                host\n                  ? setSingleHost(!singleHost)\n                  : setMultipleHosts(!multipleHosts);\n              }}\n              label={\n                host\n                  ? intl.formatMessage(messages.disableRuleSingleCluster)\n                  : intl.formatMessage(messages.disableRuleForClusters)\n              }\n              id=\"disable-rule-one-system\"\n              name=\"disable-rule-one-system\"\n              ouiaId=\"disable-recommendation-one-cluster\"\n            />\n          </FormGroup>\n        )}\n        <FormGroup\n          label={intl.formatMessage(messages.justificationNote)}\n          fieldId=\"disable-rule-justification\"\n        >\n          <TextInput\n            type=\"text\"\n            id=\"disable-rule-justification\"\n            aria-describedby=\"disable-rule-justification\"\n            value={justification}\n            onChange={(text) => setJustificaton(text)}\n            onKeyDown={(e) =>\n              e.key === 'Enter' && (e.preventDefault(), disableRule())\n            }\n          />\n        </FormGroup>\n      </Form>\n    </Modal>\n  );\n};\n\nDisableRule.propTypes = {\n  isModalOpen: PropTypes.bool,\n  rule: PropTypes.object,\n  handleModalToggle: PropTypes.func,\n  afterFn: PropTypes.func,\n  host: PropTypes.object,\n  hosts: PropTypes.array,\n};\n\nDisableRule.defaultProps = {\n  isModalOpen: false,\n  rule: {},\n  handleModalToggle: () => undefined,\n  afterFn: () => undefined,\n  host: undefined,\n  hosts: [],\n};\n\nexport default DisableRule;\n"],"names":["RuleLabels","rule","intl","useIntl","disabled","Tooltip","content","formatMessage","messages","position","TooltipPosition","Label","color","isCompact","propTypes","PropTypes","DisableRule","isModalOpen","handleModalToggle","afterFn","host","hosts","useState","justification","setJustificaton","singleHost","setSingleHost","length","multipleHosts","setMultipleHosts","useSetAckMutation","setAck","dispatch","useDispatch","notify","data","addNotification","bulkHostActions","requests","map","h","disableRuleForCluster","uuid","id","recId","rule_id","Promise","all","variant","dismissable","timeout","title","description","disableRule","unwrap","isOpen","onClose","actions","Button","key","onClick","ouiaId","fieldId","isChecked","onChange","label","name","type","value","text","s","onKeyDown","e","preventDefault","defaultProps","undefined"],"sourceRoot":""}