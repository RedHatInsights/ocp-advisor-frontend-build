"use strict";(self.webpackChunkocp_advisor_frontend=self.webpackChunkocp_advisor_frontend||[]).push([[420],{67636:(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});var n=r(93264),a=r.n(n),i=r(86896),l=r(48716),o=r(39173),c=r(86350),s=r(30893),u=r(86362),f=r(71002),m=r(4942),d=r(45987),g=r(93433),p=r(29439),h=r(45697),b=r.n(h),v=r(78625),y=r(30097),E=r(56161),P=r(76),Z=r(42151),S=r(18246),T=r(90111),w=r(28672),C=r(59303),O=r(76913),j=r(52661),D=r(51014);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,m.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(e,t){if("object"!==(0,f.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==(0,f.Z)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===(0,f.Z)(t)?t:String(t)}var I=function(e){var t=e.query,r=t.isError,l=t.isUninitialized,o=t.isFetching,c=t.isSuccess,u=t.data,f=(0,i.Z)(),h=(0,v.useDispatch)(),b=function(e){return h((0,w.$Q)(e))},x=(0,v.useSelector)((function(e){return e.filters.clustersListState})),I=(null==u?void 0:u.data)||[],R=x.offset/x.limit+1,B=(0,n.useState)([]),F=(0,p.Z)(B,2),M=F[0],V=F[1],q=(0,n.useState)([]),L=(0,p.Z)(q,2),A=L[0],H=L[1];(0,n.useEffect)((function(){H(N(M,x.sortIndex,x.sortDirection))}),[M,x.sortIndex,x.sortDirection,x.limit,x.offset]),(0,n.useEffect)((function(){V(z(I,x))}),[u,x.hits,x.text]);var z=function(e,t){return(0,O.io)(e.filter((function(e){return(0,O.im)(e,t)})))},N=function(e,t,r){var n=(0,g.Z)(e);return-1!==t&&n.sort((function(e,n){var a,i,l=r===y.SortByDirection.asc?1:-1;switch(t){case C.T8:return a=e.cluster.cluster_name||e.cluster.cluster_id,i=n.cluster.cluster_name||n.cluster.cluster_id,a.localeCompare(i)?a.localeCompare(i)*l:0;case C.wz:return(a=new Date(e.cluster.last_checked_at||0))>(i=new Date(n.cluster.last_checked_at||0))?l:i>a?-l:0;default:return(a=e.cells[t])>(i=n.cells[t])?l:i>a?-l:0}})),n.slice(x.limit*(R-1),x.limit*(R-1)+x.limit)},Q=function(e){var t=_(_({},x),{},{offset:0}),r=(t[e],(0,d.Z)(t,[e].map(k)));b(_(_({},r),"text"===e?{text:""}:"hits"===e?{hits:[]}:{}))},U=[{label:f.formatMessage(s.Z.name).toLowerCase(),filterValues:{key:"text-filter",onChange:function(e,t){return b(_(_({},x),{},{text:t}))},value:x.text,placeholder:f.formatMessage(s.Z.filterBy)}},{label:C.RT.hits.title,type:C.RT.hits.type,id:C.RT.hits.urlParam,value:"checkbox-".concat(C.RT.hits.urlParam),filterValues:{key:"".concat(C.RT.hits.urlParam,"-filter"),onChange:function(e,t){return function(e,t){t.length>0?b(_(_({},x),{},{offset:0},(0,m.Z)({},e,t))):Q(e)}(C.RT.hits.urlParam,t)},value:x.hits,items:C.RT.hits.values}}],$={deleteTitle:f.formatMessage(s.Z.resetFilters),filters:(0,O.mt)(x,C.RT),onDelete:function(e,t,r){r?b(w.Ly):t.map((function(e){var t=(0,m.Z)({},e.urlParam,Array.isArray(x[e.urlParam])?x[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?b(_(_({},x),t)):Q(e.urlParam)}))}};return a().createElement(a().Fragment,null,l||o?a().createElement(P.Bullseye,null,a().createElement(Z.Spinner,null)):0===I.length?a().createElement(D.ER,null):a().createElement("div",{id:"clusters-list-table"},a().createElement(T.Z,{pagination:{itemCount:M.length,page:R,perPage:x.limit,onSetPage:function(e,t){return b(_(_({},x),{},{offset:x.limit*(t-1)}))},onPerPageSelect:function(e,t){return b(_(_({},x),{},{limit:t,offset:0}))},isCompact:!0,ouiaId:"pager"},filterConfig:{items:U},activeFiltersConfig:$}),(l||o)&&a().createElement(j.Z,null),r&&a().createElement(E.Card,{ouiaId:"error-state"},a().createElement(E.CardBody,null,a().createElement(D.Te,null))),!(l||o)&&c&&a().createElement(a().Fragment,null,a().createElement(y.Table,{"aria-label":"Table of clusters",ouiaId:"clusters",variant:y.TableVariant.compact,cells:C.Bg,rows:A,sortBy:{index:x.sortIndex,direction:x.sortDirection},onSort:function(e,t,r){b(_(_({},x),{},{sortIndex:t,sortDirection:r}))},isStickyHeader:!0},a().createElement(y.TableHeader,null),a().createElement(y.TableBody,null)),0===M.length&&a().createElement(E.Card,{ouiaId:"empty-state"},a().createElement(E.CardBody,null,a().createElement(D.VA,null)))),a().createElement(S.Pagination,{ouiaId:"pager",itemCount:M.length,page:x.offset/x.limit+1,perPage:Number(x.limit),onSetPage:function(e,t){return b(_(_({},x),{},{offset:x.limit*(t-1)}))},onPerPageSelect:function(e,t){return b(_(_({},x),{},{limit:t,offset:0}))},widgetId:"pagination-options-menu-bottom",variant:S.PaginationVariant.bottom})))};I.propTypes={query:b().object.isRequired};const R=function(){var e=(0,u.Oj)();return a().createElement(I,{query:e})},B=function(){var e=(0,i.Z)();return document.title=e.formatMessage(s.Z.documentTitle,{subnav:"Clusters"}),a().createElement(a().Fragment,null,a().createElement(l.Z,{className:"ins-c-clusters-header"},a().createElement(o.Z,{title:"".concat(e.formatMessage(s.Z.insightsHeader)," ").concat(e.formatMessage(s.Z.clusters).toLowerCase())})),a().createElement(c.Z,null,a().createElement(R,null)))}}}]);
//# sourceMappingURL=../sourcemaps/ClustersList.116bcb4d15dada7141c12e22ba8ff17a.js.map