"use strict";(self.webpackChunkocp_advisor_frontend=self.webpackChunkocp_advisor_frontend||[]).push([[420],{67636:(e,t,r)=>{r.r(t),r.d(t,{default:()=>R});var n=r(93264),i=r.n(n),a=r(86896),l=r(48716),o=r(39173),c=r(86350),s=r(30893),u=r(86362),f=r(71002),m=r(4942),d=r(45987),g=r(93433),p=r(29439),b=r(45697),h=r.n(b),v=r(88931),y=r(94550),P=r(56161),E=r(18246),Z=r(90111),T=r(28672),w=r(59303),C=r(76913),O=r(52661),S=r(51014);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,m.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e){var t=function(e,t){if("object"!==(0,f.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==(0,f.Z)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===(0,f.Z)(t)?t:String(t)}var _=function(e){var t=e.query,r=t.isError,l=t.isUninitialized,o=t.isFetching,c=t.isSuccess,u=t.data,f=(0,a.Z)(),b=(0,v.useDispatch)(),h=function(e){return b((0,T.$Q)(e))},j=(0,v.useSelector)((function(e){return e.filters.clustersListState})),_=(null==u?void 0:u.data)||[],k=j.offset/j.limit+1,R=(0,n.useState)([]),I=(0,p.Z)(R,2),B=I[0],M=I[1],F=(0,n.useState)([]),L=(0,p.Z)(F,2),V=L[0],q=L[1];(0,n.useEffect)((function(){q(z(B,j.sortIndex,j.sortDirection))}),[B,j.sortIndex,j.sortDirection,j.limit,j.offset]),(0,n.useEffect)((function(){M(A(_,j))}),[u,j.hits,j.text]);var A=function(e,t){return(0,C.io)(e.filter((function(e){return(0,C.im)(e,t)})))},z=function(e,t,r){var n=(0,g.Z)(e);return-1!==t&&n.sort((function(e,n){var i,a,l=r===y.SortByDirection.asc?1:-1;switch(t){case w.T8:return i=e.cluster.cluster_name||e.cluster.cluster_id,a=n.cluster.cluster_name||n.cluster.cluster_id,i.localeCompare(a)?i.localeCompare(a)*l:0;case w.wz:return(i=new Date(e.cluster.last_checked_at))>(a=new Date(n.cluster.last_checked_at))?l:a>i?-l:0;default:return(i=e.cells[t])>(a=n.cells[t])?l:a>i?-l:0}})),n.slice(j.limit*(k-1),j.limit*(k-1)+j.limit)},H=function(e){var t=D(D({},j),{},{offset:0}),r=(t[e],(0,d.Z)(t,[e].map(x)));h(D(D({},r),"text"===e?{text:""}:"hits"===e?{hits:[]}:{}))},N=[{label:f.formatMessage(s.Z.name).toLowerCase(),filterValues:{key:"text-filter",onChange:function(e,t){return h(D(D({},j),{},{text:t}))},value:j.text,placeholder:f.formatMessage(s.Z.filterBy)}},{label:w.RT.hits.title,type:w.RT.hits.type,id:w.RT.hits.urlParam,value:"checkbox-".concat(w.RT.hits.urlParam),filterValues:{key:"".concat(w.RT.hits.urlParam,"-filter"),onChange:function(e,t){return function(e,t){t.length>0?h(D(D({},j),{},{offset:0},(0,m.Z)({},e,t))):H(e)}(w.RT.hits.urlParam,t)},value:j.hits,items:w.RT.hits.values}}],Q={deleteTitle:f.formatMessage(s.Z.resetFilters),filters:(0,C.mt)(j,w.RT),onDelete:function(e,t,r){r?h(T.Ly):t.map((function(e){var t=(0,m.Z)({},e.urlParam,Array.isArray(j[e.urlParam])?j[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?h(D(D({},j),t)):H(e.urlParam)}))}};return i().createElement("div",{id:"clusters-list-table"},i().createElement(Z.Z,{pagination:{itemCount:B.length,page:k,perPage:j.limit,onSetPage:function(e,t){return h(D(D({},j),{},{offset:j.limit*(t-1)}))},onPerPageSelect:function(e,t){return h(D(D({},j),{},{limit:t,offset:0}))},isCompact:!0},filterConfig:{items:N},activeFiltersConfig:Q}),(l||o)&&i().createElement(O.Z,null),r&&i().createElement(P.Card,null,i().createElement(P.CardBody,null,i().createElement(S.Te,null))),!(l||o)&&c&&i().createElement(i().Fragment,null,i().createElement(y.Table,{"aria-label":"Table of clusters",ouiaId:"clustersListTable",variant:y.TableVariant.compact,cells:w.Bg,rows:V,sortBy:{index:j.sortIndex,direction:j.sortDirection},onSort:function(e,t,r){h(D(D({},j),{},{sortIndex:t,sortDirection:r}))}},i().createElement(y.TableHeader,null),i().createElement(y.TableBody,null)),_.length>0&&0===B.length&&i().createElement(P.Card,{ouiaId:"empty-recommendations"},i().createElement(P.CardBody,null,i().createElement(S.VA,null)))),i().createElement(E.Pagination,{ouiaId:"clusters-list-pagination-bottom",itemCount:B.length,page:j.offset/j.limit+1,perPage:Number(j.limit),onSetPage:function(e,t){return h(D(D({},j),{},{offset:j.limit*(t-1)}))},onPerPageSelect:function(e,t){return h(D(D({},j),{},{limit:t,offset:0}))},widgetId:"pagination-options-menu-bottom",variant:E.PaginationVariant.bottom}))};_.propTypes={query:h().object.isRequired};const k=function(){var e=(0,u.Oj)();return i().createElement(_,{query:e})},R=function(){var e=(0,a.Z)();return document.title=e.formatMessage(s.Z.documentTitle,{subnav:"Clusters"}),i().createElement(i().Fragment,null,i().createElement(l.Z,{className:"ins-c-clusters-header"},i().createElement(o.Z,{title:"".concat(e.formatMessage(s.Z.insightsHeader)," ").concat(e.formatMessage(s.Z.clusters).toLowerCase())})),i().createElement(c.Z,null,i().createElement(k,null)))}}}]);