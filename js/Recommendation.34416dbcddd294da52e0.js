"use strict";(self.webpackChunkocp_advisor_frontend=self.webpackChunkocp_advisor_frontend||[]).push([[987],{52772:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Y});var n=r(93264),a=r.n(n),l=r(16530),c=r(86896),o=r(45697),i=r.n(o),s=r(48716),u=r(39173),m=r(86350),f=r(62410),d=r(23218),p=r(34348),g=r(71369),b=r(84564),E=r(7193),v=r(39545),y=r(31728),h=r(59303),O=r(30893),P=r(1990),Z=r(52661),j=r(4942);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,j.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=r(51957),w=r(86362),k=r(29439),x=r(88931),F=r(48114),N=r(77572),I=r(92223),T=r(32875),_=r(56161),L=r(7026),B=r(97530),M=r(17335),R=r(12321),q=r(76),z=r(13877),A=r(51014),V=r(28672);function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){(0,j.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var H=function(e){var t=e.affectedClusters,r=(0,x.useDispatch)(),c=(0,x.useSelector)((function(e){return e.filters.affectedClustersState})),o=Number(c.limit),i=c.offset/c.limit+1,s=function(e){return r((0,V.BC)(e))},u=t.isError,m=t.isUninitialized,f=t.isFetching,d=t.isSuccess,p=t.data,g=void 0===p?[]:p,b=(0,n.useState)([]),E=(0,k.Z)(b,2),v=E[0],y=E[1],h=(0,n.useState)([]),O=(0,k.Z)(h,2),P=O[0],j=O[1],C=(0,n.useState)([]),D=(0,k.Z)(C,2),S=D[0],w=D[1],U={items:[{label:"Name",type:N.Yu.text,filterValues:{key:"name-filter",onChange:function(e,t){return function(e){var t=G(G({},c),{},{text:e,offset:0});s(t)}(t)},value:c.text}}],isDisabled:u||g&&0===g.length},H=function(e,t){var r=t*c.limit-c.limit;s(G(G({},c),{},{offset:r}))},Q=function(e,t){s(G(G({},c),{},{limit:t}))};return(0,n.useEffect)((function(){var e=function(e,t){return e.filter((function(e){return e.includes(t.text)})).sort((function(e,r){return"asc"===t.sortDirection?e.localeCompare(r):r.localeCompare(e)}))}(g,c),t=function(e){return e.slice(o*(i-1),o*(i-1)+o)}(e),r=function(e,t){var r=e,n=r.findIndex((function(e){return"Name"===e.category}));return""===t?r.splice(n):-1===n?r.push({category:"Name",chips:[{name:t}]}):r[n]={category:"Name",chips:[{name:t}]},r}(S,c.text);y(e),j(t),w(r)}),[t,c]),a().createElement(a().Fragment,null,a().createElement(F.Z,{filterConfig:U,pagination:{itemCount:v.length,page:i,perPage:o,onSetPage:H,onPerPageSelect:Q},activeFiltersConfig:{filters:S,onDelete:function(){var e=G(G({},c),{},{text:""});s(e)}}}),(m||f)&&a().createElement(Z.Z,null),u&&a().createElement(_.Card,null,a().createElement(_.CardBody,null,a().createElement(A.Te,null))),d&&0===g.length&&a().createElement(_.Card,null,a().createElement(_.CardBody,null,a().createElement(A.mi,null))),d&&g.length>0&&(v.length>0?a().createElement(B.i,{"aria-label":"Table of affected clusters",ouiaId:"affectedClustersTable",variant:"compact",cells:[{title:"Name",transforms:[L.sortable]}],rows:P.map((function(e){return{cells:[a().createElement("span",{key:e},a().createElement(l.Link,{to:"/clusters/".concat(e)},e))]}})),sortBy:{index:c.sortIndex,direction:c.sortDirection},onSort:function(e,t,r){s(G(G({},c),{},{sortIndex:t,sortDirection:r}))}},a().createElement(R.x,null),a().createElement(M.R,null)):a().createElement(I.Z,null,a().createElement(q.Bullseye,null,a().createElement(A.VA,null)))),a().createElement(T.Z,{isFooter:!0,className:"ins-c-inventory__table--toolbar"},a().createElement(z.Pagination,{variant:z.PaginationVariant.bottom,itemCount:v.length,page:i,perPage:o,onSetPage:H,onPerPageSelect:Q,onPageInput:H})))};H.propTypes={affectedClusters:i().array};const Q=function(){var e=(0,w.tf)((0,l.useParams)().recommendationId);return a().createElement(H,{affectedClusters:e})};var W=function(e){var t=e.rule,r=e.match,n=(0,c.Z)(),l=t.isError,o=t.isUninitialized,i=t.isLoading,j=t.isFetching,C=t.isSuccess,w=t.data,k=C?function(e,t){var r,n=(null==e||null===(r=e.error_keys)||void 0===r?void 0:r[function(e){var t;return null===(t=e.split("|"))||void 0===t?void 0:t[1]}(t)])||{},a=D(D(D({},e),n),(null==n?void 0:n.metadata)||(null==e?void 0:e.metadata)||{});return a.impact={impact:a.impact},delete a.metadata,delete a.error_keys,a}(w.content,r.params.recommendationId):void 0;return a().createElement(a().Fragment,null,(o||i||j)&&a().createElement(m.Z,null,a().createElement(Z.Z,null)),l&&a().createElement(m.Z,null,a().createElement(S.Z,{title:n.formatMessage(O.Z.unableToConnect),text:n.formatMessage(O.Z.unableToConnectDesc),icon:b.default,iconStyle:{color:E.Q7.value}})),C&&a().createElement(a().Fragment,null,a().createElement(s.Z,{className:"pageHeaderOverride"},a().createElement(v.Z,{current:(null==k?void 0:k.description)||r.params.recommendationId})),a().createElement(m.Z,{className:"pf-m-light pf-u-pt-sm"},a().createElement(P.Z,{isOpenShift:!0,isDetailsPage:!0,rule:k,header:a().createElement(a().Fragment,null,a().createElement(u.Z,{title:a().createElement(a().Fragment,null,k.description," ",a().createElement(y.Z,{rule:k}))}),a().createElement("p",null,n.formatMessage(O.Z.rulesDetailsPubishdate,{date:a().createElement(f.Z,{date:new Date(k.publish_date),type:"onlyDate"})}),k.tags&&(Array.isArray(k.tags)?a().createElement(g.LabelGroup,{className:"categoryLabels",numLabels:1},k.tags.reduce((function(e,t){return h.kT[t]&&e.push(a().createElement(d.Label,{key:"label-".concat(t),color:"blue"},h.W2.category.values[h.kT[t]-1].label)),e}),[])):a().createElement(d.Label,null,k.tags))))})),a().createElement(m.Z,null,a().createElement(a().Fragment,null,a().createElement(a().Fragment,null,a().createElement(p.Title,{className:"titleOverride",headingLevel:"h3",size:"2xl"},n.formatMessage(O.Z.affectedClusters)),a().createElement(Q,null))))))};W.propTypes={rule:i().object.isRequired,match:i().object.isRequired};const Y=function(){var e=(0,w.qv)(function(e){var t;return null===(t=e.split("|"))||void 0===t?void 0:t[0]}((0,l.useParams)().recommendationId));return(0,n.useEffect)((function(){e.refetch()}),[(0,l.useParams)().recommendationId]),a().createElement(W,{rule:e,match:(0,l.useRouteMatch)()})}}}]);
//# sourceMappingURL=../sourcemaps/Recommendation.82b67b9c32ac3751e46a265523510ae0.js.map