(self.webpackChunkocpAdvisor=self.webpackChunkocpAdvisor||[]).push([[9619],{56276:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(92950),a=r.n(n),l=r(45697),i=r.n(l),o=r(86896),c=r(62012),s=r(85991),u=r(49489),m=r(15967),d=function(e){var t=e.current,r=(0,o.Z)(),n=(0,c.useLocation)().pathname.split("/");return a().createElement("div",null,a().createElement(s.a,{ouiaId:"detail"},a().createElement(u.g,{className:"breadcrumb-item"},a().createElement(c.Link,{to:"..",relative:"path"},"".concat(r.formatMessage(m.Z.insightsHeader)," ").concat(n[4]))),a().createElement(u.g,{className:"breadcrumb-item",isActive:!0},t)))};d.propTypes={current:i().string};const f=d},41785:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Oe});var n=r(92950),a=r.n(n),l=r(62012),i=r(86896),o=r(55140),c=r(86362),s=r(15967),u=r(45697),m=r.n(u),d=r(89376),f=r(70885),p=r(49287),v=r(18038),g=r(81159),E=r(34023),h=r(34348),b=r(22910),y=r(80765),_=r(96823),Z=r(35664),w=r(26899),k=r.n(w),P=r(73845),T=function(e){var t,r,l,o,c=e.clusterId,u=e.clusterData,m=e.clusterInfo,d=window.location,w=(0,n.useState)(!1),T=(0,f.Z)(w,2),I=T[0],S=T[1],C=(0,i.Z)(),O=u.isUninitialized,x=u.isFetching,D=u.data,j=m.isUninitialized,M=m.isFetching,A=m.data,W=[a().createElement(_.DropdownItem,{key:"link",onClick:function(){return function(e){d.assign(d.origin+(d.pathname.includes("preview")?"/preview":"")+"/openshift/details/".concat(e))}(c)}},a().createElement("snap",null,C.formatMessage(s.Z.clusterDetailsRedirect)))];return a().createElement(p.r,{id:"cluster-header",md:12,hasGutter:!0},a().createElement(v.P,{span:8},a().createElement(h.Dx,{size:"2xl",headingLevel:"h1",id:"cluster-header-title",ouiaId:"cluster-name"},j||M?a().createElement(Z.Z,{size:"sm"}):(null==A?void 0:A.display_name)||c)),a().createElement(v.P,{span:4,id:"cluster-header-dropdown"},a().createElement(b.Dropdown,{position:"right",onSelect:function(){return S(!I)},autoFocus:!1,isOpen:I,toggle:a().createElement(y.DropdownToggle,{id:"toggle-id-2",onToggle:function(e){return S(e)}},C.formatMessage(s.Z.dropDownActionSingleCluster)),dropdownItems:W})),a().createElement(v.P,null,a().createElement(g.K,null,a().createElement(E.v,{id:"cluster-header-uuid"},a().createElement("span",null,"UUID:")," ",a().createElement("span",null,c)),a().createElement(E.v,{id:"cluster-header-last-seen"},a().createElement("span",null,C.formatMessage(s.Z.lastSeen),": "),a().createElement("span",null,O||x?a().createElement(P.F,null):null!=D&&null!==(t=D.report)&&void 0!==t&&null!==(r=t.meta)&&void 0!==r&&r.last_checked_at?a().createElement(k(),{date:null==D||null===(l=D.report)||void 0===l||null===(o=l.meta)||void 0===o?void 0:o.last_checked_at,type:"exact"}):C.formatMessage(s.Z.unknown))))))};T.propTypes={clusterId:m().string.isRequired,clusterData:m().object.isRequired,clusterInfo:m().shape({isUninitialized:m().bool.isRequired,isFetching:m().bool.isRequired,data:m().shape({cluster_id:m().string,display_name:m().string,managed:m().bool,status:m().string})})};const I=function(){var e=(0,l.useParams)().clusterId,t=(0,c.th)({id:e,includeDisabled:!1}),r=(0,c.jH)({id:e});return a().createElement(T,{clusterId:e,clusterData:t,clusterInfo:r})};var S=r(56276),C=r(2095),O=r(85962),x=r(82819),D=r(98378),j=r(5391),M=r(42982),A=r(4942),W=r(86706),F=r(48403),L=r.n(F),R=r(90693),N=r(20535),U=r(76004),V=r(8045),z=r(56021),q=r(59303),J=r(85583),B=r(90670),K=r(51014),Y=r(76913),G=r(28672),H=r(48622),Q=r(52661);function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){(0,A.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ee=function(){var e,t=(0,i.Z)(),r=(0,W.useDispatch)(),o=function(e){return r((0,G.YR)(e))},u=(0,W.useSelector)((function(e){return e.filters.clusterRulesState})),m=(0,l.useParams)().clusterId,d=(0,c.th)({id:m,includeDisabled:!1}),p=d.isError,v=d.isUninitialized,g=d.isFetching,E=d.isSuccess,h=d.data,b=d.error,y=(null==h||null===(e=h.report)||void 0===e?void 0:e.data)||[],_=(0,n.useState)([]),Z=(0,f.Z)(_,2),w=Z[0],P=Z[1],T=(0,n.useState)([]),I=(0,f.Z)(T,2),S=I[0],C=I[1],O=(0,n.useState)(!1),x=(0,f.Z)(O,2),D=x[0],j=x[1],F=(0,n.useState)(!0),$=(0,f.Z)(F,2),ee=$[0],te=$[1],re=(0,n.useState)(""),ne=(0,f.Z)(re,2),ae=ne[0],le=ne[1],ie=w.length,oe=(0,l.useLocation)().search,ce=(0,n.useState)(!1),se=(0,f.Z)(ce,2),ue=se[0],me=se[1],de=v||g||!ue,fe=p,pe=E,ve=pe&&0===y.length,ge=y.length>0&&0===w.length,Ee=function(e,t){return te(!1),le(""),(0,Y.Lv)(u,o,e,t)};(0,n.useEffect)((function(){if(oe){var e=(0,Y.yG)(oe);if(e.sort){var t=(0,Y.Lg)(e.sort);e.sortIndex=q.P1.indexOf(t.name),e.sortDirection=t.direction}e.first&&(le(e.first),delete e.first),o(X(X({},u),e))}}),[]),(0,n.useEffect)((function(){P(be(y,u))}),[h,u]),(0,n.useEffect)((function(){C(ye(w,u.sortIndex,u.sortDirection)),me(!0)}),[w]);var he,be=function(e,r){me(!1);var n=new Set(S.filter((function(e){return null==e?void 0:e.isOpen})).map((function(e){var t;return null==e||null===(t=e.rule)||void 0===t?void 0:t.rule_id})));return e.filter((function(e){return(0,Y._F)(e,r)})).map((function(e,r){return[{rule:e,isOpen:D||(null==n?void 0:n.has(null==e?void 0:e.rule_id)),cells:[{title:a().createElement("div",null,(null==e?void 0:e.description)||(null==e?void 0:e.rule_id)," ",a().createElement(B.Z,{rule:e}))},{title:a().createElement("div",{key:r},a().createElement(k(),{date:e.created_at,type:"relative",tooltipProps:{position:V.TooltipPosition.bottom}}))},e.impacted?{title:a().createElement("div",{key:r},a().createElement(k(),{extraTitle:"".concat(t.formatMessage(s.Z.impacted),": "),date:e.impacted,type:"relative",tooltipProps:{position:V.TooltipPosition.bottom}}))}:{title:a().createElement(U.Tooltip,{key:r,content:a().createElement("span",null,t.formatMessage(s.Z.impacted)+": ",t.formatMessage(s.Z.nA))},a().createElement("span",null,t.formatMessage(s.Z.nA)))},{title:a().createElement("div",{key:r,style:{verticalAlign:"top"}},null!=e&&e.likelihood&&null!=e&&e.impact?a().createElement(U.Tooltip,{key:r,position:V.TooltipPosition.bottom,content:a().createElement("span",null,"The ",a().createElement("strong",null,"likelihood")," that this will be a problem is"," ",e.likelihood?q.FV[e.likelihood]:"unknown",".The ",a().createElement("strong",null,"impact")," of the problem would be"," ",e.impact?q.dz[e.impact]:"unknown"," ","if it occurred.")},a().createElement(R.Z,{value:e.total_risk,rest:{isCompact:!0}})):a().createElement(R.Z,{value:e.total_risk,rest:{isCompact:!0}}))}]},{fullWidth:!0,cells:[{title:a().createElement(J.Ge,{key:"child-".concat(r),report:{rule:e,resolution:e.resolution,details:e.extra_data}})}]}]}))},ye=function(e,t,r){var n=(0,M.Z)(e);if(t>=0&&!ae){var a=r===N.SortByDirection.asc?1:-1;n=(0,M.Z)(e).sort((function(e,r){var n=e[0].rule[q.P1[t]],l=r[0].rule[q.P1[t]];return t===q.am&&(n=new Date(e[0].rule.impacted||0),l=new Date(r[0].rule.impacted||0)),n>l?a:l>n?-a:0}))}else if(ae){var l=e.findIndex((function(e){var t=e[0].rule;return t.rule_id.split(".report")[0]===(0,H.Nq)(ae)&&t.extra_data.error_key===(0,H.o6)(ae)}));-1!==l&&n.unshift(n.splice(l,1)[0])}return n.flatMap((function(e,t){var r=(0,M.Z)(e);return ee&&0===t&&(e[0].isOpen=!0),e[1].parent=2*t,r}))},_e=[{label:"description",filterValues:{key:"text-filter",onChange:function(e,t){return Ee("text",t)},value:u.text}},{label:q.W2.total_risk.title,type:q.W2.total_risk.type,id:q.W2.total_risk.urlParam,value:"checkbox-".concat(q.W2.total_risk.urlParam),filterValues:{key:"".concat(q.W2.total_risk.urlParam,"-filter"),onChange:function(e,t){return Ee(q.W2.total_risk.urlParam,t)},value:u.total_risk,items:q.W2.total_risk.values}},{label:q.W2.category.title,type:q.W2.category.type,id:q.W2.category.urlParam,value:"checkbox-".concat(q.W2.category.urlParam),filterValues:{key:"".concat(q.W2.category.urlParam,"-filter"),onChange:function(e,t){return Ee(q.W2.category.urlParam,t)},value:u.category,items:q.W2.category.values}}],Ze={deleteTitle:t.formatMessage(s.Z.resetFilters),filters:(he=X({},u),delete he.sortIndex,delete he.sortDirection,function(e,r){var n=Object.entries(e);return n.length>0?n.reduce((function(e,n){if(r[n[0]]){var a=r[n[0]],l=Array.isArray(n[1])?n[1].map((function(e){var t=a.values.find((function(t){return t.value===String(e)}));return t?{name:t.text||t.label,value:e}:{name:e,value:e}})):[{name:a.values.find((function(e){return e.value===String(n[1])})).label,value:n[1]}];return[].concat((0,M.Z)(e),[{category:L()(a.title),chips:l,urlParam:a.urlParam}])}return"text"===n[0]?[].concat((0,M.Z)(e),(0,M.Z)(n[1].length>0?[{category:t.formatMessage(s.Z.description),chips:[{name:n[1],value:n[1]}],urlParam:n[0]}]:[])):e}),[]):[]}(he,q.W2)),onDelete:function(e,t,r){r?(0,G.aw)(u,G.OF,o):t.map((function(e){var t,r=(0,A.Z)({},e.urlParam,Array.isArray(u[e.urlParam])?u[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");r[e.urlParam].length>0?o(X(X({},u),r)):(t=e.urlParam,(0,Y.oo)(u,o,t))}))}};return a().createElement("div",{id:"cluster-recs-list-table","data-ouia-safe":!de},a().createElement(z.Z,{filterConfig:{items:_e,isDisabled:de||fe||0===y.length},pagination:a().createElement(a().Fragment,null,1===ie?"".concat(ie," ").concat(t.formatMessage(s.Z.recommendation)):"".concat(ie," ").concat(t.formatMessage(s.Z.recommendations))),activeFiltersConfig:de||fe||0===y.length?void 0:Ze}),a().createElement(N.Table,{"aria-label":"Cluster recommendations table",ouiaId:"recommendations",ouiaSafe:!de,onCollapse:function(e,t,r){void 0===t?(j(r),C(S.map((function(e){return X(X({},e),{},{isOpen:r})})))):C(S.map((function(e,n){return n===t?X(X({},e),{},{isOpen:r}):e})))},rows:fe||de||ge||ve?[{fullWidth:!0,cells:[{props:{colSpan:q.d3.length+1},title:fe?404===(null==b?void 0:b.status)?a().createElement(K.Eo,null):a().createElement(K.S3,null):de?a().createElement(Q.Z,null):ve?a().createElement(K.sV,null):a().createElement(K.A0,null)}]}]:pe?S:a().createElement(K.Te,null),cells:q.d3,sortBy:{index:u.sortIndex,direction:u.sortDirection},onSort:function(e,t,r){return me(!1),te(!1),le(""),o(X(X({},u),{},{sortIndex:t,sortDirection:r}))},variant:N.TableVariant.compact,isStickyHeader:!0,canCollapseAll:!0},a().createElement(N.TableHeader,null),a().createElement(N.TableBody,null)))};var te=r(219),re=r(86728),ne=r(36001),ae=r(21193),le=r(23218),ie=r(67463),oe=r(19694),ce=r(2443),se=r(84564),ue=r(31369),me=r(35451),de={critical:a().createElement(ae.J,{status:"danger"},a().createElement(se.default,null)),warning:a().createElement(ae.J,{status:"warning"},a().createElement(oe.default,null)),info:a().createElement(ae.J,{status:"info"},a().createElement(ue.default,null)),success:a().createElement(ae.J,{status:"success"},a().createElement(me.default,null))},fe={critical:a().createElement(ne.k,{alignItems:{default:"alignItemsCenter"}},de.critical," ",a().createElement("b",null,"Critical")),warning:a().createElement(ne.k,{alignItems:{default:"alignItemsCenter"}},de.warning," ",a().createElement("b",null,"Warning")),info:a().createElement(ne.k,{alignItems:{default:"alignItemsCenter"}},de.info," ",a().createElement("b",null,"Info"))},pe=["critical","warning","info"];const ve=function(){var e,t=(0,l.useParams)().clusterId,r=(0,c.nY)({id:t}).data,n=((null==r||null===(e=r.upgrade_recommendation)||void 0===e?void 0:e.upgrade_risks_predictors)||{}).alerts,i=void 0===n?[]:n;return a().createElement(N.TableComposable,{"aria-label":"Alerts firing table",variant:"compact",borders:!1},a().createElement(N.Thead,null,a().createElement(N.Tr,null,a().createElement(N.Th,{width:50},"Name"),a().createElement(N.Th,{width:25},"Status"),a().createElement(N.Th,{width:25},"Namespace"))),a().createElement(N.Tbody,null,i.map((function(e){var t=e.name,r=e.namespace,n=e.severity,l=e.url,i=void 0===l?"":l;return a().createElement(N.Tr,{key:t},a().createElement(N.Td,{className:"alerts__name"},""===i?t:a().createElement("a",{href:i},t)),a().createElement(N.Td,{className:"alerts__severity"},fe[n]),a().createElement(N.Td,{className:"alerts__namespace"},r))}))))},ge=function(){var e,t=(0,l.useParams)().clusterId,r=(0,c.nY)({id:t}).data,n=((null==r||null===(e=r.upgrade_recommendation)||void 0===e?void 0:e.upgrade_risks_predictors)||{}).operator_conditions,i=void 0===n?[]:n;return a().createElement(N.TableComposable,{"aria-label":"Cluster operators firing table",variant:"compact",borders:!1},a().createElement(N.Thead,null,a().createElement(N.Tr,null,a().createElement(N.Th,{width:50},"Name"),a().createElement(N.Th,{width:25},"Status"),a().createElement(N.Th,{width:25},"Message"))),a().createElement(N.Tbody,null,i.map((function(e){var t=e.name,r=e.condition,n=e.reason,l=e.url,i=void 0===l?"":l;return a().createElement(N.Tr,{key:t},a().createElement(N.Td,{class:"operators__name"},""===i?t:a().createElement("a",{href:i},t)),a().createElement(N.Td,{class:"operators__status"},a().createElement(ne.k,{alignItems:{default:"alignItemsCenter"}},a().createElement(ae.J,{status:"warning"},a().createElement(oe.default,null)),a().createElement("b",null,r))),a().createElement(N.Td,{class:"operators__message"},n||"-"))}))))},Ee=function(){var e,t=(0,l.useParams)().clusterId,r=(0,c.vl)({id:t}),i=r.isError,o=r.isUninitialized,s=r.isFetching,u=r.isSuccess,m=r.data,d=r.error,p=(null==m||null===(e=m.upgrade_recommendation)||void 0===e?void 0:e.upgrade_risks_predictors)||{},v=p.alerts,g=void 0===v?[]:v,E=p.operator_conditions,h=void 0===E?[]:E,b=0===g.length,y=0===h.length,_=(0,n.useState)(!0),Z=(0,f.Z)(_,2),w=Z[0],k=Z[1],P=(0,n.useState)(!0),T=(0,f.Z)(P,2),I=T[0],S=T[1];(0,n.useEffect)((function(){k(!b),S(!y)}),[m]);var C=u&&(g.length>0||h.length>0),O=u&&0===g.length&&0===h.length;return o||s?a().createElement(te.EmptyState,null,a().createElement(re.EmptyStateIcon,{variant:"container",component:ie.Spinner})):a().createElement(N.TableComposable,{"aria-label":"Update risks table",isExpandable:!0,variant:"compact",id:"update-risks-table",borders:C},a().createElement(N.Thead,null,a().createElement(N.Tr,null,a().createElement(N.Th,null),a().createElement(N.Th,null,"Name"))),C?a().createElement(a().Fragment,null,a().createElement(N.Tbody,{isExpanded:w},a().createElement(N.Tr,{className:"alerts__header"},a().createElement(N.Td,{expand:b?{}:{rowIndex:0,isExpanded:w,onToggle:function(){return k(!w)}}}),a().createElement(N.Td,null,a().createElement(ne.k,{alignItems:{default:"alignItemsCenter"}},b?de.success:de[pe.filter((function(e){return g.some((function(t){var r=t.severity;return e===r}))}))[0]],a().createElement("b",null,"Alerts firing"),a().createElement(le.Label,{isCompact:!0,id:"alerts-label",color:b?"green":"grey"},g.length," update risks")))),a().createElement(N.Tr,{isExpanded:w,className:"alerts__content"},a().createElement(N.Td,null),a().createElement(N.Td,null,a().createElement(N.ExpandableRowContent,null,a().createElement(ve,null))))),a().createElement(N.Tbody,{isExpanded:I},a().createElement(N.Tr,{className:"operators__header"},a().createElement(N.Td,{expand:y?void 0:{rowIndex:1,isExpanded:I,onToggle:function(){return S(!I)}}}),a().createElement(N.Td,null,a().createElement(ne.k,{alignItems:{default:"alignItemsCenter"}},y?de.success:a().createElement(ae.J,{status:"warning"},a().createElement(oe.default,null)),a().createElement("b",null,"Cluster operators"),a().createElement(le.Label,{isCompact:!0,id:"operator-conditions-label",color:y?"green":"grey"},h.length," update risks")))),a().createElement(N.Tr,{isExpanded:I,className:"operators__content"},a().createElement(N.Td,null),a().createElement(N.Td,null,a().createElement(N.ExpandableRowContent,null,a().createElement(ge,null)))))):a().createElement(N.Tbody,null,a().createElement(N.Tr,null,a().createElement(N.Td,{colSpan:2},O?a().createElement(K.Yr,null):i&&404===d.status?a().createElement(K.rl,null):a().createElement(ce.Z,null)))))};var he=r(27361),be=r.n(he);const ye=function(){var e=(0,o.Z)().analytics,t=(0,l.useParams)().clusterId,r=(0,c.nY)({id:t}),i=r.isError,s=r.isSuccess,u=r.data;return(0,n.useEffect)((function(){(i||s)&&e.track("ocp-upgrade-risks-viewed",{cluster_id:t,upgrade_recommended:be()(u,"upgrade_recommendation.upgrade_recommended",null)})}),[i,s]),a().createElement(a().Fragment,null)};var _e=r(79161);const Ze=function(e){var t=(0,_e.ji)(),r=e||(0,l.useParams)().clusterId,n=(0,c.S0)({id:r}),a=be()(n,"data.managed",!0);return t&&!a};var we=["recommendations","update_risks"];const ke=function(){var e=(0,i.Z)(),t=(0,l.useSearchParams)(),r=(0,f.Z)(t,1)[0],o=(0,l.useParams)().clusterId,c=Ze(o),u=(0,n.useState)("recommendations"),m=(0,f.Z)(u,2),d=m[0],p=m[1];return(0,n.useEffect)((function(){var e=r.get("active_tab");p(c&&we.includes(e)?e:"recommendations")}),[c]),a().createElement(C.Card,{isCompact:!0},a().createElement(O.CardBody,null,a().createElement(D.mQ,{activeKey:d,onSelect:function(e,t){(0,j.o)("active_tab",t),p(t)},"aria-label":"Cluster tabs"},a().createElement(x.O,{eventKey:"recommendations",title:e.formatMessage(s.Z.recommendations),ouiaId:"recommendations-tab"},"recommendations"===d&&a().createElement(ee,null)),c&&a().createElement(x.O,{eventKey:"update_risks",title:e.formatMessage(s.Z.updateRisks),ouiaId:"update-risks-tab"},"update_risks"===d&&a().createElement(a().Fragment,null,a().createElement(ye,null),a().createElement(Ee,null))))))};var Pe=r(42057),Te=r(29572),Ie=r(70044);const Se=function(){var e,t=(0,i.Z)(),r=(0,l.useParams)().clusterId,n=(0,c.vl)({id:r}),o=n.isError,u=n.isUninitialized,m=n.isFetching,d=n.isSuccess,f=n.data,p=n.error,v=(null==f||null===(e=f.upgrade_recommendation)||void 0===e?void 0:e.upgrade_risks_predictors)||{},g=v.alerts,E=void 0===g?[]:g,h=v.operator_conditions,b=void 0===h?[]:h,y=d&&(E.length>0||b.length>0),_=d&&0===E.length&&0===b.length;return u||m?a().createElement(a().Fragment,null):y?a().createElement(Ie.bZ,{variant:"warning",isInline:!0,title:t.formatMessage(s.Z.resolveUpdateRisks),ouiaId:"update-risks-alert"},t.formatMessage(s.Z.resolveUpdateRisksDesc,{strong:j.f})):_?a().createElement(Ie.bZ,{variant:"success",isInline:!0,title:t.formatMessage(s.Z.noKnownUpdateRisks),ouiaId:"update-risks-alert"}):o&&404===p.status?a().createElement(Ie.bZ,{variant:"warning",isInline:!0,title:t.formatMessage(s.Z.updateRisksNotCurrentlyAvailable),ouiaId:"update-risks-alert"},t.formatMessage(s.Z.updateRisksNotAvailableDesc)):a().createElement(a().Fragment,null)};var Ce=function(e){var t,r=e.cluster,n=e.clusterId,l=Ze(n);return a().createElement(a().Fragment,null,a().createElement(d.Z,{className:"pf-m-light ins-inventory-detail"},a().createElement(ne.k,{direction:{default:"column"}},a().createElement(Pe.B,null,a().createElement(S.Z,{current:(null==r||null===(t=r.data)||void 0===t?void 0:t.report.meta.cluster_name)||n}),a().createElement(I,null)),l&&a().createElement(Se,null))),a().createElement(Te.NP,null,a().createElement(ke,{cluster:r})))};Ce.propTypes={cluster:m().object.isRequired,clusterId:m().string.isRequired};const Oe=function(){var e=(0,i.Z)(),t=(0,l.useParams)().clusterId,r=(0,c.th)({id:t,includeDisabled:!1}),u=(0,o.Z)();return(0,n.useEffect)((function(){r.refetch()}),[t]),(0,n.useEffect)((function(){var n,a,l,i="".concat((null==r||null===(n=r.data)||void 0===n||null===(a=n.report)||void 0===a||null===(l=a.meta)||void 0===l?void 0:l.cluster_name)||t," - ").concat(e.formatMessage(s.Z.clusters));u.updateDocumentTitle(e.formatMessage(s.Z.documentTitle,{subnav:i}))}),[r,t]),a().createElement(Ce,{cluster:r,clusterId:t})}},76913:(e,t,r)=>{"use strict";r.d(t,{Lg:()=>Z,Lv:()=>I,U1:()=>S,WL:()=>P,_:()=>k,_F:()=>h,aM:()=>w,im:()=>b,mt:()=>y,oo:()=>T,yG:()=>_});var n=r(71002),a=r(45987),l=r(4942),i=r(42982),o=r(70885),c=r(48403),s=r.n(c),u=r(50361),m=r.n(u),d=(r(92950),r(81249)),f=r(59303),p=r(29299);function v(e){var t=function(e,t){if("object"!==(0,n.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!==(0,n.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,n.Z)(t)?t:String(t)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e,t){return Object.entries(t).every((function(t){var r=(0,o.Z)(t,2),n=r[0],a=r[1];switch(n){case"text":return e.description.toLowerCase().includes(a.toLowerCase());case f.W2.total_risk.urlParam:return a.includes(String(e.total_risk));case f.W2.category.urlParam:return e.tags.find((function(e){return a.includes(String(f.kT[e]))}));case f.W2.impact.urlParam:return a.includes(String(e.impact));case f.W2.impacting.urlParam:return!(a.length>0)||a.some((function(t){return"true"===t?e.impacted_clusters_count>0:"false"===t?0===e.impacted_clusters_count:void 0}));case f.W2.likelihood.urlParam:return a.includes(String(e.likelihood));case f.W2.rule_status.urlParam:return"all"===a||"disabled"===a&&e.disabled||"enabled"===a&&!e.disabled;case f.W2.res_risk.urlParam:return a.includes(String(e.resolution_risk));default:return!0}}))},b=function(e,t){return Object.entries(t).every((function(t){var r=(0,o.Z)(t,2),n=r[0],a=r[1];switch(n){case"text":return(e.cluster_name||e.cluster_id).toLowerCase().includes(a.toLowerCase());case f.RT.hits.urlParam:return 0===a.length&&parseInt(e.total_hit_count)>0||a.includes("all")||a.some((function(t){return e.hits_by_total_risk[t]>0}));case"version":return 0===a.length||a.includes(P(e.cluster_version));default:return!0}}))},y=function(e,t){var r=m()(e);return delete r.sortIndex,delete r.sortDirection,delete r.sort,delete r.offset,delete r.limit,(null==r?void 0:r.hits)&&0===r.hits.length&&delete r.hits,function(e,t){return Object.entries(e||{}).reduce((function(e,r){var n=(0,o.Z)(r,2),a=n[0],l=n[1];if(t[a]){var c=t[a],u=Array.isArray(l)?l.map((function(e){var t=c.values.find((function(t){return t.value===String(e)}));return t?{name:t.text||t.label,value:e}:{name:e,value:e}})):[{name:c.values.find((function(e){return e.value===String(l)})).label,value:l}];return[].concat((0,i.Z)(e),[{category:s()(c.title),chips:u,urlParam:c.urlParam}])}return"text"===a?[].concat((0,i.Z)(e),(0,i.Z)(l.length>0?[{category:"Name",chips:[{name:l,value:l}],urlParam:a}]:[])):"version"===a?[].concat((0,i.Z)(e),(0,i.Z)(l.length>0?[{category:"Version",chips:l.map((function(e){return{name:e,value:e}})),urlParam:a}]:[])):"namespace_name"===a?[].concat((0,i.Z)(e),(0,i.Z)(l.length>0?[{category:"Namespace name",chips:[{name:l,value:l}],urlParam:a}]:[])):"cluster_name"===a?[].concat((0,i.Z)(e),(0,i.Z)(l.length>0?[{category:"Cluster name",chips:[{name:l,value:l}],urlParam:a}]:[])):void 0}),[])}(r,t)},_=function(e){var t=new URLSearchParams(e);return Array.from(t).reduce((function(e,t){var r=(0,o.Z)(t,2),n=r[0],a=r[1];return E(E({},e),{},(0,l.Z)({},n,["text","first","rule_status","sort","cluster_name","namespace_name"].includes(n)?a:"true"===a||"false"===a?JSON.parse(a):a.split(",")))}),{})},Z=function(e){return{name:e.substring(e.startsWith("-")?1:0),direction:e.startsWith("-")?"desc":"asc"}},w=function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,l=new URL(window.location.origin+window.location.pathname);l.searchParams.set("sort",(e=n.sortIndex,t=a,r=n.sortDirection,["desc","asc"].includes(r)||console.error("Invalid sort parameters (is not asc nor desc)"),"".concat("asc"===r?"":"-").concat(t[e]))),Object.entries(n).forEach((function(e){var t=(0,o.Z)(e,2),r=t[0],n=t[1];return"sortIndex"!==r&&"sortDirection"!==r&&"sort"!==r&&""!==n&&!(Array.isArray(n)&&0===n.length)&&l.searchParams.set(r,n)})),window.history.replaceState(null,null,l.href)},k=function(e,t,r){return r*(0,d.compare)(e,t)},P=function(e){return(0,d.coerce)(void 0!==e&&(0,d.valid)((0,d.coerce)(e))?e:"0.0.0").version},T=function(e,t,r){var n=E(E({},e),{},{offset:0});n[r],t(E(E({},(0,a.Z)(n,[r].map(v))),"text"===r?{text:""}:"hits"===r?{hits:[]}:"version"===r?{version:[]}:{}))},I=function(e,t,r,n){return n.length>0?t(E(E({},e),{},{offset:0},(0,l.Z)({},r,n))):T(e,t,r)},S=function(e,t){var r=(0,p.Vs)(e.metadata.hits_by_severity,"general");return Object.entries(t).every((function(n){var a=(0,o.Z)(n,2),l=a[0],i=a[1];switch(l){case"cluster_name":return(e.cluster.display_name||e.cluster.uuid).toLowerCase().includes(i.toLowerCase());case"namespace_name":return(e.namespace.name||e.namespace.uuid).toLowerCase().includes(i.toLowerCase());case"general_severity":return 0===i.length||(0,p.mR)(r,t.general_severity);default:return!0}}))}},90670:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(76004),a=r(23218),l=r(45697),i=r.n(l),o=r(92950),c=r.n(o),s=r(86896),u=r(15967),m=function(e){var t=e.rule,r=(0,s.Z)();return c().createElement(c().Fragment,null,t.disabled&&c().createElement(n.Tooltip,{content:r.formatMessage(u.Z.ruleIsDisabledTooltip),position:n.TooltipPosition.right},c().createElement(a.Label,{color:"gray",isCompact:!0},r.formatMessage(u.Z.disabled))))};m.propTypes={rule:i().object};const d=m},52661:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(92950),a=r.n(n),l=r(2095),i=r(85962),o=r(24561);const c=function(){return a().createElement(l.Card,{ouiaId:"loading-skeleton"},a().createElement(i.CardBody,null,a().createElement(o.aV,null)))}},73845:(e,t,r)=>{"use strict";r.d(t,{F:()=>i});var n=r(92950),a=r.n(n),l=r(24561),i=function(){return a().createElement(l.ZP,{height:20},a().createElement("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"300",height:"20"}))}},29299:(e,t,r)=>{"use strict";r.d(t,{Vs:()=>o,g0:()=>s,mR:()=>c,og:()=>i});var n=r(44439),a=r.n(n);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=[{value:"critical",label:"Critical",iconColor:"var(--pf-global--danger-color--100)",textColor:"var(--pf-global--danger-color--100)",hasIcon:!0},{value:"important",label:"Important",iconColor:"var(--pf-global--palette--orange-300)",textColor:"var(--pf-global--palette--orange-400)",hasIcon:!0},{value:"moderate",label:"Moderate",iconColor:"var(--pf-global--warning-color--100)",textColor:"var(--pf-global--warning-color--200)",hasIcon:!0},{value:"low",label:"Low",iconColor:"var(--pf-global--Color--200)",textColor:"var(--pf-global--default-color--300)",hasIcon:!0},{value:"none",label:"Unknown"}],o=function(e,t){var r={1:"low",2:"moderate",3:"important",4:"critical"},n={};if("general"===t||"label"===t)for(var a in e)a in r&&(n[r[a]]=e[a]);else n=r[e];return n},c=function(e,t){var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}(t);try{for(n.s();!(r=n.n()).done;)if(e[r.value]>0)return!0}catch(e){n.e(e)}finally{n.f()}},s=function(e){var t=a().cloneDeep(e);return delete t.sortIndex,delete t.sortDirection,delete t.offset,delete t.limit,Object.values(t).filter((function(e){return!(0,n.isEmpty)(e)}))}},45467:()=>{},81754:()=>{},58392:()=>{},80598:()=>{},32857:()=>{},30187:()=>{},44839:()=>{},21064:()=>{},82014:()=>{},98379:()=>{},92084:()=>{},56024:()=>{},43390:()=>{},38299:()=>{},72816:()=>{},11177:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}}]);
//# sourceMappingURL=../sourcemaps/ClusterDetails.12cb0c3ed9e6ec8dd7c7bcdfeace0ad2.js.map