"use strict";(self.webpackChunkocp_advisor_frontend=self.webpackChunkocp_advisor_frontend||[]).push([[987],{75334:(e,t,r)=>{r.r(t),r.d(t,{default:()=>le});var n=r(93264),a=r.n(n),l=r(16530),c=r(4942),o=r(86896),i=r(45697),s=r.n(i),u=r(48716),m=r(39173),f=r(86350),d=r(62410),p=r(23218),g=r(34348),E=r(71369),y=r(84564),b=r(7193),v=r(39545),h=r(31728),O=r(59303),Z=r(30893),P=r(22663),S=r(52661),C=function(e){var t=e.rule,r=e.header,n=e.isDetailsPage,l=e.resolutionRisk,c=e.riskOfChangeDesc,i=(0,o.Z)();return a().createElement("div",{className:"advisor"},a().createElement(P.Z,{appName:"advisor",module:"./AdvisorRecommendationDetails",fallback:a().createElement(S.Z,null),rule:t,customItnl:!0,intlProps:i,isDetailsPage:n,header:r,resolutionRisk:l,riskOfChangeDesc:c}))};C.propTypes={header:s().any,isDetailsPage:s().bool.isRequired,rule:s().object.isRequired,resolutionRisk:s().number,riskOfChangeDesc:s().string};const D=C;var j=r(51957),k=r(86362),w=r(29439),T=r(88931),I=r(57277),M=r(77572),x=r(92223),N=r(32875),B=r(56161),F=r(7026),L=r(97530),R=r(17335),_=r(12321),z=r(76),q=r(13877),A=r(88292),Q=r(47778),U=r(21964),G=r(35451),H=r(34713),V=r(53472),W=function(){var e=(0,o.Z)();return n.createElement(U.EmptyState,null,n.createElement(U.EmptyStateIcon,{icon:y.default,color:b.Q7.value}),n.createElement(Q.Title,{headingLevel:"h4",size:"lg"},e.formatMessage(Z.Z.errorStateTitle)),n.createElement(U.EmptyStateBody,null,n.createElement(A.Stack,null,n.createElement(A.StackItem,null,e.formatMessage(Z.Z.errorStateBody)),n.createElement(A.StackItem,null,n.createElement(V.Z,null)))))},Y=function(){var e=(0,o.Z)();return n.createElement(U.EmptyState,null,n.createElement(U.EmptyStateIcon,{icon:G.default,color:H.gP.value}),n.createElement(Q.Title,{headingLevel:"h4",size:"lg"},e.formatMessage(Z.Z.noAffectedClustersTitle)),n.createElement(U.EmptyStateBody,null,e.formatMessage(Z.Z.noAffectedClustersBody)))},J=function(){var e=(0,o.Z)();return n.createElement(U.EmptyState,null,n.createElement(Q.Title,{headingLevel:"h5",size:"lg"},e.formatMessage(Z.Z.noMatchingClustersTitle)),n.createElement(U.EmptyStateBody,null,e.formatMessage(Z.Z.noMatchingClustersBody)))},K=r(28672);function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ee=function(e){var t=e.affectedClusters,r=(0,T.useDispatch)(),c=(0,T.useSelector)((function(e){return e.filters.affectedClustersState})),o=Number(c.limit),i=c.offset/c.limit+1,s=function(e){return r((0,K.B)(e))},u=t.isError,m=t.isUninitialized,f=t.isFetching,d=t.isSuccess,p=t.data,g=void 0===p?[]:p,E=(0,n.useState)([]),y=(0,w.Z)(E,2),b=y[0],v=y[1],h=(0,n.useState)([]),O=(0,w.Z)(h,2),Z=O[0],P=O[1],C=(0,n.useState)([]),D=(0,w.Z)(C,2),j=D[0],k=D[1],A={items:[{label:"Name",type:M.Yu.text,filterValues:{key:"name-filter",onChange:function(e,t){return function(e){var t=$($({},c),{},{text:e,offset:0});s(t)}(t)},value:c.text}}],isDisabled:u||g&&0===g.length},Q=function(e,t){var r=t*c.limit-c.limit;s($($({},c),{},{offset:r}))},U=function(e,t){s($($({},c),{},{limit:t}))};return(0,n.useEffect)((function(){var e=function(e,t){return e.filter((function(e){return e.includes(t.text)})).sort((function(e,r){return"asc"===t.sortDirection?e.localeCompare(r):r.localeCompare(e)}))}(g,c),t=function(e){return e.slice(o*(i-1),o*(i-1)+o)}(e),r=function(e,t){var r=e,n=r.findIndex((function(e){return"Name"===e.category}));return""===t?r.splice(n):-1===n?r.push({category:"Name",chips:[{name:t}]}):r[n]={category:"Name",chips:[{name:t}]},r}(j,c.text);v(e),P(t),k(r)}),[t,c]),a().createElement(a().Fragment,null,a().createElement(I.Z,{filterConfig:A,pagination:{itemCount:b.length,page:i,perPage:o,onSetPage:Q,onPerPageSelect:U},activeFiltersConfig:{filters:j,onDelete:function(){var e=$($({},c),{},{text:""});s(e)}}}),(m||f)&&a().createElement(S.Z,null),u&&a().createElement(B.Card,null,a().createElement(B.CardBody,null,a().createElement(W,null))),d&&0===g.length&&a().createElement(B.Card,null,a().createElement(B.CardBody,null,a().createElement(Y,null))),d&&g.length>0&&(b.length>0?a().createElement(L.i,{"aria-label":"Table of affected clusters",ouiaId:"affectedClustersTable",variant:"compact",cells:[{title:"Name",transforms:[F.sortable]}],rows:Z.map((function(e){return{cells:[a().createElement("span",{key:e},a().createElement(l.Link,{to:"/clusters/".concat(e)},e))]}})),sortBy:{index:c.sortIndex,direction:c.sortDirection},onSort:function(e,t,r){s($($({},c),{},{sortIndex:t,sortDirection:r}))}},a().createElement(_.x,null),a().createElement(R.R,null)):a().createElement(x.Z,null,a().createElement(z.Bullseye,null,a().createElement(J,null)))),a().createElement(N.Z,{isFooter:!0,className:"ins-c-inventory__table--toolbar"},a().createElement(q.tl,{variant:q.aM.bottom,itemCount:b.length,page:i,perPage:o,onSetPage:Q,onPerPageSelect:U,onPageInput:Q})))};ee.propTypes={affectedClusters:s().array};const te=function(){var e=(0,k.tf)((0,l.useParams)().recommendationId);return a().createElement(ee,{affectedClusters:e})};function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ae=function(e){var t=e.rule,r=e.match,l=(0,o.Z)(),c=t.isError,i=t.isUninitialized,s=t.isLoading,P=t.isFetching,C=t.isSuccess,k=t.data,w=(0,n.useCallback)((function(e){var t=e.error_keys[function(e){var t;return null===(t=e.split("|"))||void 0===t?void 0:t[1]}(r.params.recommendationId)],n=ne(ne(ne({},e),t),t.metadata);return n.impact={name:n.impact,impact:O.w7[n.impact]},delete n.metadata,delete n.error_keys,n}),[]),T=C?w(k.content):void 0;return a().createElement(a().Fragment,null,(i||s||P)&&a().createElement(f.Z,null,a().createElement(S.Z,null)),c&&a().createElement(f.Z,null,a().createElement(j.Z,{title:l.formatMessage(Z.Z.unableToConnect),text:l.formatMessage(Z.Z.unableToConnectDesc),icon:y.default,iconStyle:{color:b.Q7.value}})),C&&a().createElement(a().Fragment,null,a().createElement(u.Z,{className:"pageHeaderOverride"},a().createElement(v.Z,{current:(null==T?void 0:T.description)||r.params.recommendationId})),a().createElement(f.Z,{className:"pf-m-light pf-u-pt-sm"},a().createElement(D,{isOpenShift:!0,isDetailsPage:!0,rule:T,header:a().createElement(a().Fragment,null,a().createElement(m.Z,{title:a().createElement(a().Fragment,null,T.description," ",a().createElement(h.Z,{rule:T}))}),a().createElement("p",null,l.formatMessage(Z.Z.rulesDetailsPubishdate,{date:a().createElement(d.Z,{date:new Date(T.publish_date),type:"onlyDate"})}),T.tags&&(Array.isArray(T.tags)?a().createElement(E.LabelGroup,{className:"categoryLabels",numLabels:1},T.tags.reduce((function(e,t){return O.kT[t]&&e.push(a().createElement(p.Label,{key:"label-".concat(t),color:"blue"},O.W2.category.values[O.kT[t]-1].label)),e}),[])):a().createElement(p.Label,null,T.tags))))})),a().createElement(f.Z,null,a().createElement(a().Fragment,null,a().createElement(a().Fragment,null,a().createElement(g.Title,{className:"titleOverride",headingLevel:"h3",size:"2xl"},l.formatMessage(Z.Z.affectedClusters)),a().createElement(te,null))))))};ae.propTypes={rule:s().object.isRequired,match:s().object.isRequired};const le=function(){var e=(0,k.qv)(function(e){var t;return null===(t=e.split("|"))||void 0===t?void 0:t[0]}((0,l.useParams)().recommendationId));return(0,n.useEffect)((function(){e.refetch()}),[(0,l.useParams)().recommendationId]),a().createElement(ae,{rule:e,match:(0,l.useRouteMatch)()})}}}]);
//# sourceMappingURL=../sourcemaps/Recommendation.568a8e3b740bfe28ad5f.js.map