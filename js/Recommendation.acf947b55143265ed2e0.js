"use strict";(self.webpackChunkocp_advisor_frontend=self.webpackChunkocp_advisor_frontend||[]).push([[987],{10309:(e,t,r)=>{r.r(t),r.d(t,{default:()=>te});var n=r(93264),a=r.n(n),l=r(16530),c=r(15861),i=r(87757),o=r.n(i),u=r(86896),s=r(45697),m=r.n(s),f=r(48716),d=r(39173),p=r(86350),g=r(62410),b=r(23218),v=r(34348),E=r(71369),y=r(84564),h=r(7193),O=r(56276),P=r(31728),Z=r(59303),j=r(30893),C=r(1990),D=r(52661),S=r(4942);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,S.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=r(51957),F=r(86362),N=r(29439),q=r(77572),T=r(48114),_=r(92223),I=r(32875),L=r(56161),R=r(7026),B=r(97530),M=r(17335),z=r(12321),A=r(76),U=r(13877),V=r(51014),G=r(88931),H=r(28672);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){(0,S.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Y=function(e){var t=e.query,r=t.isError,c=t.isUninitialized,i=t.isFetching,o=t.isSuccess,u=t.data,s=void 0===u?[]:u,m=(0,G.useDispatch)(),f=(0,G.useSelector)((function(e){return e.filters.affectedClustersState})),d=function(e){return m((0,H.BC)(e))},p=(0,n.useState)([]),g=(0,N.Z)(p,2),b=g[0],v=g[1],E=(0,n.useState)([]),y=(0,N.Z)(E,2),h=y[0],O=y[1],P=(0,n.useState)([]),Z=(0,N.Z)(P,2),j=Z[0],C=Z[1],S=Number(f.limit),w=f.offset/f.limit+1,k={items:[{label:"Name",type:q.Yu.text,filterValues:{key:"name-filter",onChange:function(e,t){return function(e){var t=W(W({},f),{},{text:e,offset:0});d(t)}(t)},value:f.text}}],isDisabled:r||s&&0===s.length},x=function(e,t){var r=t*f.limit-f.limit;d(W(W({},f),{},{offset:r}))},F=function(e,t){d(W(W({},f),{},{limit:t}))};return(0,n.useEffect)((function(){var e=function(e,t){return e.filter((function(e){return null==e?void 0:e.cluster.includes(t.text)})).sort((function(e,r){return"asc"===t.sortDirection?null==e?void 0:e.cluster.localeCompare(null==r?void 0:r.cluster):null==r?void 0:r.cluster.localeCompare(null==e?void 0:e.cluster)}))}(s,f),t=function(e){return e.slice(S*(w-1),S*(w-1)+S)}(e),r=function(e,t){var r=e,n=r.findIndex((function(e){return"Name"===e.category}));return""===t?r.splice(n):-1===n?r.push({category:"Name",chips:[{name:t}]}):r[n]={category:"Name",chips:[{name:t}]},r}(j,f.text);v(e),O(t),C(r)}),[t,f]),a().createElement("div",{id:"affected-list-table"},a().createElement(T.Z,{filterConfig:k,pagination:{itemCount:b.length,page:w,perPage:S,onSetPage:x,onPerPageSelect:F},activeFiltersConfig:{filters:j,onDelete:function(){var e=W(W({},f),{},{text:""});d(e)}}}),(c||i)&&a().createElement(D.Z,null),r&&a().createElement(L.Card,null,a().createElement(L.CardBody,null,a().createElement(V.Te,null))),o&&0===s.length&&a().createElement(L.Card,null,a().createElement(L.CardBody,null,a().createElement(V.mi,null))),o&&s.length>0&&(b.length>0?a().createElement(B.i,{"aria-label":"Table of affected clusters",ouiaId:"affectedClustersTable",variant:"compact",cells:[{title:"Name",transforms:[R.sortable]}],rows:h.map((function(e){return{cells:[a().createElement("span",{key:null==e?void 0:e.cluter},a().createElement(l.Link,{to:"/clusters/".concat(null==e?void 0:e.cluster)},null==e?void 0:e.cluster))]}})),sortBy:{index:f.sortIndex,direction:f.sortDirection},onSort:function(e,t,r){d(W(W({},f),{},{sortIndex:t,sortDirection:r}))}},a().createElement(z.x,null),a().createElement(M.R,null)):a().createElement(_.Z,null,a().createElement(A.Bullseye,null,a().createElement(V.VA,null)))),a().createElement(I.Z,{isFooter:!0,className:"ins-c-inventory__table--toolbar"},a().createElement(U.Pagination,{variant:U.PaginationVariant.bottom,itemCount:b.length,page:w,perPage:S,onSetPage:x,onPerPageSelect:F,onPageInput:x})))};Y.propTypes={query:m().shape({isError:m().bool.isRequired,isUninitialized:m().bool.isRequired,isFetching:m().bool.isRequired,isSuccess:m().bool.isRequired,data:m().array})};const J=function(){var e=(0,F.tf)((0,l.useParams)().recommendationId);return a().createElement(Y,{query:e})};var K=r(11521),X=r.n(K),$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return X().post(e,r,{headers:t})},ee=function(e){var t=e.rule,r=e.match,n=(0,u.Z)(),l=t.isError,i=t.isUninitialized,s=t.isLoading,m=t.isFetching,S=t.isSuccess,w=t.data,N=r.params.recommendationId,q=S?function(e,t){var r,n=(null==e||null===(r=e.error_keys)||void 0===r?void 0:r[function(e){var t;return null===(t=e.split("|"))||void 0===t?void 0:t[1]}(t)])||{},a=k(k(k({},e),n),(null==n?void 0:n.metadata)||(null==e?void 0:e.metadata)||{});return a.impact={impact:a.impact},delete a.metadata,delete a.error_keys,a}(w.content,N):void 0;return a().createElement(a().Fragment,null,(i||s||m)&&a().createElement(p.Z,null,a().createElement(D.Z,null)),l&&a().createElement(p.Z,null,a().createElement(x.Z,{title:n.formatMessage(j.Z.unableToConnect),text:n.formatMessage(j.Z.unableToConnectDesc),icon:y.default,iconStyle:{color:h.Q7.value}})),!(i||s||m)&&S&&a().createElement(a().Fragment,null,a().createElement(f.Z,{className:"pageHeaderOverride"},a().createElement(O.Z,{current:(null==q?void 0:q.description)||N})),a().createElement(p.Z,{className:"pf-m-light pf-u-pt-sm"},a().createElement(C.Z,{isOpenShift:!0,isDetailsPage:!0,rule:q,header:a().createElement(a().Fragment,null,a().createElement(d.Z,{title:a().createElement(a().Fragment,null,q.description," ",a().createElement(P.Z,{rule:q}))}),a().createElement("p",null,n.formatMessage(j.Z.rulesDetailsPubishdate,{date:a().createElement(g.Z,{date:new Date(q.publish_date),type:"onlyDate"})}),q.tags&&(Array.isArray(q.tags)?a().createElement(E.LabelGroup,{className:"categoryLabels",numLabels:1},q.tags.reduce((function(e,t){return Z.kT[t]&&e.push(a().createElement(b.Label,{key:"label-".concat(t),color:"blue"},Z.W2.category.values[Z.kT[t]-1].label)),e}),[])):a().createElement(b.Label,null,q.tags)))),onFeedbackChanged:function(){var e=(0,c.Z)(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("".concat(F._n,"/v2/rating"),{},{rule:t,rating:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()})),a().createElement(p.Z,null,a().createElement(a().Fragment,null,a().createElement(a().Fragment,null,a().createElement(v.Title,{className:"titleOverride",headingLevel:"h3",size:"2xl"},n.formatMessage(j.Z.affectedClusters)),a().createElement(J,null))))))};ee.propTypes={rule:m().object.isRequired,match:m().object.isRequired};const te=function(){var e=(0,F.qv)((0,l.useParams)().recommendationId);return(0,n.useEffect)((function(){e.refetch()}),[(0,l.useParams)().recommendationId]),a().createElement(ee,{rule:e,match:(0,l.useRouteMatch)()})}}}]);
//# sourceMappingURL=../sourcemaps/Recommendation.f140195a11090bc8c78a27ebf3d8ce77.js.map