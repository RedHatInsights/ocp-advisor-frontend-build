(self.webpackChunkocpAdvisor=self.webpackChunkocpAdvisor||[]).push([[2339],{3522:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(28416),n=a.n(r),s=a(45697),l=a.n(s),i=a(86896),c=a(56800),o=a(58790),d=a(2550);const m=({current:e,workloads:t})=>{const a=(0,i.Z)(),r=(0,c.useLocation)().pathname.split("/");return n().createElement("div",null,n().createElement(o.Breadcrumb,{ouiaId:"detail","data-testid":"breadcrumb-item"},n().createElement(o.BreadcrumbItem,{className:"breadcrumb-item"},n().createElement(c.Link,{to:t?"../..":"..",relative:"path"},`${a.formatMessage(d.Z.insightsHeader)} ${r[4]}`)),n().createElement(o.BreadcrumbItem,{className:"breadcrumb-item",isActive:!0},e)))};m.propTypes={current:l().string,workloads:l().boolean};const u=m},57642:(e,t,a)=>{"use strict";a.d(t,{Lg:()=>g,Lv:()=>y,U1:()=>k,WL:()=>b,_:()=>E,_F:()=>d,aM:()=>h,im:()=>m,mt:()=>u,oo:()=>f,yG:()=>p});var r=a(48403),n=a.n(r),s=a(50361),l=a.n(s),i=(a(28416),a(81249)),c=a(81563),o=a(94608);const d=(e,t)=>Object.entries(t).every((([t,a])=>{switch(t){case"text":return e.description.toLowerCase().includes(a.toLowerCase());case c.W2.total_risk.urlParam:return a.includes(String(e.total_risk));case c.W2.category.urlParam:return e.tags.find((e=>a.includes(String(c.kT[e]))));case c.W2.impact.urlParam:return a.includes(String(e.impact));case c.W2.impacting.urlParam:return!(a.length>0)||a.some((t=>"true"===t?e.impacted_clusters_count>0:"false"===t?0===e.impacted_clusters_count:void 0));case c.W2.likelihood.urlParam:return a.includes(String(e.likelihood));case c.W2.rule_status.urlParam:return"all"===a||"disabled"===a&&e.disabled||"enabled"===a&&!e.disabled;case c.W2.res_risk.urlParam:return a.includes(String(e.resolution_risk));default:return!0}})),m=(e,t)=>Object.entries(t).every((([t,a])=>{switch(t){case"text":return(e.cluster_name||e.cluster_id).toLowerCase().includes(a.toLowerCase());case c.RT.hits.urlParam:return 0===a.length&&parseInt(e.total_hit_count)>0||a.includes("all")||a.some((t=>e.hits_by_total_risk[t]>0));case"version":return 0===a.length||a.includes(b(e.cluster_version));default:return!0}})),u=(e,t)=>{const a=l()(e);return delete a.sortIndex,delete a.sortDirection,delete a.sort,delete a.offset,delete a.limit,a?.hits&&0===a.hits.length&&delete a.hits,((e,t)=>Object.entries(e||{}).reduce(((e,a)=>{const[r,s]=a;if(t[r]){const a=t[r],l=Array.isArray(s)?s.map((e=>{const t=a.values.find((t=>t.value===String(e)));return t?{name:t.text||t.label,value:e}:{name:e,value:e}})):[{name:a.values.find((e=>e.value===String(s))).label,value:s}];return[...e,{category:n()(a.title),chips:l,urlParam:a.urlParam}]}return"text"===r?[...e,...s.length>0?[{category:"Name",chips:[{name:s,value:s}],urlParam:r}]:[]]:"version"===r?[...e,...s.length>0?[{category:"Version",chips:s.map((e=>({name:e,value:e}))),urlParam:r}]:[]]:"namespace_name"===r?[...e,...s.length>0?[{category:"Namespace name",chips:[{name:s,value:s}],urlParam:r}]:[]]:"cluster_name"===r?[...e,...s.length>0?[{category:"Cluster name",chips:[{name:s,value:s}],urlParam:r}]:[]]:void 0}),[]))(a,t)},p=e=>{const t=new URLSearchParams(e);return Array.from(t).reduce(((e,[t,a])=>({...e,[t]:["text","first","rule_status","sort","cluster_name","namespace_name","description","object_id"].includes(t)?a:"true"===a||"false"===a?JSON.parse(a):a.split(",")})),{})},g=e=>({name:e.substring(e.startsWith("-")?1:0),direction:e.startsWith("-")?"desc":"asc",description:e.substring(e.startsWith("-")?1:0),object_id:e.substring(e.startsWith("-")?1:0)}),h=(e={},t)=>{const a=new URL(window.location.origin+window.location.pathname);var r,n,s;a.searchParams.set("sort",(r=e.sortIndex,n=t,s=e.sortDirection,["desc","asc"].includes(s)||console.error("Invalid sort parameters (is not asc nor desc)"),`${"asc"===s?"":"-"}${n[r]}`)),Object.entries(e).forEach((([e,t])=>"sortIndex"!==e&&"sortDirection"!==e&&"sort"!==e&&""!==t&&!(Array.isArray(t)&&0===t.length)&&a.searchParams.set(e,t))),window.history.replaceState(null,null,a.href)},E=(e,t,a)=>a*(0,i.compare)(e,t),b=e=>(0,i.coerce)(void 0!==e&&(0,i.valid)((0,i.coerce)(e))?e:"0.0.0").version,f=(e,t,a)=>{const{[a]:r,...n}={...e,offset:0};t({...n,..."text"===a?{text:""}:"hits"===a?{hits:[]}:"version"===a?{version:[]}:"object_id"===a?{object_id:""}:{}})},y=(e,t,a,r)=>r.length>0?t({...e,offset:0,[a]:r}):f(e,t,a),k=(e,t)=>{const a=(0,o.Vs)(e.metadata.hits_by_severity,"general");return Object.entries(t).every((([r,n])=>{switch(r){case"cluster_name":return(e.cluster.display_name||e.cluster.uuid).toLowerCase().includes(n.toLowerCase());case"namespace_name":return(e.namespace.name||e.namespace.uuid).toLowerCase().includes(n.toLowerCase());case"severity":return 0===n.length||(0,o.mR)(a,t.severity);default:return!0}}))}},83920:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(28416),n=a.n(r),s=a(67073),l=a(24561);const i=()=>n().createElement(s.Card,{ouiaId:"loading-skeleton"},n().createElement(s.CardBody,null,n().createElement(l.aV,null)))},6554:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ge});var r=a(28416),n=a.n(r),s=a(63456),l=a(14799),i=a(45041),c=a(50318),o=a(3522),d=a(93999),m=a(96128),u=a(32819),p=a(21888),g=a(62410),h=a(45697),E=a.n(h);const b=({workloadData:e,namespaceId:t,clusterId:a})=>{const{isUninitialized:r,isFetching:s,data:l}=e;return n().createElement(d.Grid,{id:"workload-header",md:12,hasGutter:!0},n().createElement(d.GridItem,{span:8},n().createElement(c.Title,{size:"2xl",headingLevel:"h1",id:"workloads-header-title",ouiaId:"workloads-name"},r||s?n().createElement(n().Fragment,null,n().createElement(u.Z,{size:"sm"}),n().createElement(u.Z,{size:"sm"})):n().createElement(n().Fragment,null,n().createElement("p",null,l?.cluster?.display_name||a),n().createElement("p",null,l?.namespace?.name||t)))),n().createElement(d.GridItem,null,n().createElement(m.Stack,null,n().createElement(m.StackItem,{id:"workload-header-uuid"},n().createElement("span",null,"Cluster UUID:")," ",n().createElement("span",null,a)," ",n().createElement("span",null,"Namespace UUID:")," ",n().createElement("span",null,t)),n().createElement(m.StackItem,{id:"workload-header-last-seen"},n().createElement("span",null,"Last seen: "),n().createElement("span",null,r||s?n().createElement(p.F,null):l?.metadata?.last_checked_at?n().createElement(g.Z,{date:l.metadata.last_checked_at,type:"exact"}):n().createElement(n().Fragment,null,"Unknown"))))))};b.propTypes={clusterId:E().string.isRequired,namespaceId:E().string.isRequired,workloadData:E().shape({isUninitialized:E().bool.isRequired,isFetching:E().bool.isRequired,data:E().shape({metadata:E().shape({last_checked_at:E().string}),namespace:E().shape({uuid:E().string,name:E().string}),cluster:E().shape({uuid:E().string,display_name:E().string}),status:E().string})})};const f=({workload:e,namespaceId:t,clusterId:a})=>n().createElement(b,{workloadData:e,namespaceId:t,clusterId:a});f.propTypes={clusterId:E().string.isRequired,namespaceId:E().string.isRequired,workload:E().shape({isUninitialized:E().bool.isRequired,isFetching:E().bool.isRequired,data:E().shape({metadata:E().shape({last_checked_at:E().string}),namespace:E().shape({uuid:E().string,name:E().string}),cluster:E().shape({uuid:E().string,display_name:E().string}),status:E().string})})};const y=f;var k=a(75863),_=a(35981),v=a(49004),w=a(58027),I=a(77357),C=a(81563),P=a(83920),S=a(91306),j=a(90693),x=a(52251),O=a.n(x),D=a(45106),L=a.n(D),R=a(80081),T=a.n(R),N=a(44442),M=a(67073),W=a(4424),A=a(28900),q=a(73813),F=a(22454),B=a(5697),V=a(51630),U=a(8128),Z=a(15173),$=a(75521),z=a(26090),H=a(55471),G=a.n(H),J=a(29810),K=a(86706),Q=a(72668),Y=a(57642),X=a(90766),ee=a(94608),te=a(13877);const ae=({objects:e,objectsWithNames:t})=>{const a=e||[],s=(0,K.useDispatch)(),[l,i]=(0,r.useState)(!1),[c,o]=(0,r.useState)([]),[d,m]=(0,r.useState)([]),[u,p]=(0,r.useState)(!1),g=(0,K.useSelector)((({filters:e})=>e.workloadsObjectsListState)),h=Math.floor(g.offset/g.limit)+1,E=g.limit,b=e=>s((0,Q.u2)(e)),f=d.length>0,y=t,k=!u,_={showDeleteButton:l,deleteTitle:"Reset filters",filters:(()=>{const e={...g};return delete e.sortIndex,delete e.sortDirection,(0,ee.lM)(e,{label:"Object ID",type:"text",title:"object ID",urlParam:"object_id"},{label:"Object name",type:"text",title:"object name",urlParam:"display_name"})})(),onDelete:(e,t,a)=>{a?(0,Q.aw)(g,Q.kG,b):t.map((e=>{const t={[e.urlParam]:Array.isArray(g[e.urlParam])?g[e.urlParam].filter((t=>String(t)!==String(e.chips[0].value))):""};var a;t[e.urlParam].length>0?b({...g,...t}):(a=e.urlParam,(0,Y.oo)(g,b,a))}))}};(0,r.useEffect)((()=>{o(((e,t)=>e.filter((e=>(0,ee.Q$)(e,t))))(a,g))}),[a,g]),(0,r.useEffect)((()=>{m(c.slice(E*(h-1),E*(h-1)+E)),i((0,ee.wW)(g)),p(!0)}),[c,g.limit,g.offset]);const v=(e,t)=>{const a=t*g.limit-g.limit;b({...g,offset:a})},w=(e,t)=>{t!==g.limit&&b({...g,limit:t,offset:0})};return n().createElement("div",{id:"objects-list-table"},n().createElement(I.Z,{pagination:{page:h,perPage:E,onSetPage:v,onPerPageSelect:w,isCompact:!0,ouiaId:"pager",itemCount:c.length},filterConfig:{items:(e=>e?[{label:"Object name",type:"text",filterValues:{key:"display_name",onChange:(e,t)=>b({...g,offset:0,display_name:t}),value:g.display_name,placeholder:"Filter by name"}}]:[{label:"Object ID",type:"text",filterValues:{key:"object_id",onChange:(e,t)=>b({...g,offset:0,object_id:t}),value:g.object_id,placeholder:"Filter by Object ID"}}])(y)},activeFiltersConfig:_}),k?n().createElement(P.Z,null):f&&!y?n().createElement("div",null,n().createElement(B.i,{"aria-label":"Cell widths",variant:"compact"},n().createElement(V.h,null,n().createElement(U.Tr,null,n().createElement(Z.Th,{width:60},C.VM.object),n().createElement(Z.Th,{width:30},C.VM.kind))),n().createElement($.p,null,d?.map(((e,t)=>n().createElement(U.Tr,{key:t},n().createElement(z.Td,{dataLabel:C.VM.object},e.uid),n().createElement(z.Td,{dataLabel:C.VM.kind},e.kind)))))),d.length>0?n().createElement(X.Pagination,{ouiaId:"pager",itemCount:c.length,page:h,perPage:E,onSetPage:v,onPerPageSelect:w,onPageInput:v,widgetId:"pagination-options-menu-bottom",variant:te.aM.bottom}):n().createElement(X.Pagination,{itemCount:0,perPage:!0,page:!0,onSetPage:!0,onPerPageSelect:!0,isDisabled:!0})):f&&y?n().createElement("div",null,n().createElement(B.i,{"aria-label":"Cell widths",variant:"compact"},n().createElement(V.h,null,n().createElement(U.Tr,null,n().createElement(Z.Th,{width:60},C.VM.display_name),n().createElement(Z.Th,{width:30},C.VM.kind))),n().createElement($.p,null,d?.map(((e,t)=>n().createElement(U.Tr,{key:t},n().createElement(z.Td,{dataLabel:C.VM.display_name},e.display_name),n().createElement(z.Td,{dataLabel:C.VM.kind},e.kind)))))),d.length>0?n().createElement(X.Pagination,{ouiaId:"pager",itemCount:c.length,page:h,perPage:E,onSetPage:v,onPerPageSelect:w,onPageInput:v,widgetId:"pagination-options-menu-bottom",variant:te.aM.bottom}):n().createElement(X.Pagination,{itemCount:0,perPage:!0,page:!0,onSetPage:!0,onPerPageSelect:!0,isDisabled:!0})):n().createElement(S.Ke,null))};ae.propTypes={objects:E().arrayOf(E().shape({kind:E().string,uid:E().string})),objectsWithNames:E().arrayOf(E().shape({kind:E().string,uid:E().string,display_name:E().string}))};const re=({isModalOpen:e,setIsModalOpen:t,objects:a,objectsWithNames:r})=>{const s=(0,K.useDispatch)(),l=(0,K.useSelector)((({filters:e})=>e.workloadsObjectsListState)),i=e=>s((0,Q.u2)(e));return n().createElement(J.Modal,{isOpen:e,onClose:()=>(t(!1),void(0,Q.aw)(l,Q.kG,i)),variant:"medium",title:"Objects"},n().createElement(ae,{objects:a,objectsWithNames:r}))},ne=re;re.propTypes={isModalOpen:E().bool,setIsModalOpen:E().func,objects:E().arrayOf(E().shape({kind:E().string,uid:E().string,display_name:E().string})),objectsNamesArePresent:E().arrayOf(E().shape({kind:E().string,uid:E().string,display_name:E().string})),objectsWithNames:E().bool};const se=()=>{const e='oc get namespace -o jsonpath=\'{range .items[*]}{.metadata.name}{"\\t"}{.metadata.uid}{"\\n"}{end}\'',t='oc -n <namespace> get <resourceKind> -o jsonpath=\'{range .items[*]}{.metadata.name}{"\\t"}{.metadata.uid}{"\\n"}{end}\'',[a,r]=n().useState(!1);return n().createElement(n().Fragment,null,n().createElement(A.CodeBlock,{actions:(s=e.concat("\n",t),n().createElement(n().Fragment,null,n().createElement(A.CodeBlockAction,null,n().createElement(W.ClipboardCopyButton,{id:"basic-copy-button",textId:"code-content","aria-label":"Copy to clipboard",onClick:e=>(((e,t)=>{navigator.clipboard.writeText(t.toString())})(0,s),void r(!0)),exitDelay:a?1500:600,maxWidth:"110px",variant:"plain",onTooltipHidden:()=>r(!1)},a?"Successfully copied to clipboard!":"Copy to clipboard")))),className:"pf-v5-u-mt-md"},n().createElement(A.CodeBlockCode,null,e),n().createElement(A.CodeBlockCode,null,t)));var s},le=({more_info:e,resolution:t,objects:a,namespaceName:s,reason:l,extra_data:i})=>{const c=Array.isArray(a)&&a.length>0,o=e.length>0,[d,u]=(0,r.useState)(!1),p=a?.filter((e=>e.display_name));return n().createElement(M.Card,{className:"ins-c-report-details",style:{boxShadow:"none"}},n().createElement(M.CardBody,null,n().createElement(ne,{isModalOpen:d,setIsModalOpen:u,objects:a,objectsWithNames:!!p}),n().createElement(m.Stack,{className:"ins-c-report-details__cards-stack","widget-type":"InsightsRulesCard",hasGutter:!0},n().createElement(m.StackItem,null,n().createElement(M.Card,{isCompact:!0,isPlain:!0},n().createElement(M.CardHeader,null,n().createElement(F.Icon,null,n().createElement(O(),{className:"ins-c-report-details__icon"})),n().createElement("strong",null,"Detected issues")),n().createElement(M.CardBody,null,n().createElement(G(),{template:l,definitions:i})))),c&&n().createElement(n().Fragment,null,n().createElement(q.Divider,null),n().createElement(m.StackItem,null,n().createElement(M.Card,{isCompact:!0,isPlain:!0},n().createElement(M.CardHeader,null,n().createElement(F.Icon,null,n().createElement(T(),{className:"ins-c-report-details__icon"})),n().createElement("strong",null,"Steps to resolve")),n().createElement(M.CardBody,null,n().createElement(G(),{template:t,definitions:i}),n().createElement(B.i,{borders:"compactBorderless","aria-label":"Objects table"},n().createElement(V.h,null,n().createElement(U.Tr,null,n().createElement(Z.Th,{modifier:"fitContent"},C.VM.object),n().createElement(Z.Th,{modifier:"fitContent"},C.VM.kind))),n().createElement($.p,null,a.slice(0,3).map(((e,t)=>n().createElement(U.Tr,{key:t},n().createElement(z.Td,{dataLabel:C.VM.object},e.uid),n().createElement(z.Td,{dataLabel:C.VM.kind},e.kind)))))),n().createElement(N.Button,{variant:"link",isInline:!0,onClick:()=>u(!0)},"View all objects"))))),!s&&n().createElement(n().Fragment,null,n().createElement(M.CardHeader,null,n().createElement("strong",null,"Note: "),"Red Hat avoids gathering and processing namespace and resource names as these may reveal confidential information. Namespaces and resources are identified by their UIDs instead. You can use in-cluster commands like the ones below to translate UIDs of affected resources to their names."),n().createElement(M.CardBody,null,n().createElement(se,null))),o&&n().createElement(n().Fragment,null,n().createElement(q.Divider,null),n().createElement(m.StackItem,null,n().createElement(M.Card,{isCompact:!0,isPlain:!0},n().createElement(M.CardHeader,null,n().createElement(F.Icon,null,n().createElement(L(),{className:"ins-c-report-details__icon"})),n().createElement("strong",null,"Additional info")),n().createElement(M.CardBody,null,n().createElement(G(),{template:e,definitions:i}))))))))},ie=le;le.propTypes={more_info:E().string.isRequired,resolution:E().string.isRequired,objects:E().arrayOf({kind:E().string,uid:E().string}),extra_data:E().shape({check_name:E().string.isRequired,check_url:E().string.isRequired}),namespaceName:E().string.isRequired,reason:E().string.isRequired};var ce=a(56800);const oe=({workload:e,namespaceName:t})=>{const a=(0,K.useDispatch)(),{isError:s,isUninitialized:l,isFetching:i,isSuccess:c,data:o,error:d}=e,m=o?.recommendations||[],u=s,p=c,h=p&&0===m.length,[E,b]=(0,r.useState)(!1),[f,y]=(0,r.useState)([]),[x,O]=(0,r.useState)(!0),[D,L]=(0,r.useState)([]),[R,T]=(0,r.useState)(!1),[N,M]=(0,r.useState)(!1),[W,A]=(0,r.useState)(!0),q=l||i||!R,{search:F}=(0,ce.useLocation)(),B=(0,K.useSelector)((({filters:e})=>e.workloadsRecsListState)),V=0===f.length,U=e=>a((0,Q.cH)(e));(0,r.useEffect)((()=>{y(z(m,B))}),[o,B]),(0,r.useEffect)((()=>{L($(f,B.sortIndex,B.sortDirection)),M((0,ee.wW)(B)),T(!0)}),[f]);const Z=(0,C.PL)(B,((e,t)=>{A(!1),(0,ee.sI)(B,U,e,t)}));(0,r.useEffect)((()=>{if(F&&x){const e=(0,Y.yG)(F);if(e.sort){const t=(0,Y.Lg)(e.sort);e.sortIndex=C.Db.indexOf(t.description),e.sortDirection=t.direction}e.total_risk&&!Array.isArray(e.total_risk)&&(e.total_risk=[`${e.total_risk}`]),U({...B,...e})}O(!1)}),[]),(0,r.useEffect)((()=>{x||(0,Y.aM)(B,C.Db)}),[B,x]);const $=(e,t,a)=>{const r=(0,ee.ke)(t,a,e);return(0,ee.l8)(r,W)},z=(e,a)=>{T(!1);const r=(0,ee.wW)(a),s=new Set(D.filter((e=>e?.isOpen)).map((e=>e?.rule?.details)));return e.filter((e=>!r||(0,ee.y4)(e,a))).map(((e,a)=>[{rule:e,isOpen:E||s?.has(e?.details),cells:[{title:e.details},{title:n().createElement("div",{key:a},n().createElement(j.Z,{value:e.total_risk,rest:{isCompact:!0}}))},{title:e.objects.length},{title:n().createElement("div",{key:a},n().createElement(g.Z,{date:e.modified,type:"relative"}))}]},{cells:[{title:n().createElement(ie,{more_info:e.more_info,resolution:e.resolution,objects:e.objects,namespaceName:t,reason:e.reason,extra_data:e.extra_data})}],fullWidth:!0}]))},H={showDeleteButton:N,deleteTitle:"Reset filters",filters:(()=>{const e={...B};return delete e.sortIndex,delete e.sortDirection,(0,ee.lM)(e,C.Oq)})(),onDelete:(e,t,a)=>{a?(0,Q.aw)(B,Q.J2,U):t.map((e=>{const t={[e.urlParam]:Array.isArray(B[e.urlParam])?B[e.urlParam].filter((t=>String(t)!==String(e.chips[0].value))):""};var a;t[e.urlParam].length>0?U({...B,...t}):(a=e.urlParam,(0,ee.p5)(B,U,a))}))}};return n().createElement("div",{id:"workload-recs-list-table"},n().createElement(I.Z,{filterConfig:{items:Z,isDisabled:q||u||h||0===m.length},pagination:n().createElement("span",{className:"pf-u-font-weight-bold"},1===f?.length?`${f.length} Recommendation`:`${f.length} Recommendations`),activeFiltersConfig:q||u||h||0===m.length?void 0:H}),n().createElement(_.i,{"aria-label":"Workload recommendations table",ouiaId:"workload-recommendations",cells:C.x2,ouiaSafe:!q,onCollapse:(e,t,a)=>{void 0===t?(b(a),L(D.map((e=>({...e,...Object.hasOwn(e,"parent")?null:{isOpen:a}}))))):L(D.map(((e,r)=>r===t?{...e,isOpen:a}:e)))},rows:u||q||h||V?[{fullWidth:!0,cells:[{props:{colSpan:C.x2.length+1},title:u?404===d?.status?n().createElement(S.So,null):n().createElement(S.fe,null):q?n().createElement(P.Z,null):V?n().createElement(S.Be,null):n().createElement(S.So,null)}]}]:p?D:n().createElement(S.Te,null),variant:k.B.compact,isStickyHeader:!0,canCollapseAll:!0,sortBy:{index:B.sortIndex,direction:B.sortDirection},onSort:(e,t,a)=>{T(!1),A(!1),U({...B,sortIndex:t,sortDirection:a})}},n().createElement(v.x,null),n().createElement(w.R,null)))},de=oe;oe.propTypes={workload:E().shape({isUninitialized:E().bool.isRequired,isFetching:E().bool.isRequired,isError:E().bool.isRequired,isSuccess:E().bool.isRequired,error:E().object,data:E().shape({namespace:E().shape({uuid:E().string,name:E().string}),cluster:E().shape({uuid:E().string,display_name:E().string}),status:E().string,recommendations:E().arrayOf(E().shape({check:E().string,description:E().string,objects:E().arrayOf(E().shape({kind:E().string,uid:E().string})),remediation:E().string}))})}),namespaceName:E().string.isRequired};const me=({workload:e,namespaceId:t,clusterId:a})=>{const r=`${e?.data?.cluster?.display_name||a} | ${e?.data?.namespace?.name||t}`;return n().createElement(n().Fragment,null,n().createElement(s.Z,{className:"pf-m-light ins-inventory-detail"},n().createElement(l.Flex,{direction:{default:"column"}},n().createElement(l.FlexItem,null,n().createElement(o.Z,{current:r,workloads:"true"}),n().createElement(y,{workload:e,namespaceId:t,clusterId:a})))),n().createElement(i.PageSection,null,n().createElement(c.Title,{className:"pf-u-mb-lg",headingLevel:"h3",size:"2xl"},"Recommendations"),n().createElement(de,{workload:e,namespaceName:e?.data?.namespace?.name})))};me.propTypes={clusterId:E().string.isRequired,namespaceId:E().string.isRequired,workload:E().shape({isUninitialized:E().bool.isRequired,isFetching:E().bool.isRequired,data:E().shape({namespace:E().shape({uuid:E().string,name:E().string}),cluster:E().shape({uuid:E().string,display_name:E().string}),status:E().string})})};var ue=a(11042),pe=a(55140);const ge=()=>{const e=(0,pe.Z)(),{namespaceId:t,clusterId:a}=(0,ce.useParams)(),s=(0,ue.k0)({namespaceId:t,clusterId:a});return(0,r.useEffect)((()=>{s.refetch()}),[t,a]),(0,r.useEffect)((()=>{const r="ok"===s?.data?.status?`${s?.data?.cluster.display_name} | ${s?.data?.namespace.name} - Workloads`:`${a} | ${t} - Workloads`;e.updateDocumentTitle(`${r} - OCP Advisor | Red Hat Insights`)}),[s,t,a]),n().createElement(me,{workload:s,namespaceId:t,clusterId:a})}},21888:(e,t,a)=>{"use strict";a.d(t,{F:()=>l});var r=a(28416),n=a.n(r),s=a(24561);const l=()=>n().createElement(s.ZP,{height:20},n().createElement("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"300",height:"20"}))},94608:(e,t,a)=>{"use strict";a.d(t,{Q$:()=>y,Vs:()=>d,ke:()=>b,l8:()=>f,lM:()=>h,mR:()=>m,p5:()=>k,sI:()=>_,wW:()=>u,y4:()=>v});var r=a(48585),n=a(14176),s=a.n(n),l=a(50361),i=a.n(l),c=a(41609),o=a.n(c);const d=(e,t)=>{const a={1:"low",2:"moderate",3:"important",4:"critical"};let r={};if("general"===t||"label"===t)for(const t in e)t in a&&(r[a[t]]=e[t]);else r=a[e];return r},m=(e,t)=>{for(const a of t)if(e[a]>0)return!0},u=e=>{const t=i()(e);return delete t.sortIndex,delete t.sortDirection,delete t.offset,delete t.limit,delete t.sort,!!Object.values(t).filter((e=>!o()(e))).length},p=e=>e?.charAt(0).toUpperCase()+e?.slice(1),g=(e,t)=>{if(e.values){const a=e.values.find((e=>e.value===String(t)));return a?{name:a.label||a.text,value:t}:{name:t,value:t}}return{name:t,value:t}},h=(e,t)=>Object.entries(e).reduce(((e,[a,r])=>{if(t[a]){const n=t[a];if(Array.isArray(r)&&r.length>0||"string"==typeof r&&""!==r.trim()){const t=Array.isArray(r)?r.map((e=>g(n,e))):[g(n,r)];e.push({category:p(n.label),chips:t,urlParam:n.urlParam})}}else"display_name"===a&&""!==r.trim()?e.push({category:p(a.replace("display_name","Name")),chips:[{name:r,value:r}],urlParam:"display_name"}):"description"!==a&&"object_id"!==a||""===r.trim()||e.push({category:p(a.replace("_"," ")),chips:[{name:r,value:r}],urlParam:a});return e}),[]),E=(e,t)=>{const a=t[0].rule;switch(e){case 1:return a.details;case 2:return a.total_risk;case 3:return a.objects.length;case 4:return a.modified}},b=(e,t,a)=>e>=1?[...a]?.sort(((a,n)=>{const s=t===r.B.asc?1:-1;return E(e,a)>E(e,n)?s:E(e,n)>E(e,a)?-s:0})):[...a],f=(e,t)=>e.flatMap(((e,a)=>{const r=[...e];return t&&0===a&&(e[0].isOpen=!0),e[1].parent=2*a,r})),y=(e,t)=>{const a=s()(i()(t),o());return Object.entries(a).every((([t,a])=>{switch(t){case"display_name":return a&&e?.display_name?.toLowerCase().includes(a.toLowerCase());case"object_id":return a&&e?.uid?.toLowerCase().includes(a.toLowerCase());default:return!0}}))},k=(e,t,a)=>{const{[a]:r,...n}={...e};t({...n,..."description"===a?{description:""}:"total_risk"===a?{total_risk:[]}:"object_id"===a?{object_id:""}:{}})},_=(e,t,a,r)=>r.length>0?t({...e,[a]:r}):k(e,t,a),v=(e,t)=>{const a=s()(i()(t),o());return Object.entries(a).every((([t,a])=>{switch(t){case"description":return a&&e.details.toLowerCase().includes(a.toLowerCase());case"object_id":return a&&e.objects.some((e=>e.uid.toLowerCase().includes(a.toLowerCase())));case"total_risk":return a&&a.includes(String(e.total_risk));default:return!0}}))}},65088:()=>{},58392:()=>{},32857:()=>{},28992:()=>{},30187:()=>{},90479:()=>{},21626:()=>{},8572:()=>{},98379:()=>{},46928:()=>{},91993:()=>{},54994:()=>{},44690:()=>{},37494:()=>{},87234:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}}]);
//# sourceMappingURL=../sourcemaps/Workload.578ffc510e15d8cec4fc790e00f8fce9.js.map