(self.webpackChunkocp_advisor_frontend=self.webpackChunkocp_advisor_frontend||[]).push([[619],{42146:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>de});var l=a(93264),n=a.n(l),r=a(86896),i=a(45697),s=a.n(i),o=a(58788),c=a(48794),u=a(48716),d=a(86350),m=a(36873);const p=(0,a(50049).vU)({documentTitle:{id:"documentTitle",defaultMessage:[{type:1,value:"subnav"},{type:0,value:" - OCP Advisor | Red Hat Insights"}]},clusters:{id:"clusters",defaultMessage:[{type:0,value:"Clusters"}]},added:{id:"added",defaultMessage:[{type:0,value:"Added"}]},loading:{id:"loading",defaultMessage:[{type:0,value:"Loading"}]},lastSeen:{id:"lastSeen",defaultMessage:[{type:0,value:"Last seen"}]},actions:{id:"actions",defaultMessage:[{type:0,value:"Actions"}]},name:{id:"name",defaultMessage:[{type:0,value:"Name"}]},filterBy:{id:"filterBy",defaultMessage:[{type:0,value:"Filter by name"}]},totalRisk:{id:"totalRisk",defaultMessage:[{type:0,value:"Total risk"}]},recommendation:{id:"recommendation",defaultMessage:[{type:0,value:"Recommendation"}]},recommendations:{id:"recommendations",defaultMessage:[{type:0,value:"Recommendations"}]},insightsHeader:{id:"insightsHeader",defaultMessage:[{type:0,value:"Advisor"}]},unknown:{id:"unknown",defaultMessage:[{type:0,value:"Unknown"}]},low:{id:"low",defaultMessage:[{type:0,value:"Low"}]},moderate:{id:"moderate",defaultMessage:[{type:0,value:"Moderate"}]},important:{id:"important",defaultMessage:[{type:0,value:"Important"}]},critical:{id:"critical",defaultMessage:[{type:0,value:"Critical"}]},veryLow:{id:"veryLow",defaultMessage:[{type:0,value:"Very Low"}]},medium:{id:"medium",defaultMessage:[{type:0,value:"Medium"}]},high:{id:"high",defaultMessage:[{type:0,value:"High"}]},availability:{id:"availability",defaultMessage:[{type:0,value:"Availability"}]},performance:{id:"performance",defaultMessage:[{type:0,value:"Performance"}]},stability:{id:"stability",defaultMessage:[{type:0,value:"Stability"}]},security:{id:"security",defaultMessage:[{type:0,value:"Security"}]},enabled:{id:"enabled",defaultMessage:[{type:0,value:"Enabled"}]},impact:{id:"impact",defaultMessage:[{type:0,value:"Impact"}]},impactLevel:{id:"impactLevel",defaultMessage:[{type:1,value:"level"},{type:0,value:" impact"}]},impactDescription:{id:"impactDescription",defaultMessage:[{type:0,value:"The impact of the problem would be "},{type:1,value:"level"},{type:0,value:" if it occurred."}]},category:{id:"category",defaultMessage:[{type:0,value:"Category"}]},likelihood:{id:"likelihood",defaultMessage:[{type:0,value:"Likelihood"}]},likelihoodLevel:{id:"likelihoodLevel",defaultMessage:[{type:1,value:"level"},{type:0,value:" likelihood"}]},likelihoodDescription:{id:"likelihoodDescription",defaultMessage:[{type:0,value:"The likelihood that this will be a problem is "},{type:1,value:"level"},{type:0,value:"."}]},all:{id:"all",defaultMessage:[{type:0,value:"All"}]},disabled:{id:"disabled",defaultMessage:[{type:0,value:"Disabled"}]},resetFilters:{id:"resetFilters",defaultMessage:[{type:0,value:"Reset filters"}]},noMatchingRecommendations:{id:"noMatchingRecommendations",defaultMessage:[{type:0,value:"No matching recommendations found"}]},noMatchingRecommendationsDesc:{id:"noMatchingRecommendationsDesc",defaultMessage:[{type:0,value:"This filter criteria matches no recommendations. Try changing your filter settings."}]},noRecommendations:{id:"noRecommendations",defaultMessage:[{type:0,value:"None of your connected systems are affected by any known recommendations."}]},noRecommendationsDesc:{id:"noRecommendationsDesc",defaultMessage:[{type:0,value:"No known recommendations affect this cluster."}]}});var f=a(56455),g=a(43),v=function(e){var t=e.uuid,a=e.lastSeen,l=(0,r.Z)(),i=(0,g.u)(t),s=i.data,c=i.isUninitialized,u=i.isLoading,d=i.isFetching;return n().createElement(n().Fragment,null,n().createElement(o.Grid,{md:12,hasGutter:!0},n().createElement(o.GridItem,null,c||u||d?n().createElement(f.Z,{size:"sm"}):n().createElement(o.Title,{size:"2xl",headingLevel:"h1"},s||t)),n().createElement(o.GridItem,null,n().createElement(o.Stack,null,n().createElement(o.StackItem,null,n().createElement("span",null,"UUID: "),n().createElement("span",null,t||l.formatMessage(p.unknown))),n().createElement(o.StackItem,null,n().createElement("span",null,l.formatMessage(p.lastSeen),": "),n().createElement("span",null,a||l.formatMessage(p.unknown)))))))};v.propTypes={uuid:s().string.isRequired,lastSeen:s().string};const y=v;var h=a(96156),b=a(85061),M=a(28481),k=a(44535),E=a(26899),Z=a(78216),O=a(94550),w=a(57277),P=a(219),S=a(96733),_=a(74183),j=a(86728),C=a(34348),T=function(e){var t=e.className,a=e.children,l=e.icon,r=e.iconClass,i=e.iconStyle,s=e.text,o=e.title,c=e.variant;return n().createElement(P.ub,{className:t,variant:c},"none"!==l&&n().createElement(j.k,{className:r,style:i,icon:l}),n().createElement(C.Title,{headingLevel:"h5",size:"lg"},o),n().createElement(_.B,{style:{marginBottom:"16px"}},s),a)};T.propTypes={children:s().any,icon:s().any,iconClass:s().any,iconStyle:s().any,text:s().any,title:s().string,variant:s().any,className:s().string},T.defaultProps={icon:S.ZP,title:"",variant:P.IQ.full};const R=T;var D=a(82644),I=a(29558),x=a(13976),L=(0,D.Sn)(),N=navigator.language.slice(0,2),F=(0,I.d)({onError:console.error,locale:N},L),A={locale:N},B={1:(0,x.Z)(F.formatMessage(p.low),A),2:(0,x.Z)(F.formatMessage(p.medium),A),3:(0,x.Z)(F.formatMessage(p.high),A),4:(0,x.Z)(F.formatMessage(p.critical),A)},G={1:(0,x.Z)(F.formatMessage(p.low),A),2:(0,x.Z)(F.formatMessage(p.medium),A),3:(0,x.Z)(F.formatMessage(p.high),A),4:(0,x.Z)(F.formatMessage(p.critical),A)},H={1:(0,x.Z)(F.formatMessage(p.low),A),2:(0,x.Z)(F.formatMessage(p.moderate),A),3:(0,x.Z)(F.formatMessage(p.important),A),4:(0,x.Z)(F.formatMessage(p.critical),A)},z={1:(0,x.Z)(F.formatMessage(p.veryLow),A),2:(0,x.Z)(F.formatMessage(p.low),A),3:(0,x.Z)(F.formatMessage(p.moderate),A),4:(0,x.Z)(F.formatMessage(p.high),A)},U={total_risk:{type:"checkbox",title:"total risk",urlParam:"total_risk",values:[{label:H[4],value:"4"},{label:H[3],value:"3"},{label:H[2],value:"2"},{label:H[1],value:"1"}]},res_risk:{type:"checkbox",title:"risk of change",urlParam:"res_risk",values:[{label:z[4],value:"4"},{label:z[3],value:"3"},{label:z[2],value:"2"},{label:z[1],value:"1"}]},impact:{type:"checkbox",title:"impact",urlParam:"impact",values:[{label:G[4],value:"4"},{label:G[3],value:"3"},{label:G[2],value:"2"},{label:G[1],value:"1"}]},likelihood:{type:"checkbox",title:"likelihood",urlParam:"likelihood",values:[{label:B[4],value:"4"},{label:B[3],value:"3"},{label:B[2],value:"2"},{label:B[1],value:"1"}]},rule_status:{type:"radio",title:"status",urlParam:"rule_status",values:[{label:(0,x.Z)(F.formatMessage(p.all),A),value:"all"},{label:(0,x.Z)(F.formatMessage(p.enabled),A),value:"enabled"},{label:(0,x.Z)(F.formatMessage(p.disabled),A),value:"disabled"}]}},V=a(22663);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){(0,h.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q=function(e){var t=e.report;return n().createElement("div",{className:"advisor"},n().createElement(V.Z,{appName:"advisor",module:"./AdvisorReportDetails",report:W(W({},t),{},{details:t.extra_data,resolution:{resolution:t.resolution}})}))};Q.propTypes={report:s().object.isRequired};const J=Q;function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(Object(a),!0).forEach((function(t){(0,h.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Y=function(e){var t=e.reports,a=(0,r.Z)(),i=(0,l.useState)([]),s=(0,M.Z)(i,2),c=s[0],u=s[1],d=(0,l.useState)({}),m=(0,M.Z)(d,2),f=m[0],g=m[1],v=(0,l.useState)({}),y=(0,M.Z)(v,2),P=y[0],S=y[1],_=(0,l.useState)(""),j=(0,M.Z)(_,2),C=j[0],T=j[1],D=(0,l.useState)(!1),I=(0,M.Z)(D,2),x=I[0],L=I[1],N=(0,l.useState)([]),F=(0,M.Z)(N,2),A=F[0],H=F[1],z=A?A.length/2:0,V=[{title:a.formatMessage(p.name),transforms:[O.sortable]},{title:a.formatMessage(p.added),transforms:[O.sortable,(0,O.cellWidth)(15)]},{title:a.formatMessage(p.totalRisk),transforms:[O.sortable,(0,O.cellWidth)(15)]}],q=function(e,t,a){var l=(0,b.Z)(A);l[t]=X(X({},l[t]),{},{isOpen:a}),H(l)},W=function(e){var t="insights-expand-all"===e,a=(0,b.Z)(A);a.map((function(e,a){Object.prototype.hasOwnProperty.call(e,"isOpen")&&(e.isOpen=t,t&&q(0,a,t))})),H(a)},Q=[{label:"Collapse all",onClick:function(){return W("insights-collapse-all")}},{label:"Expand all",onClick:function(){return W("insights-expand-all")}}],K=function(e,t,a){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=e.flatMap((function(e,r){var i=e,s=e.resolution,c=a.filter((function(e,t){return t%2==0&&e.rule.rule_id===i.rule_id&&e})),u=!!c.length&&c[0].selected,d=a.length?!!c.length&&c[0].isOpen:0===r,m=[{rule:i,resolution:s,isOpen:d,selected:u,cells:[{title:n().createElement("div",null," ",i.description)},{title:n().createElement("div",{key:r},n().createElement(E.Z,{date:i.created_at,type:"relative",tooltipProps:{position:o.TooltipPosition.bottom}}))},{title:n().createElement("div",{key:r,style:{verticalAlign:"top"}},n().createElement(o.Tooltip,{key:r,position:o.TooltipPosition.bottom,content:n().createElement("span",null,"The ",n().createElement("strong",null,"likelihood")," that this will be a problem is"," ",null!=i&&i.likelihood?B[null==i?void 0:i.likelihood]:"unknown",". The ",n().createElement("strong",null,"impact")," of the problem would be"," ",null!=i&&i.impact?G[null==i?void 0:i.impact]:"unknown"," ","if it occurred.")},n().createElement(Z.Z,{value:i.total_risk})))}]},{parent:r,fullWidth:!0,cells:[{title:n().createElement(J,{key:"child-".concat(r),report:e})}]}],p=0===l.length||i.description.toLowerCase().includes(l.toLowerCase()),f=0===Object.keys(t).length||Object.keys(t).map((function(e){var a=t[e],l={created_at:i.created_at,total_risk:i.total_risk,tags:i.tags};return a.find((function(t){return String(t)===String(l[e])}))})).every((function(e){return e}));return p&&f?m:[]}));return r.forEach((function(e,t){return e.parent?e.parent=t-1:null})),r},Y=function(e){return e.filter((function(e){return e.selected}))}(A).length,$=function(e){L(e),H(K(c,P,A.map((function(t,a){return a%2==0?X(X({},t),{},{selected:e}):t})),C))},ee={items:[{title:"Select none",onClick:function(){return $(!1)}},{title:"Select all",onClick:function(){return $(!0)}}],count:Y,checked:x,onSelect:function(){return $(!x)}},te=function(e,t){var a=t.length>0?X(X({},P),(0,h.Z)({},e,t)):function(e){var t=X({},P);return delete t[e],t}(e);H(K(c,a,A,C)),S(a)},ae=[{label:"description",filterValues:{key:"text-filter",onChange:function(e,t){return function(e){var t=K(c,P,A,e);T(e),H(t)}(t)},value:C}},{label:U.total_risk.title,type:U.total_risk.type,id:U.total_risk.urlParam,value:"checkbox-".concat(U.total_risk.urlParam),filterValues:{key:"".concat(U.total_risk.urlParam,"-filter"),onChange:function(e,t){return te(U.total_risk.urlParam,t)},value:P.total_risk,items:U.total_risk.values}}],le={deleteTitle:a.formatMessage(p.resetFilters),filters:function(e){var t=Object.entries(e),a=e&&t.length>0?t.map((function(e){var t=U[e[0]],a=e[1].map((function(e){return{name:t.values.find((function(t){return t.value===String(e)})).label,value:e}}));return{category:(0,o.capitalize)(t.title),chips:a,urlParam:t.urlParam}})):[];return C.length>0&&a.push({category:"Name",chips:[{name:C,value:C}]}),a}(P),onDelete:function(e,t,a){a?(H(K(c,{},A,"")),S({}),T("")):t.map((function(e){"Name"===e.category?(H(K(c,P,A,"")),T("")):te(e.urlParam,P[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})))}))}};return(0,l.useEffect)((function(){var e=t;u(e),H(K(e,P,A,C))}),[]),n().createElement("div",null,n().createElement(w.Z,{actionsConfig:{actions:Q},bulkSelect:ee,filterConfig:{items:ae},pagination:n().createElement(n().Fragment,null,1===z?"".concat(z," ").concat(a.formatMessage(p.recommendation)):"".concat(z," ").concat(a.formatMessage(p.recommendations))),activeFiltersConfig:le}),c.length>0?n().createElement(n().Fragment,null,n().createElement(O.Table,{"aria-label":"Cluster recommendations table",onSelect:function(e,t,a){return H(K(c,P,A.map((function(e,l){return l===a?X(X({},e),{},{selected:t}):e})),C))},onCollapse:q,rows:A,cells:V,sortBy:f,canSelectAll:!1,onSort:function(e,t,a){var l={2:"description",3:"created_at",4:"total_risk"},n=function(){return c.concat().sort((function(e,a){return e[l[t]]>a[l[t]]?1:a[l[t]]>e[l[t]]?-1:0}))},r=a===O.SortByDirection.asc?n():n().reverse();u(r),g({index:t,direction:a}),H(K(r,P,A,C))},variant:O.TableVariant.compact,isStickyHeader:!0},n().createElement(O.TableHeader,null),n().createElement(O.TableBody,null)),0===z&&n().createElement(o.Card,null,n().createElement(o.CardBody,null,n().createElement(R,{title:a.formatMessage(p.noMatchingRecommendations),text:a.formatMessage(p.noMatchingRecommendationsDesc)})))):n().createElement(o.Card,null,n().createElement(o.CardBody,null,n().createElement(R,{icon:k.ZP,iconClass:"ins-c-insights__check",title:a.formatMessage(p.noRecommendations),text:a.formatMessage(p.noRecommendationsDesc)}))))};Y.propTypes={reports:s().array.isRequired},Y.defaultProps={reports:[]};const $=Y;var ee=a(85991),te=a(49489),ae=a(74806),le=function(e){var t=e.current,a=e.match,r=e.intl,i=(0,l.useState)([]),s=(0,M.Z)(i,2),o=s[0],c=s[1],u=(0,l.useCallback)((function(){var e=[],t=a.url.split("/");e.push({title:"".concat(r.formatMessage(p.insightsHeader)," ").concat(t[1]),navigate:"/".concat(t[1])}),c(e)}),[r,a.params.clusterId,a.url]);return(0,l.useEffect)((function(){u()}),[u,a.params.clusterId,a.url]),n().createElement(n().Fragment,null,o.length>0&&n().createElement(ee.a,{ouiaId:"detail"},o.map((function(e,t){return n().createElement(te.g,{key:t},n().createElement("span",null,e.title))})),n().createElement(te.g,{isActive:!0},t)))};le.propTypes={current:s().string,match:s().object,intl:s().any};const ne=(0,ae.ZP)((0,m.Z)(le));var re=a(2095),ie=a(85962),se=a(24561);const oe=function(){return n().createElement(re.Zb,null,n().createElement(ie.e,null,n().createElement(se.aV,null)))};var ce=a(86362),ue=function(e){var t,a=e.match,i=(0,ce.t)(a.params.clusterId),s=i.data,m=i.isUninitialized,f=i.isLoading,g=i.isFetching,v=i.isSuccess,h=i.isError,b=i.refetch,M=(0,r.Z)();return(0,l.useEffect)((function(){if(a.params.clusterId){var e="".concat(a.params.clusterId," - ").concat(M.formatMessage(p.clusters));document.title=M.formatMessage(p.documentTitle,{subnav:e})}b()}),[a.params.clusterId]),n().createElement(n().Fragment,null,n().createElement(u.Z,{className:"pf-m-light ins-inventory-detail"},n().createElement(ne,{current:a.params.clusterId,match:a}),n().createElement(y,{uuid:a.params.clusterId})),n().createElement(d.Z,null,n().createElement(n().Fragment,null,h&&n().createElement(R,{title:"No recommendations available",text:"There was an error fetching recommendations for this cluster. Refresh your page to try again.",icon:c.ZP}),(m||f||g)&&n().createElement(oe,null),v&&n().createElement(o.Grid,{hasGutter:!0},n().createElement(o.GridItem,{span:12},n().createElement($,{reports:null==s||null===(t=s.report)||void 0===t?void 0:t.data}))))))};ue.propTypes={history:s().object,match:s().any};const de=(0,m.Z)(ue)}}]);
//# sourceMappingURL=../sourcemaps/ClusterDetails.9de6616bd8d3608e1232.js.map