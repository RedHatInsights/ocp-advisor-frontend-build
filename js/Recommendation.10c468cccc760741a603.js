"use strict";(self.webpackChunkocp_advisor_frontend=self.webpackChunkocp_advisor_frontend||[]).push([[987],{42414:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ee});var r=n(93264),a=n.n(r),l=n(16530),c=n(15861),i=n(87757),o=n.n(i),u=n(86896),s=n(45697),m=n.n(s),f=n(48716),d=n(39173),p=n(86350),g=n(62410),v=n(23218),b=n(34348),E=n(71369),y=n(84564),h=n(7193),O=n(56276),P=n(31728),Z=n(59303),j=n(30893),C=n(1990),D=n(52661),w=n(4942);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=n(51957),F=n(29439),N=n(88931),_=n(48114),I=n(77572),T=n(92223),L=n(32875),B=n(56161),M=n(7026),R=n(97530),q=n(17335),z=n(12321),A=n(76),V=n(13877),U=n(51014),G=n(28672),H=n(86362);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Y=function(){var e=(0,H.tf)((0,l.useParams)().recommendationId),t=(0,N.useDispatch)(),n=(0,N.useSelector)((function(e){return e.filters.affectedClustersState})),c=Number(n.limit),i=n.offset/n.limit+1,o=function(e){return t((0,G.BC)(e))},u=e.isError,s=e.isUninitialized,m=e.isFetching,f=e.isSuccess,d=e.data,p=void 0===d?[]:d,g=(0,r.useState)([]),v=(0,F.Z)(g,2),b=v[0],E=v[1],y=(0,r.useState)([]),h=(0,F.Z)(y,2),O=h[0],P=h[1],Z=(0,r.useState)([]),j=(0,F.Z)(Z,2),C=j[0],w=j[1],S={items:[{label:"Name",type:I.Yu.text,filterValues:{key:"name-filter",onChange:function(e,t){return function(e){var t=W(W({},n),{},{text:e,offset:0});o(t)}(t)},value:n.text}}],isDisabled:u||p&&0===p.length},k=function(e,t){var r=t*n.limit-n.limit;o(W(W({},n),{},{offset:r}))},x=function(e,t){o(W(W({},n),{},{limit:t}))};return(0,r.useEffect)((function(){var e=function(e,t){return e.filter((function(e){return null==e?void 0:e.cluster.includes(t.text)})).sort((function(e,n){return"asc"===t.sortDirection?null==e?void 0:e.cluster.localeCompare(null==n?void 0:n.cluster):null==n?void 0:n.cluster.localeCompare(null==e?void 0:e.cluster)}))}(p,n),t=function(e){return e.slice(c*(i-1),c*(i-1)+c)}(e),r=function(e,t){var n=e,r=n.findIndex((function(e){return"Name"===e.category}));return""===t?n.splice(r):-1===r?n.push({category:"Name",chips:[{name:t}]}):n[r]={category:"Name",chips:[{name:t}]},n}(C,n.text);E(e),P(t),w(r)}),[e,n]),a().createElement("div",{id:"affected-list-table"},a().createElement(_.Z,{filterConfig:S,pagination:{itemCount:b.length,page:i,perPage:c,onSetPage:k,onPerPageSelect:x},activeFiltersConfig:{filters:C,onDelete:function(){var e=W(W({},n),{},{text:""});o(e)}}}),(s||m)&&a().createElement(D.Z,null),u&&a().createElement(B.Card,null,a().createElement(B.CardBody,null,a().createElement(U.Te,null))),f&&0===p.length&&a().createElement(B.Card,null,a().createElement(B.CardBody,null,a().createElement(U.mi,null))),f&&p.length>0&&(b.length>0?a().createElement(R.i,{"aria-label":"Table of affected clusters",ouiaId:"affectedClustersTable",variant:"compact",cells:[{title:"Name",transforms:[M.sortable]}],rows:O.map((function(e){return{cells:[a().createElement("span",{key:null==e?void 0:e.cluter},a().createElement(l.Link,{to:"/clusters/".concat(null==e?void 0:e.cluster)},null==e?void 0:e.cluster))]}})),sortBy:{index:n.sortIndex,direction:n.sortDirection},onSort:function(e,t,r){o(W(W({},n),{},{sortIndex:t,sortDirection:r}))}},a().createElement(z.x,null),a().createElement(q.R,null)):a().createElement(T.Z,null,a().createElement(A.Bullseye,null,a().createElement(U.VA,null)))),a().createElement(L.Z,{isFooter:!0,className:"ins-c-inventory__table--toolbar"},a().createElement(V.Pagination,{variant:V.PaginationVariant.bottom,itemCount:b.length,page:i,perPage:c,onSetPage:k,onPerPageSelect:x,onPageInput:k})))};var J=n(11521),K=n.n(J),X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return K().post(e,n,{headers:t})},$=function(e){var t=e.rule,n=e.match,r=(0,u.Z)(),l=t.isError,i=t.isUninitialized,s=t.isLoading,m=t.isFetching,w=t.isSuccess,S=t.data,F=n.params.recommendationId,N=w?function(e,t){var n,r=(null==e||null===(n=e.error_keys)||void 0===n?void 0:n[function(e){var t;return null===(t=e.split("|"))||void 0===t?void 0:t[1]}(t)])||{},a=k(k(k({},e),r),(null==r?void 0:r.metadata)||(null==e?void 0:e.metadata)||{});return a.impact={impact:a.impact},delete a.metadata,delete a.error_keys,a}(S.content,F):void 0;return a().createElement(a().Fragment,null,(i||s||m)&&a().createElement(p.Z,null,a().createElement(D.Z,null)),l&&a().createElement(p.Z,null,a().createElement(x.Z,{title:r.formatMessage(j.Z.unableToConnect),text:r.formatMessage(j.Z.unableToConnectDesc),icon:y.default,iconStyle:{color:h.Q7.value}})),!(i||s||m)&&w&&a().createElement(a().Fragment,null,a().createElement(f.Z,{className:"pageHeaderOverride"},a().createElement(O.Z,{current:(null==N?void 0:N.description)||F})),a().createElement(p.Z,{className:"pf-m-light pf-u-pt-sm"},a().createElement(C.Z,{isOpenShift:!0,isDetailsPage:!0,rule:N,header:a().createElement(a().Fragment,null,a().createElement(d.Z,{title:a().createElement(a().Fragment,null,N.description," ",a().createElement(P.Z,{rule:N}))}),a().createElement("p",null,r.formatMessage(j.Z.rulesDetailsPubishdate,{date:a().createElement(g.Z,{date:new Date(N.publish_date),type:"onlyDate"})}),N.tags&&(Array.isArray(N.tags)?a().createElement(E.LabelGroup,{className:"categoryLabels",numLabels:1},N.tags.reduce((function(e,t){return Z.kT[t]&&e.push(a().createElement(v.Label,{key:"label-".concat(t),color:"blue"},Z.W2.category.values[Z.kT[t]-1].label)),e}),[])):a().createElement(v.Label,null,N.tags)))),onFeedbackChanged:function(){var e=(0,c.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X("".concat(H._n,"/v2/rating"),{},{rule:t,rating:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()})),a().createElement(p.Z,null,a().createElement(a().Fragment,null,a().createElement(a().Fragment,null,a().createElement(b.Title,{className:"titleOverride",headingLevel:"h3",size:"2xl"},r.formatMessage(j.Z.affectedClusters)),a().createElement(Y,null))))))};$.propTypes={rule:m().object.isRequired,match:m().object.isRequired};const ee=function(){var e=(0,H.qv)((0,l.useParams)().recommendationId);return(0,r.useEffect)((function(){e.refetch()}),[(0,l.useParams)().recommendationId]),a().createElement($,{rule:e,match:(0,l.useRouteMatch)()})}}}]);
//# sourceMappingURL=../sourcemaps/Recommendation.db4b1c544e2c044b3a286a93543830b8.js.map