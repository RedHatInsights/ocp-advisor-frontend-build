(self.webpackChunkocpAdvisor=self.webpackChunkocpAdvisor||[]).push([[9420],{67867:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},l=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.actionPropsGenerator=t.overflowActionsMapper=void 0;var c=r(85893),u=r(28416),f=a(r(28416)),d=r(47348),p=s(r(62165)),m=r(25832),v=s(r(93967));function h(e){return void 0!==e.label}t.overflowActionsMapper=function(e,t){var r=e;return(0,u.createElement)(d.DropdownItem,n({},r.props,{className:"ins-c-primary-toolbar__overflow-actions",key:r.value||r.key||"".concat(t,"-overflow"),component:r.props&&r.props.component||f.default.isValidElement(r.label||e)?"div":"button",onClick:function(e){return r.onClick&&r.onClick(e,r,t)}}),r.label||e)},t.actionPropsGenerator=function(e,t){var r,o="object"==typeof e&&null!==typeof e&&"function"==typeof(null==e?void 0:e.onClick)?function(r){return null==e?void 0:e.onClick(r,e,t)}:void 0;return n(n({},null==e?void 0:e.props),{onClick:o,component:(null===(r=null==e?void 0:e.props)||void 0===r?void 0:r.component)||(f.default.isValidElement(e.label||e)?"div":"button"),children:"object"==typeof e&&null!==typeof e?null==e?void 0:e.label:e})},t.default=function(e){var r,o=e.actions,i=void 0===o?[]:o,a=e.overflowActions,s=void 0===a?[]:a,u=e.onSelect,g=void 0===u?function(){}:u,y=e.dropdownProps,b=void 0===y?{}:y,_=e.exportConfig,x=(0,f.useState)(!1),j=x[0],C=x[1],E=i[0],S=i.slice(1),k=l(l(l(l([],E?[(0,c.jsx)(d.DropdownItem,n({},(0,t.actionPropsGenerator)(E,"first-action"),{className:(0,v.default)("ins-c-primary-toolbar__first-action",h(E)?null===(r=null==E?void 0:E.props)||void 0===r?void 0:r.className:void 0)}),"first-action")]:[],!0),S.map((function(e,r){var o;return(0,c.jsx)(d.DropdownItem,n({},(0,t.actionPropsGenerator)(e,r)),(null==e?void 0:e.key)||(null===(o=null==e?void 0:e.props)||void 0===o?void 0:o.key)||r)})),!0),i.length>0&&s.length>0?[(0,c.jsx)(d.Divider,{className:"ins-c-primary-toolbar__overflow-actions-separator"},"separator")]:[],!0),s.map((function(e,r){return(0,t.overflowActionsMapper)(e,r)})),!0);return(0,c.jsxs)(f.Fragment,{children:[E&&(0,c.jsx)(d.ToolbarItem,{className:"ins-c-primary-toolbar__first-action pf-m-spacer-sm",children:h(E)?(0,c.jsx)(d.Button,n({ouiaId:"".concat(E.label)},E.props,{onClick:E.onClick||E.props&&E.props.onClick||void 0,children:E.label})):E}),_&&(_.extraItems||_.onSelect)&&(0,c.jsx)(d.ToolbarItem,{className:"pf-m-spacer-sm",children:(0,c.jsx)(m.DownloadButton,n({},_))}),((null==i?void 0:i.length)>0||s.length>0)&&(0,c.jsx)(d.ToolbarItem,{className:"".concat(i.length<=1?"ins-m-actions--empty":""," ins-c-primary-toolbar__actions pf-m-spacer-sm"),children:(0,c.jsx)(d.Dropdown,n({},b,{isOpen:j,onSelect:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null==g||g.apply(void 0,e),C(!1)},onOpenChange:C,ouiaId:"Actions",toggle:function(e){return(0,c.jsx)(d.MenuToggle,{ref:e,"aria-label":"kebab dropdown toggle",variant:"plain",onClick:function(){return C((function(e){return!e}))},isExpanded:j,children:(0,c.jsx)(p.default,{})})},children:(0,c.jsx)(d.DropdownList,{children:k})}))})]})}},90111:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=r(85893),s=a(r(28416)),c=r(47348),u=r(66973),f=r(64420),d=a(r(67867)),p=r(92053),m=r(2238),v=r(23670),h=a(r(51256));r(62354),t.default=function(e){var t,r=e.id,a=e.className,g=e.toggleIsExpanded,y=void 0===g?function(){}:g,b=e.bulkSelect,_=e.filterConfig,x=e.dedicatedAction,j=e.actionsConfig,C=e.sortByConfig,E=e.pagination,S=e.activeFiltersConfig,k=e.children,I=e.exportConfig,w=e.expandAll,D=o(e,["id","className","toggleIsExpanded","bulkSelect","filterConfig","dedicatedAction","actionsConfig","sortByConfig","pagination","activeFiltersConfig","children","exportConfig","expandAll"]),O=i([],C?[{label:"Sort order ASC",props:{isDisabled:C.direction===f.SortByDirection.asc},onClick:function(e){return C.onSortChange&&C.onSortChange(e,f.SortByDirection.asc)}},{label:"Sort order DESC",props:{isDisabled:C.direction===f.SortByDirection.desc},onClick:function(e){return C.onSortChange&&C.onSortChange(e,f.SortByDirection.desc)}}]:[],!0);return(0,l.jsxs)(c.Toolbar,n({},D,{className:"".concat(a||""," ins-c-primary-toolbar"),toggleIsExpanded:y,id:r?"".concat(r):"ins-primary-data-toolbar",ouiaId:"PrimaryToolbar",children:[(0,l.jsxs)(c.ToolbarContent,{children:[(w||b||_||x)&&(0,l.jsxs)(c.ToolbarGroup,{className:"ins-c-primary-toolbar__group-filter pf-m-spacer-md pf-m-space-items-lg",variant:"filter-group",children:[w&&(0,l.jsx)(c.ToolbarItem,{children:(t=w,s.default.isValidElement(t)?w:(0,l.jsx)(c.Button,n({},w.buttonProps,{variant:"plain","aria-label":"".concat(w.isAllExpanded?"Collapse":"Expand"," all"),onClick:function(e){return w.onClick(e,!w.isAllExpanded)},ouiaId:"ExpandCollapseAll",isDisabled:w.isDisabled,children:(0,l.jsx)(c.ToolbarExpandIconWrapper,{children:w.isAllExpanded?(0,l.jsx)(u.AngleDownIcon,{}):(0,l.jsx)(u.AngleRightIcon,{})})})))}),b&&(0,l.jsx)(c.ToolbarItem,{children:s.default.isValidElement(b)?b:(0,l.jsx)(p.BulkSelect,n({ouiaId:"BulkSelect"},b))}),_&&(0,l.jsx)(c.ToolbarItem,{className:"ins-c-primary-toolbar__filter",children:s.default.isValidElement(_)?_:(0,l.jsx)(m.ConditionalFilter,n({},_))}),x&&(0,l.jsx)(c.ToolbarItem,{children:x})]}),s.default.isValidElement(j)?j:(j&&j.actions&&j.actions.length>0||C||I)&&(0,l.jsx)(d.default,n({},j||{},{exportConfig:I,overflowActions:O})),C&&(0,l.jsx)(c.ToolbarItem,{className:"ins-c-primary-toolbar__sort-by",children:s.default.isValidElement(C)?C:(0,l.jsx)(h.default,n({},C))}),k,E&&(0,l.jsx)(c.ToolbarItem,{className:"ins-c-primary-toolbar__pagination",children:s.default.isValidElement(E)?E:(0,l.jsx)(c.Pagination,n({isCompact:!0,ouiaId:"CompactPagination"},E))})]}),S&&s.default.isValidElement(S)?(0,l.jsx)(c.ToolbarContent,{children:(0,l.jsx)(c.ToolbarItem,{children:S})}):void 0!==(null==S?void 0:S.filters)&&(S.filters.length>0||!0===S.showDeleteButton)&&(0,l.jsx)(c.ToolbarContent,{children:(0,l.jsx)(c.ToolbarItem,{children:(0,l.jsx)(v.FilterChips,n({},S))})})]}))}},51256:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flipDirection=void 0;var n=r(85893),o=r(64420),i=r(47348),a=r(66973);function l(e){return e===o.SortByDirection.asc?o.SortByDirection.desc:o.SortByDirection.asc}t.flipDirection=l,t.default=function(e){var t=e.direction,r=void 0===t?o.SortByDirection.asc:t,s=e.onSortChange,c=void 0===s?function(){}:s;return(0,n.jsx)(i.Button,{variant:"plain",onClick:function(e){return c(e,l(r))},children:(0,n.jsx)(i.Icon,{size:"md",children:r===o.SortByDirection.asc?(0,n.jsx)(a.SortAmountUpIcon,{}):(0,n.jsx)(a.SortAmountDownIcon,{})})})}},92053:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BulkSelect:()=>n.Z,default:()=>n.Z});var n=r(48799)},2238:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CheckboxFilter:()=>i.Z,ConditionalFilter:()=>n.Z,GroupFilter:()=>o.Z,GroupType:()=>s.Z,RadioFilter:()=>a.Z,TextFilter:()=>l.Z,calculateSelected:()=>u.hz,conditionalFilterType:()=>c.Yu,convertTreeItem:()=>u.GO,default:()=>n.Z,getGroupMenuItems:()=>u.So,getMenuItems:()=>u.vf,identifyComponent:()=>c.dx,isButtonItem:()=>u.A7,isCheckboxItem:()=>u.dR,isChecked:()=>u.CK,isRadioItem:()=>u.CG,isTreeViewItem:()=>u.Bw,mapTree:()=>u.Gy,onTreeCheck:()=>u.E3,typeMapper:()=>c.wc});var n=r(18213),o=r(25326),i=r(40787),a=r(26154),l=r(68097),s=r(22137),c=r(87123),u=r(92077)},25832:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DownloadButton:()=>n.Z,default:()=>n.Z});var n=r(97138)},23670:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FilterChips:()=>n.Z,default:()=>n.Z});var n=r(51812)},67636:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>G});var n=r(28416),o=r.n(n),i=r(86896),a=r(89376),l=r(30893),s=r(86362),c=r(4942),u=r(70885),f=r(45697),d=r.n(f),p=r(86706),m=r(18446),v=r.n(m),h=r(62012),g=r(45578),y=r.n(g),b=r(81249),_=r(64420),x=r(35981),j=r(49004),C=r(58027),E=r(13877),S=r(76004),k=r(90111),I=r.n(k),w=r(62410),D=r(77572),O=r(28672),P=r(59303),T=r(76913),Z=r(52661),A=r(51014),B=r(60076);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F=function(e){var t=e.query,r=t.isError,a=t.isUninitialized,s=t.isFetching,f=t.isSuccess,d=t.data,m=t.refetch,g=(0,i.Z)(),k=(0,p.useDispatch)(),M=function(e){return k((0,O.$Q)(e))},F=(0,p.useSelector)((function(e){return e.filters.clustersListState})),L=(null==d?void 0:d.data)||[],V=F.offset/F.limit+1,R=(0,n.useState)([]),G=(0,u.Z)(R,2),W=G[0],q=G[1],z=(0,n.useState)([]),H=(0,u.Z)(z,2),U=H[0],K=H[1],Q=(0,n.useState)(!1),Y=(0,u.Z)(Q,2),$=Y[0],J=Y[1],X=(0,n.useState)(!0),ee=(0,u.Z)(X,2),te=ee[0],re=ee[1],ne=(0,h.useLocation)().search,oe=a||s||!$,ie=r,ae=L.length>0&&0===W.length,le=f,se=function(e,t){return(0,T.Lv)(F,M,e,t)};(0,n.useEffect)((function(){K(ue(W)),J(!0)}),[W,F.limit,F.offset]),(0,n.useEffect)((function(){q(ce(L))}),[d,F.text,F.version,F.hits,F.sortDirection,F.sortIndex]),(0,n.useEffect)((function(){if(ne&&te){var e=(0,T.yG)(ne);if(e.sort){var t=(0,T.Lg)(e.sort);e.sortIndex=P.lo.indexOf(t.name),e.sortDirection=t.direction}e.offset&&(e.offset=Number(e.offset[0])),e.limit&&(e.limit=Number(e.limit[0])),e.impacting&&!Array.isArray(e.impacting)&&(e.impacting=["".concat(e.impacting)]),M(N(N({},F),e))}re(!1)}),[]),(0,n.useEffect)((function(){te||(0,T.aM)(F,P.lo)}),[F,te]);var ce=function(e){J(!1);var t=e.filter((function(e){return(0,T.im)(e,F)})).map((function(e,t){var r,n,i,a;void 0===e.cluster_version||""===e.cluster_version||(0,b.valid)((0,b.coerce)(e.cluster_version))||console.error("Cluster version ".concat(e.cluster_version," has invalid format!"));var s=(0,T.WL)(e.cluster_version);return{entity:e,cells:[o().createElement("span",{key:t},o().createElement(h.Link,{to:"".concat(B.G,"/clusters/").concat(e.cluster_id)},e.cluster_name||e.cluster_id)),"0.0.0"===s?g.formatMessage(l.Z.nA):s,e.total_hit_count,(null===(r=e.hits_by_total_risk)||void 0===r?void 0:r[4])||0,(null===(n=e.hits_by_total_risk)||void 0===n?void 0:n[3])||0,(null===(i=e.hits_by_total_risk)||void 0===i?void 0:i[2])||0,(null===(a=e.hits_by_total_risk)||void 0===a?void 0:a[1])||0,o().createElement("span",{key:t},e.last_checked_at?o().createElement(w.Z,{extraTitle:"".concat(g.formatMessage(l.Z.lastSeen),": "),date:e.last_checked_at,variant:"relative"}):o().createElement(S.Tooltip,{key:t,content:o().createElement("span",null,g.formatMessage(l.Z.lastSeen)+": ",g.formatMessage(l.Z.nA))},o().createElement("span",null,g.formatMessage(l.Z.nA))))]}}));return-1===F.sortIndex?t:t.sort((function(e,t){var r,n,o=F.sortDirection===_.SortByDirection.asc?1:-1;switch(F.sortIndex){case P.v7:return r=e.entity.cluster_name||e.entity.cluster_id,n=t.entity.cluster_name||t.entity.cluster_id,r.localeCompare(n)?r.localeCompare(n)*o:0;case P._s:return(0,T._)((0,T.WL)(e.entity.cluster_version),(0,T.WL)(t.entity.cluster_version),o);case P.CL:return(r=new Date(e.entity.last_checked_at||0))>(n=new Date(t.entity.last_checked_at||0))?o:n>r?-o:0;default:return(r=e.cells[F.sortIndex])>(n=t.cells[F.sortIndex])?o:n>r?-o:0}}))},ue=function(e){return e.slice(F.limit*(V-1),F.limit*(V-1)+F.limit)},fe=[{label:g.formatMessage(l.Z.name).toLowerCase(),type:"text",filterValues:{key:"text-filter",onChange:function(e,t){return M(N(N({},F),{},{offset:0,text:t}))},value:F.text,placeholder:g.formatMessage(l.Z.filterByName)}},{label:g.formatMessage(l.Z.version),placeholder:g.formatMessage(l.Z.filterByVersion),type:D.conditionalFilterType.checkbox,filterValues:{id:"version-filter",key:"version-filter",onChange:function(e,t){return se("version",t)},value:F.version,items:y()(L.filter((function(e){return void 0!==e.cluster_version&&""!==e.cluster_version})).map((function(e){return{label:e.cluster_version,value:(0,T.WL)(e.cluster_version)}})).sort((function(e,t){return(0,T._)((0,T.WL)(e.cluster_version),(0,T.WL)(t.cluster_version),1)})).reverse(),"value")}},{label:P.RT.hits.title,type:P.RT.hits.type,id:P.RT.hits.urlParam,value:"checkbox-".concat(P.RT.hits.urlParam),filterValues:{key:"".concat(P.RT.hits.urlParam,"-filter"),onChange:function(e,t){return se(P.RT.hits.urlParam,t)},value:F.hits,items:P.RT.hits.values}}],de={showDeleteButton:!0,deleteTitle:g.formatMessage(l.Z.resetFilters),filters:(0,T.mt)(F,P.RT),onDelete:function(e,t,r){r?v()(F,O.Ly)?m():(0,O.aw)(F,O.Ly,M):t.map((function(e){var t,r=(0,c.Z)({},e.urlParam,Array.isArray(F[e.urlParam])?F[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");r[e.urlParam].length>0?M(N(N({},F),r)):(t=e.urlParam,(0,T.oo)(F,M,t))}))}};return o().createElement(o().Fragment,null,f&&0===L.length?o().createElement(A.ER,null):o().createElement("div",{id:"clusters-list-table","data-ouia-safe":!oe},o().createElement(I(),{pagination:{itemCount:W.length,page:V,perPage:F.limit,onSetPage:function(e,t){return J(!1),M(N(N({},F),{},{offset:F.limit*(t-1)}))},onPerPageSelect:function(e,t){return J(!1),M(N(N({},F),{},{limit:t,offset:0}))},isCompact:!0,ouiaId:"pager"},filterConfig:{items:fe},activeFiltersConfig:de}),o().createElement(x.i,{"aria-label":"Table of clusters",ouiaId:"clusters",ouiaSafe:!oe,variant:_.TableVariant.compact,cells:P.Bg,rows:ie||oe||ae?[{fullWidth:!0,cells:[{props:{colSpan:P.Bg.length+1},title:ie?o().createElement(A.Te,null):oe?o().createElement(Z.Z,null):o().createElement(A.VA,null)}]}]:le?U:o().createElement(A.Te,null),sortBy:{index:F.sortIndex,direction:F.sortDirection},onSort:function(e,t,r){J(!1),M(N(N({},F),{},{sortIndex:t,sortDirection:r}))},isStickyHeader:!0},o().createElement(j.x,null),o().createElement(C.R,null)),o().createElement(E.tl,{ouiaId:"pager",itemCount:W.length,page:F.offset/F.limit+1,perPage:Number(F.limit),onSetPage:function(e,t){return M(N(N({},F),{},{offset:F.limit*(t-1)}))},onPerPageSelect:function(e,t){return M(N(N({},F),{},{limit:t,offset:0}))},widgetId:"pagination-options-menu-bottom",variant:E.aM.bottom})))};F.propTypes={query:d().object.isRequired};const L=function(){var e=(0,s.Oj)();return o().createElement(F,{query:e})};var V=r(34348),R=r(55140);const G=function(){var e=(0,i.Z)();return(0,R.Z)().updateDocumentTitle(e.formatMessage(l.Z.documentTitle,{subnav:e.formatMessage(l.Z.clusters)})),o().createElement(o().Fragment,null,o().createElement(a.Z,{className:"ins-c-clusters-header"},o().createElement(V.Dx,{headingLevel:"h1",ouiaId:"page-header"},"".concat(e.formatMessage(l.Z.insightsHeader)," ").concat(e.formatMessage(l.Z.clusters).toLowerCase()))),o().createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section"},o().createElement(L,null)))}},52661:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(28416),o=r.n(n),i=r(2095),a=r(85962),l=r(24561);const s=function(){return o().createElement(i.Card,{ouiaId:"loading-skeleton"},o().createElement(a.CardBody,null,o().createElement(l.aV,null)))}},47443:(e,t,r)=>{var n=r(42118);e.exports=function(e,t){return!(null==e||!e.length)&&n(e,t,0)>-1}},1196:e=>{e.exports=function(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}},41848:e=>{e.exports=function(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},42118:(e,t,r)=>{var n=r(41848),o=r(62722),i=r(42351);e.exports=function(e,t,r){return t==t?i(e,t,r):n(e,o,r)}},62722:e=>{e.exports=function(e){return e!=e}},42351:e=>{e.exports=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}},62354:(e,t,r)=>{"use strict";r.r(t)},314:()=>{}}]);
//# sourceMappingURL=../sourcemaps/ClustersList.915ac54f68a4ae8b8c9ec5b5d7303e2c.js.map