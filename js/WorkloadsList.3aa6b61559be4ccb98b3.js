(self.webpackChunkocpAdvisor=self.webpackChunkocpAdvisor||[]).push([[6488],{9003:(e,t,a)=>{"use strict";a.d(t,{LC:()=>o,ZP:()=>l,sl:()=>r});var n=a(40400);const r={name:"AngleDownIcon",height:512,width:320,svgPath:"M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z",yOffset:0,xOffset:0},o=(0,n.IU)(r),l=o},19210:(e,t,a)=>{"use strict";t.e2={name:"SecurityIcon",height:1024,width:896,svgPath:"M861.5,0 L34.5,0 C15.4,0 0,14.3 0,32 L0,452.1 C0,768 387.7,1024 448.5,1024 C509.3,1024 896,768 896,452.2 L896,32 C896,14.3 880.6,0 861.5,0 Z M490.7,768 L405.3,768 C393.5,767.8 384.2,757.5 384,744.7 L384,663.3 C384.2,650.5 393.6,640.3 405.3,640 L490.7,640 C502.5,640.2 511.8,650.5 512,663.3 L512,744.7 L512.1,744.7 C511.8,757.5 502.4,767.8 490.7,768 Z M543.9,162.7 L517.2,514.4 C515.8,530.9 502,544 485.3,544 L410.6,544 C394,544 380.1,531.2 378.7,514.7 L352.1,163 C350.5,144.3 365.3,128.3 384,128.3 L512,128 C530.7,128 545.4,144 543.9,162.7 Z",yOffset:0,xOffset:0},t.J8=a(35183).IU(t.e2),t.ZP=t.J8},54918:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n}),a(80598);const n={card:"pf-c-card",cardActions:"pf-c-card__actions",cardBody:"pf-c-card__body",cardExpandableContent:"pf-c-card__expandable-content",cardFooter:"pf-c-card__footer",cardHeader:"pf-c-card__header",cardHeaderToggle:"pf-c-card__header-toggle",cardHeaderToggleIcon:"pf-c-card__header-toggle-icon",cardSrInput:"pf-c-card__sr-input",cardTitle:"pf-c-card__title",divider:"pf-c-divider",modifiers:{hoverable:"pf-m-hoverable",selectable:"pf-m-selectable",selected:"pf-m-selected",hoverableRaised:"pf-m-hoverable-raised",selectableRaised:"pf-m-selectable-raised",nonSelectableRaised:"pf-m-non-selectable-raised",selectedRaised:"pf-m-selected-raised",compact:"pf-m-compact",displayLg:"pf-m-display-lg",flat:"pf-m-flat",plain:"pf-m-plain",rounded:"pf-m-rounded",expanded:"pf-m-expanded",fullHeight:"pf-m-full-height",toggleRight:"pf-m-toggle-right",noOffset:"pf-m-no-offset",noFill:"pf-m-no-fill",overpassFont:"pf-m-overpass-font"},themeDark:"pf-theme-dark"}},73699:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n}),a(30187);const n={badge:"pf-c-badge",check:"pf-c-check",divider:"pf-c-divider",dropdown:"pf-c-dropdown",dropdownGroup:"pf-c-dropdown__group",dropdownGroupTitle:"pf-c-dropdown__group-title",dropdownMenu:"pf-c-dropdown__menu",dropdownMenuItem:"pf-c-dropdown__menu-item",dropdownMenuItemDescription:"pf-c-dropdown__menu-item-description",dropdownMenuItemIcon:"pf-c-dropdown__menu-item-icon",dropdownMenuItemMain:"pf-c-dropdown__menu-item-main",dropdownToggle:"pf-c-dropdown__toggle",dropdownToggleButton:"pf-c-dropdown__toggle-button",dropdownToggleCheck:"pf-c-dropdown__toggle-check",dropdownToggleIcon:"pf-c-dropdown__toggle-icon",dropdownToggleImage:"pf-c-dropdown__toggle-image",dropdownToggleProgress:"pf-c-dropdown__toggle-progress",dropdownToggleText:"pf-c-dropdown__toggle-text",menu:"pf-c-menu",modifiers:{fullHeight:"pf-m-full-height",expanded:"pf-m-expanded",action:"pf-m-action",disabled:"pf-m-disabled",plain:"pf-m-plain",text:"pf-m-text",splitButton:"pf-m-split-button",primary:"pf-m-primary",inProgress:"pf-m-in-progress",active:"pf-m-active",secondary:"pf-m-secondary",top:"pf-m-top",static:"pf-m-static",alignRight:"pf-m-align-right",alignLeft:"pf-m-align-left",alignRightOnSm:"pf-m-align-right-on-sm",alignLeftOnSm:"pf-m-align-left-on-sm",alignRightOnMd:"pf-m-align-right-on-md",alignLeftOnMd:"pf-m-align-left-on-md",alignRightOnLg:"pf-m-align-right-on-lg",alignLeftOnLg:"pf-m-align-left-on-lg",alignRightOnXl:"pf-m-align-right-on-xl",alignLeftOnXl:"pf-m-align-left-on-xl",alignRightOn_2xl:"pf-m-align-right-on-2xl",alignLeftOn_2xl:"pf-m-align-left-on-2xl",ariaDisabled:"pf-m-aria-disabled",icon:"pf-m-icon",description:"pf-m-description"},spinner:"pf-c-spinner",themeDark:"pf-theme-dark"}},52661:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(92950),r=a.n(n),o=a(2095),l=a(85962),i=a(24561);const c=function(){return r().createElement(o.Card,{ouiaId:"loading-skeleton"},r().createElement(l.CardBody,null,r().createElement(i.aV,null)))}},51238:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});var n=a(92950),r=a.n(n),o=a(86896),l=a(89376),i=a(30893),c=a(86362),s=a(4942),d=a(70885),p=a(45697),m=a.n(p),u=a(56021),f=a(15509),g=a(13877),h=a(59303),y=a(62410),_=a(62012),v=a(60076),b=a(77572),w=a(86706),E=a(28672),k=a(18446),C=a.n(k),O=a(76913),P=a(51014),L=a(52661),x=a(19210),T=a(76004),I=a(29299),S=function(e){var t=(0,I.Vs)(e.hits_by_severity,"label");return r().createElement("div",{className:"shield-set"},I.og.map((function(e){return r().createElement(T.Tooltip,{key:e.value,content:"".concat(e.label," severity")},e.hasIcon&&(0===t[e.value]?r().createElement("a",{className:"disabled-shield nowrap"},r().createElement(x.ZP,{style:{color:"var(--pf-global--disabled-color--200)"}}),r().createElement("span",null,"0")):r().createElement(_.Link,{key:e.value,to:"?severity=".concat(e.value),className:"nowrap"},r().createElement(x.ZP,{style:{color:e.iconColor}}),r().createElement("span",null,t[e.value]))))})))};S.propTypes={hits_by_severity:m().shape({critical:m().number,important:m().number,moderate:m().number,low:m().number}).isRequired,linkTo:m().string};const D=S;function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){(0,s.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j=function(e){var t=e.query,a=t.isError,o=t.error,l=t.isUninitialized,i=t.isFetching,c=t.isSuccess,p=t.data,m=t.refetch,k=(0,w.useDispatch)(),x=(0,w.useSelector)((function(e){return e.filters.workloadsListState})),T=(null==p?void 0:p.workloads)||[],S=x.limit,Z=Math.floor(x.offset/x.limit)+1,j=(0,n.useState)([]),F=(0,d.Z)(j,2),R=F[0],B=F[1],A=(0,n.useState)([]),H=(0,d.Z)(A,2),N=H[0],V=H[1],q=(0,n.useState)(!1),z=(0,d.Z)(q,2),U=z[0],G=z[1],W=(0,n.useState)(!1),J=(0,d.Z)(W,2),X=J[0],Y=J[1],$=(0,n.useState)(!0),K=(0,d.Z)($,2),Q=K[0],ee=K[1],te=function(e){return k((0,E.$4)(e))},ae=l||i||!U,ne=a,re=0===N.length,oe=c,le=(0,_.useLocation)().search;(0,n.useEffect)((function(){V(ie(T))}),[p,x.namespace_name,x.cluster_name,x.severity,x.sortDirection,x.sortIndex]),(0,n.useEffect)((function(){if(le&&Q){var e=(0,O.yG)(le);if(e.sort){var t=(0,O.Lg)(e.sort);e.sortIndex=h.Bk.indexOf(t.name),e.sortDirection=t.direction}e.offset&&(e.offset=Number(e.offset[0])),e.limit&&(e.limit=Number(e.limit[0])),e.impacting&&!Array.isArray(e.impacting)&&(e.impacting=["".concat(e.impacting)]),te(M(M({},x),e))}ee(!1)}),[]),(0,n.useEffect)((function(){Q||(0,O.aM)(x,h.Bk)}),[x,Q]),(0,n.useEffect)((function(){B(ce(N)),G(!0),Y((0,I.wW)(x))}),[N,x.limit,x.offset]);var ie=function(e){return G(!1),e.filter((function(e){return(0,O.U1)(e,x)})).sort((function(e,t){var a,n,r="asc"===x.sortDirection?1:-1;switch(x.sortIndex){case h._p:return null!=e&&e.cluster.display_name&&null!=t&&t.cluster.display_name?r*(null==e?void 0:e.cluster.display_name.localeCompare(null==t?void 0:t.cluster.display_name)):r*(null==e?void 0:e.cluster.uuid.localeCompare(null==t?void 0:t.cluster.uuid));case h.cl:return(a=e.metadata.recommendations||0)>(n=t.metadata.recommendations||0)?r:n>a?-r:0;case h.Bh:a=e.metadata.hits_by_severity||{1:0,2:0,3:0,4:0},n=t.metadata.hits_by_severity||{1:0,2:0,3:0,4:0};for(var o=4;o>0;o--){if(a[o]>n[o])return r;if(a[o]<n[o])return-r}return 0;case h.Zg:return(a=e.metadata.objects||0)>(n=t.metadata.objects||0)?r:n>a?-r:0;case h.nU:return(a=new Date(e.metadata.last_checked_at||0))>(n=new Date(t.metadata.last_checked_at||0))?r:n>a?-r:0}}))},ce=function(e){return e.slice(S*(Z-1),S*(Z-1)+S).map((function(e,t){return{entity:e,cells:[r().createElement("span",{key:t},r().createElement(_.Link,{to:"".concat(v.G,"/workloads/").concat(e.cluster.uuid,"/").concat(e.namespace.uuid)},r().createElement("p",{key:"".concat(t,"-cluster")},e.cluster.display_name||e.cluster.uuid),r().createElement("p",{key:"".concat(t,"-namespace")},e.namespace.name||e.namespace.uuid))),e.metadata.recommendations,r().createElement("span",{key:t},r().createElement(D,{hits_by_severity:e.metadata.hits_by_severity})),e.metadata.objects,r().createElement("span",{key:t},r().createElement(y.Z,{extraTitle:"Last seen: ",date:e.metadata.last_checked_at,variant:"relative"}))]}}))},se=[{label:"Cluster name",filterValues:{key:"cluster_name",onChange:function(e,t){return te(M(M({},x),{},{offset:0,cluster_name:t}))},value:x.cluster_name,placeholder:"Filter by cluster name"}},{label:"Namespace name",filterValues:{key:"namespace_name",onChange:function(e,t){return te(M(M({},x),{},{offset:0,namespace_name:t}))},value:x.namespace_name,placeholder:"Filter by namespace name"}},{label:"Severity",type:b.conditionalFilterType.checkbox,id:h.Fy.severity.urlParam,value:"checkbox-".concat(h.Fy.severity.urlParam),filterValues:{key:"".concat(h.Fy.severity.urlParam,"-filter"),onChange:function(e,t){return"severity",a=t,(0,O.Lv)(x,te,"severity",a);var a},value:x.severity,items:h.Fy.severity.values,placeholder:"Filter by severity"}}],de={showDeleteButton:X,deleteTitle:"Reset filters",filters:(0,O.mt)(x,h.Fy),onDelete:function(e,t,a){a?C()(x,E.Cz)?m():(0,E.aw)(x,E.Cz,te):t.map((function(e){var t,a=(0,s.Z)({},e.urlParam,Array.isArray(x[e.urlParam])?x[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");a[e.urlParam].length>0?te(M(M({},x),a)):(t=e.urlParam,(0,O.oo)(x,te,t))}))}},pe=function(e,t){G(!1);var a=t*x.limit-x.limit;te(M(M({},x),{},{offset:a}))},me=function(e,t){t!==x.limit&&(G(!1),te(M(M({},x),{},{limit:t,offset:0})))};return a&&404===o.status?r().createElement(P.dz,null):c&&0===T.length?r().createElement(P.Yh,null):r().createElement("div",{id:"workloads-list-table"},r().createElement(u.Z,{pagination:{itemCount:N.length,page:Z,perPage:S,onSetPage:pe,onPerPageSelect:me,isCompact:!0,ouiaId:"pager"},filterConfig:{items:se},activeFiltersConfig:a?{showDeleteButton:!1}:de}),r().createElement(f.Table,{"aria-label":"Table of workloads",ouiaId:"workloads",variant:f.TableVariant.compact,cells:h.go,rows:ne||ae||re?[{fullWidth:!0,cells:[{props:{colSpan:h.go.length+1},title:ne?r().createElement(P.Te,null):ae?r().createElement(L.Z,null):r().createElement(P.DH,null)}]}]:oe?R:r().createElement(P.Te,null),isStickyHeader:!0,sortBy:{index:x.sortIndex,direction:x.sortDirection},onSort:function(e,t,a){G(!1),te(M(M({},x),{},{sortIndex:t,sortDirection:a}))}},r().createElement(f.TableHeader,null),r().createElement(f.TableBody,null)),r().createElement(g.tl,{ouiaId:"pager",itemCount:N.length,page:Z,perPage:S,onSetPage:pe,onPerPageSelect:me,onPageInput:pe,widgetId:"pagination-options-menu-bottom",variant:g.aM.bottom}))};j.propTypes={query:m().object.isRequired};const F=function(){var e=(0,c.mJ)();return r().createElement(j,{query:e})};var R=a(34348),B=a(55140);const A=function(){var e=(0,o.Z)();return(0,B.Z)().updateDocumentTitle(e.formatMessage(i.Z.documentTitle,{subnav:"Workloads"})),r().createElement(r().Fragment,null,r().createElement(l.Z,{className:"ins-c-clusters-header"},r().createElement(R.Dx,{headingLevel:"h1",ouiaId:"page-header"},"Workloads")),r().createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section"},r().createElement(F,null)))}},80598:()=>{},28992:()=>{},93398:()=>{},46928:()=>{}}]);
//# sourceMappingURL=../sourcemaps/WorkloadsList.0dc6561be7d7603c354fe78cf5399029.js.map