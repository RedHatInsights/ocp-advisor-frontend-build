"use strict";(self.webpackChunkocp_advisor_frontend=self.webpackChunkocp_advisor_frontend||[]).push([[420],{67636:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var n=r(93264),a=r.n(n),i=r(86896),l=r(48716),o=r(39173),c=r(86350),s=r(30893),u=r(86362),f=r(71002),m=r(4942),d=r(45987),g=r(93433),p=r(29439),h=r(45697),b=r.n(h),v=r(88931),y=r(30097),P=r(56161),E=r(18246),Z=r(90111),S=r(28672),T=r(59303),w=r(76913),C=r(52661),O=r(51014);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,m.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e){var t=function(e,t){if("object"!==(0,f.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==(0,f.Z)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===(0,f.Z)(t)?t:String(t)}var _=function(e){var t=e.query,r=t.isError,l=t.isUninitialized,o=t.isFetching,c=t.isSuccess,u=t.data,f=(0,i.Z)(),h=(0,v.useDispatch)(),b=function(e){return h((0,S.$Q)(e))},j=(0,v.useSelector)((function(e){return e.filters.clustersListState})),_=(null==u?void 0:u.data)||[],k=j.offset/j.limit+1,I=(0,n.useState)([]),R=(0,p.Z)(I,2),B=R[0],M=R[1],F=(0,n.useState)([]),V=(0,p.Z)(F,2),q=V[0],L=V[1];(0,n.useEffect)((function(){L(H(B,j.sortIndex,j.sortDirection))}),[B,j.sortIndex,j.sortDirection,j.limit,j.offset]),(0,n.useEffect)((function(){M(A(_,j))}),[u,j.hits,j.text]);var A=function(e,t){return(0,w.io)(e.filter((function(e){return(0,w.im)(e,t)})))},H=function(e,t,r){var n=(0,g.Z)(e);return-1!==t&&n.sort((function(e,n){var a,i,l=r===y.SortByDirection.asc?1:-1;switch(t){case T.T8:return a=e.cluster.cluster_name||e.cluster.cluster_id,i=n.cluster.cluster_name||n.cluster.cluster_id,a.localeCompare(i)?a.localeCompare(i)*l:0;case T.wz:return(a=new Date(e.cluster.last_checked_at))>(i=new Date(n.cluster.last_checked_at))?l:i>a?-l:0;default:return(a=e.cells[t])>(i=n.cells[t])?l:i>a?-l:0}})),n.slice(j.limit*(k-1),j.limit*(k-1)+j.limit)},z=function(e){var t=D(D({},j),{},{offset:0}),r=(t[e],(0,d.Z)(t,[e].map(x)));b(D(D({},r),"text"===e?{text:""}:"hits"===e?{hits:[]}:{}))},N=[{label:f.formatMessage(s.Z.name).toLowerCase(),filterValues:{key:"text-filter",onChange:function(e,t){return b(D(D({},j),{},{text:t}))},value:j.text,placeholder:f.formatMessage(s.Z.filterBy)}},{label:T.RT.hits.title,type:T.RT.hits.type,id:T.RT.hits.urlParam,value:"checkbox-".concat(T.RT.hits.urlParam),filterValues:{key:"".concat(T.RT.hits.urlParam,"-filter"),onChange:function(e,t){return function(e,t){t.length>0?b(D(D({},j),{},{offset:0},(0,m.Z)({},e,t))):z(e)}(T.RT.hits.urlParam,t)},value:j.hits,items:T.RT.hits.values}}],Q={deleteTitle:f.formatMessage(s.Z.resetFilters),filters:(0,w.mt)(j,T.RT),onDelete:function(e,t,r){r?b(S.Ly):t.map((function(e){var t=(0,m.Z)({},e.urlParam,Array.isArray(j[e.urlParam])?j[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?b(D(D({},j),t)):z(e.urlParam)}))}};return a().createElement("div",{id:"clusters-list-table"},a().createElement(Z.Z,{pagination:{itemCount:B.length,page:k,perPage:j.limit,onSetPage:function(e,t){return b(D(D({},j),{},{offset:j.limit*(t-1)}))},onPerPageSelect:function(e,t){return b(D(D({},j),{},{limit:t,offset:0}))},isCompact:!0,ouiaId:"pager"},filterConfig:{items:N},activeFiltersConfig:Q}),(l||o)&&a().createElement(C.Z,null),r&&a().createElement(P.Card,{ouiaId:"error-state"},a().createElement(P.CardBody,null,a().createElement(O.Te,null))),!(l||o)&&c&&a().createElement(a().Fragment,null,a().createElement(y.Table,{"aria-label":"Table of clusters",ouiaId:"clusters",variant:y.TableVariant.compact,cells:T.Bg,rows:q,sortBy:{index:j.sortIndex,direction:j.sortDirection},onSort:function(e,t,r){b(D(D({},j),{},{sortIndex:t,sortDirection:r}))},isStickyHeader:!0},a().createElement(y.TableHeader,null),a().createElement(y.TableBody,null)),_.length>0&&0===B.length&&a().createElement(P.Card,{ouiaId:"empty-state"},a().createElement(P.CardBody,null,a().createElement(O.VA,null)))),a().createElement(E.Pagination,{ouiaId:"pager",itemCount:B.length,page:j.offset/j.limit+1,perPage:Number(j.limit),onSetPage:function(e,t){return b(D(D({},j),{},{offset:j.limit*(t-1)}))},onPerPageSelect:function(e,t){return b(D(D({},j),{},{limit:t,offset:0}))},widgetId:"pagination-options-menu-bottom",variant:E.PaginationVariant.bottom}))};_.propTypes={query:b().object.isRequired};const k=function(){var e=(0,u.Oj)();return a().createElement(_,{query:e})},I=function(){var e=(0,i.Z)();return document.title=e.formatMessage(s.Z.documentTitle,{subnav:"Clusters"}),a().createElement(a().Fragment,null,a().createElement(l.Z,{className:"ins-c-clusters-header"},a().createElement(o.Z,{title:"".concat(e.formatMessage(s.Z.insightsHeader)," ").concat(e.formatMessage(s.Z.clusters).toLowerCase())})),a().createElement(c.Z,null,a().createElement(k,null)))}}}]);
//# sourceMappingURL=../sourcemaps/ClustersList.2bfe394cf188dbc94177881dc0e4e929.js.map