(self.webpackChunkocpAdvisor=self.webpackChunkocpAdvisor||[]).push([[1224],{76913:(e,t,r)=>{"use strict";r.d(t,{Lg:()=>C,Lv:()=>P,U1:()=>x,WL:()=>k,_:()=>j,_F:()=>h,aM:()=>_,im:()=>y,mt:()=>w,oo:()=>O,yG:()=>Z});var n=r(71002),a=r(45987),o=r(4942),i=r(42982),s=r(70885),l=r(48403),c=r.n(l),u=r(50361),f=r.n(u),d=(r(92950),r(81249)),m=r(59303),v=r(29299);function p(e){var t=function(e,t){if("object"!==(0,n.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!==(0,n.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,n.Z)(t)?t:String(t)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e,t){return Object.entries(t).every((function(t){var r=(0,s.Z)(t,2),n=r[0],a=r[1];switch(n){case"text":return e.description.toLowerCase().includes(a.toLowerCase());case m.W2.total_risk.urlParam:return a.includes(String(e.total_risk));case m.W2.category.urlParam:return e.tags.find((function(e){return a.includes(String(m.kT[e]))}));case m.W2.impact.urlParam:return a.includes(String(e.impact));case m.W2.impacting.urlParam:return!(a.length>0)||a.some((function(t){return"true"===t?e.impacted_clusters_count>0:"false"===t?0===e.impacted_clusters_count:void 0}));case m.W2.likelihood.urlParam:return a.includes(String(e.likelihood));case m.W2.rule_status.urlParam:return"all"===a||"disabled"===a&&e.disabled||"enabled"===a&&!e.disabled;case m.W2.res_risk.urlParam:return a.includes(String(e.resolution_risk));default:return!0}}))},y=function(e,t){return Object.entries(t).every((function(t){var r=(0,s.Z)(t,2),n=r[0],a=r[1];switch(n){case"text":return(e.cluster_name||e.cluster_id).toLowerCase().includes(a.toLowerCase());case m.RT.hits.urlParam:return 0===a.length&&parseInt(e.total_hit_count)>0||a.includes("all")||a.some((function(t){return e.hits_by_total_risk[t]>0}));case"version":return 0===a.length||a.includes(k(e.cluster_version));default:return!0}}))},w=function(e,t){var r=f()(e);return delete r.sortIndex,delete r.sortDirection,delete r.sort,delete r.offset,delete r.limit,(null==r?void 0:r.hits)&&0===r.hits.length&&delete r.hits,function(e,t){return Object.entries(e||{}).reduce((function(e,r){var n=(0,s.Z)(r,2),a=n[0],o=n[1];if(t[a]){var l=t[a],u=Array.isArray(o)?o.map((function(e){var t=l.values.find((function(t){return t.value===String(e)}));return t?{name:t.text||t.label,value:e}:{name:e,value:e}})):[{name:l.values.find((function(e){return e.value===String(o)})).label,value:o}];return[].concat((0,i.Z)(e),[{category:c()(l.title),chips:u,urlParam:l.urlParam}])}return"text"===a?[].concat((0,i.Z)(e),(0,i.Z)(o.length>0?[{category:"Name",chips:[{name:o,value:o}],urlParam:a}]:[])):"version"===a?[].concat((0,i.Z)(e),(0,i.Z)(o.length>0?[{category:"Version",chips:o.map((function(e){return{name:e,value:e}})),urlParam:a}]:[])):"namespace_name"===a?[].concat((0,i.Z)(e),(0,i.Z)(o.length>0?[{category:"Namespace name",chips:[{name:o,value:o}],urlParam:a}]:[])):"cluster_name"===a?[].concat((0,i.Z)(e),(0,i.Z)(o.length>0?[{category:"Cluster name",chips:[{name:o,value:o}],urlParam:a}]:[])):void 0}),[])}(r,t)},Z=function(e){var t=new URLSearchParams(e);return Array.from(t).reduce((function(e,t){var r=(0,s.Z)(t,2),n=r[0],a=r[1];return g(g({},e),{},(0,o.Z)({},n,["text","first","rule_status","sort","cluster_name","namespace_name"].includes(n)?a:"true"===a||"false"===a?JSON.parse(a):a.split(",")))}),{})},C=function(e){return{name:e.substring(e.startsWith("-")?1:0),direction:e.startsWith("-")?"desc":"asc"}},_=function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,o=new URL(window.location.origin+window.location.pathname);o.searchParams.set("sort",(e=n.sortIndex,t=a,r=n.sortDirection,["desc","asc"].includes(r)||console.error("Invalid sort parameters (is not asc nor desc)"),"".concat("asc"===r?"":"-").concat(t[e]))),Object.entries(n).forEach((function(e){var t=(0,s.Z)(e,2),r=t[0],n=t[1];return"sortIndex"!==r&&"sortDirection"!==r&&"sort"!==r&&""!==n&&!(Array.isArray(n)&&0===n.length)&&o.searchParams.set(r,n)})),window.history.replaceState(null,null,o.href)},j=function(e,t,r){return r*(0,d.compare)(e,t)},k=function(e){return(0,d.coerce)(void 0!==e&&(0,d.valid)((0,d.coerce)(e))?e:"0.0.0").version},O=function(e,t,r){var n=g(g({},e),{},{offset:0});n[r],t(g(g({},(0,a.Z)(n,[r].map(p))),"text"===r?{text:""}:"hits"===r?{hits:[]}:"version"===r?{version:[]}:{}))},P=function(e,t,r,n){return n.length>0?t(g(g({},e),{},{offset:0},(0,o.Z)({},r,n))):O(e,t,r)},x=function(e,t){var r=(0,v.Vs)(e.metadata.hits_by_severity,"general");return Object.entries(t).every((function(n){var a=(0,s.Z)(n,2),o=a[0],i=a[1];switch(o){case"cluster_name":return(e.cluster.display_name||e.cluster.uuid).toLowerCase().includes(i.toLowerCase());case"namespace_name":return(e.namespace.name||e.namespace.uuid).toLowerCase().includes(i.toLowerCase());case"severity":return 0===i.length||(0,v.mR)(r,t.severity);default:return!0}}))}},90670:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(76004),a=r(23218),o=r(45697),i=r.n(o),s=r(92950),l=r.n(s),c=r(86896),u=r(30893),f=function(e){var t=e.rule,r=(0,c.Z)();return l().createElement(l().Fragment,null,t.disabled&&l().createElement(n.Tooltip,{content:r.formatMessage(u.Z.ruleIsDisabledTooltip),position:n.TooltipPosition.right},l().createElement(a.Label,{color:"gray",isCompact:!0},r.formatMessage(u.Z.disabled))))};f.propTypes={rule:i().object};const d=f},73451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(15861),a=r(70885),o=r(87757),i=r.n(o),s=r(92950),l=r.n(s),c=r(86896),u=r(45697),f=r.n(u),d=r(86706),m=r(6202),v=r(32752),p=r(4853),b=r(23811),g=r(78826),h=r(12282),y=r(71355),w=r(30893),Z=r(77647),C=function(e){var t=e.isModalOpen,r=e.handleModalToggle,o=e.rule,u=e.afterFn,f=e.host,C=e.hosts,_=(0,c.Z)(),j=(0,s.useState)(""),k=(0,a.Z)(j,2),O=k[0],P=k[1],x=(0,s.useState)(!!f),S=(0,a.Z)(x,2),I=S[0],M=S[1],E=(0,s.useState)(C.length>0),D=(0,a.Z)(E,2),L=D[0],A=D[1],T=(0,Z.om)(),W=(0,a.Z)(T,1)[0],R=(0,d.useDispatch)(),F=function(e){return R((0,y.addNotification)(e))},N=function(){var e=(0,n.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=C.map((function(e){return(0,Z.Dg)({uuid:e.id,recId:o.rule_id,justification:O})})),e.next=4,Promise.all(t);case 4:F({variant:"success",dismissable:!0,timeout:!0,title:_.formatMessage(w.Z.recSuccessfullyDisabledForCluster)}),u&&u(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),F({variant:"danger",dismissable:!0,title:_.formatMessage(w.Z.error),description:"".concat(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!I){e.next=7;break}return e.next=4,(0,Z.Dg)({uuid:f,recId:o.rule_id,justification:O});case 4:F({variant:"success",timeout:!0,dismissable:!0,title:_.formatMessage(w.Z.recSuccessfullyDisabledForCluster)}),e.next=14;break;case 7:if(!L){e.next=11;break}N(),e.next=14;break;case 11:return e.next=13,W({rule_id:o.rule_id,justification:O}).unwrap();case 13:F({variant:"success",timeout:!0,dismissable:!0,title:_.formatMessage(w.Z.recSuccessfullyDisabled)});case 14:P(""),u&&u(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),F({variant:"danger",dismissable:!0,title:_.formatMessage(w.Z.error),description:"".concat(e.t0)});case 21:r(!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return l().createElement(g.u_,{variant:"small",title:_.formatMessage(w.Z.disableRule),isOpen:t,onClose:function(){r(),P("")},actions:[l().createElement(m.Button,{key:"confirm",variant:"primary",onClick:function(){return U()},ouiaId:"confirm"},_.formatMessage(w.Z.save)),l().createElement(m.Button,{key:"cancel",variant:"link",onClick:function(){r(!1),P("")},ouiaId:"cancel"},_.formatMessage(w.Z.cancel))],ouiaId:"recommendation-disable"},_.formatMessage(w.Z.disableRuleBody),l().createElement(p.l,null,l().createElement(b.c,{fieldId:"blank-form"}),(f||C.length>0)&&l().createElement(b.c,{fieldId:"disable-rule-one-system"},l().createElement(v.Checkbox,{isChecked:I||L,onChange:function(){f?M(!I):A(!L)},label:f?_.formatMessage(w.Z.disableRuleSingleCluster):_.formatMessage(w.Z.disableRuleForClusters),id:"disable-rule-one-system",name:"disable-rule-one-system",ouiaId:"disable-recommendation-one-cluster"})),l().createElement(b.c,{label:_.formatMessage(w.Z.justificationNote),fieldId:"disable-rule-justification"},l().createElement(h.oi,{type:"text",id:"disable-rule-justification","aria-describedby":"disable-rule-justification",value:O,onChange:function(e){return P(e)},onKeyDown:function(e){return"Enter"===e.key&&(e.preventDefault(),U())}}))))};C.propTypes={isModalOpen:f().bool,rule:f().object,handleModalToggle:f().func,afterFn:f().func,host:f().object,hosts:f().array},C.defaultProps={isModalOpen:!1,rule:{},handleModalToggle:function(){},afterFn:function(){},host:void 0,hosts:[]};const _=C},29299:(e,t,r)=>{"use strict";r.d(t,{Vs:()=>s,g0:()=>c,mR:()=>l,og:()=>i});var n=r(44439),a=r.n(n);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=[{value:"critical",label:"Critical",iconColor:"var(--pf-global--danger-color--100)",textColor:"var(--pf-global--danger-color--100)",hasIcon:!0},{value:"important",label:"Important",iconColor:"var(--pf-global--palette--orange-300)",textColor:"var(--pf-global--palette--orange-400)",hasIcon:!0},{value:"moderate",label:"Moderate",iconColor:"var(--pf-global--warning-color--100)",textColor:"var(--pf-global--warning-color--200)",hasIcon:!0},{value:"low",label:"Low",iconColor:"var(--pf-global--Color--200)",textColor:"var(--pf-global--default-color--300)",hasIcon:!0},{value:"none",label:"Unknown"}],s=function(e,t){var r={1:"low",2:"moderate",3:"important",4:"critical"},n={};if("general"===t||"label"===t)for(var a in e)a in r&&(n[r[a]]=e[a]);else n=r[e];return n},l=function(e,t){var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}(t);try{for(n.s();!(r=n.n()).done;)if(e[r.value]>0)return!0}catch(e){n.e(e)}finally{n.f()}},c=function(e){var t=a().cloneDeep(e);return delete t.sortIndex,delete t.sortDirection,delete t.offset,delete t.limit,Object.values(t).filter((function(e){return!(0,n.isEmpty)(e)}))}},45467:()=>{},70347:()=>{},32857:()=>{},28992:()=>{},30187:()=>{},90479:()=>{},78752:()=>{},21064:()=>{},82014:()=>{},25238:()=>{},93398:()=>{},46928:()=>{},11177:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}}]);
//# sourceMappingURL=../sourcemaps/1224.cf39a0c029418c7a3f9c5e6cf052632a.js.map