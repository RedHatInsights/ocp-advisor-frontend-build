(self.webpackChunkocpAdvisor=self.webpackChunkocpAdvisor||[]).push([[6488],{52661:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(28416),r=a.n(n),c=a(2095),i=a(85962),l=a(24561);const o=function(){return r().createElement(c.Card,{ouiaId:"loading-skeleton"},r().createElement(i.CardBody,null,r().createElement(l.aV,null)))}},59122:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>L});var n=a(28416),r=a.n(n),c=a(86896),i=a(89376),l=a(30893),o=a(86362),s=a(4942),u=a(70885),m=a(45697),f=a.n(m),d=a(56021),p=a(64420),g=a(35981),y=a(49004),v=a(58027),h=a(13877),E=a(59303),b=a(62410),k=a(62012),w=a(60076),P=a(86706),_=a(28672),S=a(18446),D=a.n(S),O=a(76913),Z=a(51014),j=a(52661),C=a(29299);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){(0,s.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T=function(e){var t=e.query,a=t.isError,c=t.error,i=t.isUninitialized,l=t.isFetching,o=t.isSuccess,m=t.data,f=t.refetch,S=(0,P.useDispatch)(),x=(0,P.useSelector)((function(e){return e.filters.workloadsListState})),T=(null==m?void 0:m.workloads)||[],A=x.limit,B=Math.floor(x.offset/x.limit)+1,F=(0,n.useState)([]),L=(0,u.Z)(F,2),N=L[0],q=L[1],z=(0,n.useState)([]),M=(0,u.Z)(z,2),V=M[0],W=M[1],R=(0,n.useState)(!1),U=(0,u.Z)(R,2),G=U[0],H=U[1],J=(0,n.useState)(!1),Y=(0,u.Z)(J,2),$=Y[0],K=Y[1],Q=(0,n.useState)(!0),X=(0,u.Z)(Q,2),ee=X[0],te=X[1],ae=function(e){return S((0,_.$4)(e))},ne=i||l||!G,re=a,ce=0===V.length,ie=o,le=(0,k.useLocation)().search;(0,n.useEffect)((function(){W(oe(T))}),[m,x.namespace_name,x.cluster_name,x.severity,x.sortDirection,x.sortIndex]),(0,n.useEffect)((function(){if(le&&ee){var e=(0,O.yG)(le);if(e.sort){var t=(0,O.Lg)(e.sort);e.sortIndex=E.Bk.indexOf(t.name),e.sortDirection=t.direction}e.offset&&(e.offset=Number(e.offset[0])),e.limit&&(e.limit=Number(e.limit[0])),e.impacting&&!Array.isArray(e.impacting)&&(e.impacting=["".concat(e.impacting)]),ae(I(I({},x),e))}te(!1)}),[]),(0,n.useEffect)((function(){ee||(0,O.aM)(x,E.Bk)}),[x,ee]),(0,n.useEffect)((function(){q(se(V)),H(!0),K((0,C.wW)(x))}),[V,x.limit,x.offset]);var oe=function(e){return H(!1),e.filter((function(e){return(0,O.U1)(e,x)})).sort((function(e,t){var a,n,r,c,i="asc"===x.sortDirection?1:-1;switch(x.sortIndex){case E._p:return r=(null===(a=e.cluster)||void 0===a?void 0:a.display_name)||e.cluster.uuid,c=(null===(n=t.cluster)||void 0===n?void 0:n.display_name)||t.cluster.uuid,i*r.localeCompare(c);case E.cl:return(r=e.metadata.recommendations||0)>(c=t.metadata.recommendations||0)?i:c>r?-i:0;case E.Zg:return(r=e.metadata.objects||0)>(c=t.metadata.objects||0)?i:c>r?-i:0;case E.nU:return(r=new Date(e.metadata.last_checked_at||0))>(c=new Date(t.metadata.last_checked_at||0))?i:c>r?-i:0}}))},se=function(e){return e.slice(A*(B-1),A*(B-1)+A).map((function(e,t){return{entity:e,cells:[r().createElement("span",{key:t},r().createElement(k.Link,{to:"".concat(w.G,"/workloads/").concat(e.cluster.uuid,"/").concat(e.namespace.uuid)},r().createElement("p",{key:"".concat(t,"-cluster")},e.cluster.display_name||e.cluster.uuid),r().createElement("p",{key:"".concat(t,"-namespace")},e.namespace.name||e.namespace.uuid))),e.metadata.recommendations,e.metadata.objects,r().createElement("span",{key:t},r().createElement(b.Z,{extraTitle:"Last seen: ",date:e.metadata.last_checked_at,variant:"relative"}))]}}))},ue=[{label:"Cluster name",type:"text",filterValues:{key:"cluster_name",onChange:function(e,t){return ae(I(I({},x),{},{offset:0,cluster_name:t}))},value:x.cluster_name,placeholder:"Filter by cluster name"}},{label:"Namespace name",type:"text",filterValues:{key:"namespace_name",onChange:function(e,t){return ae(I(I({},x),{},{offset:0,namespace_name:t}))},value:x.namespace_name,placeholder:"Filter by namespace name"}}],me={showDeleteButton:$,deleteTitle:"Reset filters",filters:(0,O.mt)(x,E.Fy),onDelete:function(e,t,a){a?D()(x,_.Cz)?f():(0,_.aw)(x,_.Cz,ae):t.map((function(e){var t,a=(0,s.Z)({},e.urlParam,Array.isArray(x[e.urlParam])?x[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");a[e.urlParam].length>0?ae(I(I({},x),a)):(t=e.urlParam,(0,O.oo)(x,ae,t))}))}},fe=function(e,t){H(!1);var a=t*x.limit-x.limit;ae(I(I({},x),{},{offset:a}))},de=function(e,t){t!==x.limit&&(H(!1),ae(I(I({},x),{},{limit:t,offset:0})))};return a&&404===c.status?r().createElement(Z.dz,null):o&&0===T.length?r().createElement(Z.Yh,null):r().createElement("div",{id:"workloads-list-table"},r().createElement(d.Z,{pagination:{itemCount:V.length,page:B,perPage:A,onSetPage:fe,onPerPageSelect:de,isCompact:!0,ouiaId:"pager"},filterConfig:{items:ue},activeFiltersConfig:a?{showDeleteButton:!1}:me}),r().createElement(g.i,{"aria-label":"Table of workloads",ouiaId:"workloads",variant:p.TableVariant.compact,cells:E.go,rows:re||ne||ce?[{fullWidth:!0,cells:[{props:{colSpan:E.go.length+1},title:re?r().createElement(Z.Te,null):ne?r().createElement(j.Z,null):r().createElement(Z.DH,null)}]}]:ie?N:r().createElement(Z.Te,null),isStickyHeader:!0,sortBy:{index:x.sortIndex,direction:x.sortDirection},onSort:function(e,t,a){H(!1),ae(I(I({},x),{},{sortIndex:t,sortDirection:a}))}},r().createElement(y.x,null),r().createElement(v.R,null)),r().createElement(h.tl,{ouiaId:"pager",itemCount:V.length,page:B,perPage:A,onSetPage:fe,onPerPageSelect:de,onPageInput:fe,widgetId:"pagination-options-menu-bottom",variant:h.aM.bottom}))};T.propTypes={query:f().object.isRequired};const A=function(){var e=(0,o.mJ)();return r().createElement(T,{query:e})};var B=a(34348),F=a(55140);const L=function(){var e=(0,c.Z)();return(0,F.Z)().updateDocumentTitle(e.formatMessage(l.Z.documentTitle,{subnav:"Workloads"})),r().createElement(r().Fragment,null,r().createElement(i.Z,{className:"ins-c-clusters-header"},r().createElement(B.Dx,{headingLevel:"h1",ouiaId:"page-header"},"Workloads")),r().createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section"},r().createElement(A,null)))}},314:()=>{}}]);
//# sourceMappingURL=../sourcemaps/WorkloadsList.32bbba7386c9f72e3c586426a2bf4f1f.js.map